(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[448],{30559:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/homes/[citySlugOrListingId]/[listingslug]",function(){return t(20773)}])},13357:function(e,n,t){"use strict";t.r(n),t.d(n,{SyncedInfo:function(){return k}});var i=t(91309),r=t(85893),s=t(67294),a=t(22853),o=t(10621),l=t(52006),c=t(65128),d=t(95425),u=t(63224),m=t(62286),g=t(20563),h=t(28721),p=(0,g.zo)(h.k,{position:"fixed",left:"$16",top:"$96",backgroundColor:"$neutrals-9",padding:"$12 $16",borderRadius:"$4",transition:"150ms opacity ease-out",zIndex:"$1","@sm":{top:"$64"},hover:{opacity:1}}),x=t(88232),f=t(43313),y=t(562),b=t(82729);function v(){var e=(0,b._)(["\n  query GetGuestFeedbackScore($listingId: Int!) {\n    listing(listingId: $listingId) {\n      npsAverages {\n        averageStayScore\n        averageHostStayScore\n      }\n    }\n  }\n"]);return v=function(){return e},e}var j=(0,t(31230).Ps)(v()),I=t(16748),C=function(e){var n,t=(0,I.a)(j,{variables:{listingId:e}}),i=t.data,r=t.loading,s=t.error;return{homeFeedback:null==i?void 0:null===(n=i.listing)||void 0===n?void 0:n.npsAverages,loading:r,error:s}},w=function(){var e=C(Number((0,y.bp)().listing.responseData.basicInfo.id)),n=e.homeFeedback,t=e.error,i=e.loading;return t?(0,r.jsx)(f.x,{className:(0,x.M6)("text-orange-primary"),children:"Error displaying NPS scores."}):(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)(f.x,{className:(0,x.M6)("text-white"),children:["Listing stay score:"," ",!i&&(0,r.jsx)("span",{className:"font-bold",children:_(null==n?void 0:n.averageStayScore)||"N/A"})]}),(0,r.jsxs)(f.x,{className:(0,x.M6)("text-white"),children:["Host avg stay score:"," ",!i&&(0,r.jsx)("span",{className:"font-bold",children:_(null==n?void 0:n.averageHostStayScore)||"N/A"})," "]})]})};function _(e){return Math.round((e+Number.EPSILON)*100)/100}var k=function(e){e.syncDate;var n=(0,a.$G)().t,t=(0,i._)(s.useState(!1),2),g=t[0],h=t[1],x="4"===(0,m.parseCookies)().pfv,f=void 0!=(0,m.parseCookies)().pfv;return!g&&(0,r.jsxs)(p,{align:"start",children:[(0,r.jsxs)(o.x,{css:{"& b":{cursor:"help"}},children:[(0,r.jsx)(w,{}),(0,r.jsx)(l.C,{scale:8,color:"neutrals-0",modern:!0,children:f?x?"Displaying Plum Promise pricing":"Displaying normal pricing":"Using location based Promise Fee"}),(0,r.jsx)(c.r,{underline:!0,as:"a",onClick:function(){(0,m.destroyCookie)(null,"pfv"),(0,m.setCookie)(null,"pfv",x?"3":"4",{path:"/",maxAge:31536e3}),window.location.reload()},children:f?x?"Switch to normal pricing":"Switch to Plum Promise pricing":"Override Promise Fee"}),(0,r.jsx)(l.C,{scale:10,color:"neutrals-5",modern:!0,children:n("listingpage:syncedInfo.onlyAdmins")})]}),(0,r.jsx)(d.E,{icon:(0,r.jsx)(u.W,{}),ariaLabel:"Dismiss synced info",title:"Dismiss",onClick:function(){return h(!0)},css:{color:"$neutrals-0",marginLeft:"$12",padding:"$0"}})]})}},20773:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return sJ},default:function(){return sq}});var i,r,s,a,o,l,c,d,u,m,g,h,p,x,f,y,b,v,j,I,C,w,_,k,S,P,N,D,$,L,O,T,A,E,z,F,B,G,M,R,U,H,K,W,Z,V,Y,X=t(85893),Q=t(67294),J=t(562),q=t(72253),ee=t(14932),en=t(91309),et=(0,Q.createContext)(null);et.displayName="GalleryStateContext";var ei=(0,Q.createContext)(null);function er(e){var n=e.children,t=(0,en._)((0,Q.useState)({activeSlide:0}),2),i=t[0],r=t[1],s=(0,Q.useMemo)(function(){return{setActive:function(e){r(function(n){return(0,ee._)((0,q._)({},n),{activeSlide:e})})}}},[]);return(0,X.jsx)(et.Provider,{value:i,children:(0,X.jsx)(ei.Provider,{value:s,children:n})})}ei.displayName="GalleryActionsContext";var es=t(7974),ea=["los-angeles"],eo={city:null},el=Q.createContext(null);function ec(e){var n=e.children,t=(0,J.bp)(),i=(0,en._)(Q.useState(eo),2),r=i[0],s=i[1],a=t.listing.responseData.neighbourhood;return Q.useEffect(function(){s(function(e){return Object.assign({},e,{city:{slug:a.citySlug,requiresRegNumber:2===a.cityId,isWalkFriendly:!ea.includes(a.citySlug)}})})},[a]),(0,X.jsx)(el.Provider,{value:[r,s],children:n})}el.displayName="CityConfigContext";var ed=Q.createContext(null);function eu(e){var n=e.children,t=e.experiments,i=(0,en._)(Q.useState(t),2),r=i[0],s=i[1];return(0,X.jsx)(ed.Provider,{value:[r,s],children:n})}ed.displayName="ExperimentContext";var em=t(59335),eg=t(59551),eh=t(27646),ep=t(42227),ex=t(61279),ef=t(11010),ey=t(97582),eb=t(11163),ev=t(32350),ej=t(69891),eI=t(30207),eC=t(8528),ew=t(64617),e_=t(55384),ek=t(84709),eS=t(52006),eP=t(10621),eN=t(83442),eD=t(55985),e$=t(22853),eL=t(64282);(i=S||(S={}))[i.Entertainment=1]="Entertainment",i[i.Bathroom=2]="Bathroom",i[i.KitchenDining=3]="KitchenDining",i[i.BedroomLaundry=4]="BedroomLaundry",i[i.WellnessFitness=5]="WellnessFitness",i[i.InternetOffice=6]="InternetOffice",i[i.HeatingCooling=7]="HeatingCooling",i[i.ParkingAccess=8]="ParkingAccess",i[i.Outdoor=9]="Outdoor",i[i.NiceToHaves=10]="NiceToHaves",i[i.Pets=11]="Pets",i[i.Other=12]="Other",(r=P||(P={}))[r.Swimming=56]="Swimming",r[r.Shared=82]="Shared",r[r.Private=83]="Private",r[r.Outdoor=84]="Outdoor",r[r.Indoor=85]="Indoor",r[r.Heated=86]="Heated",(s=N||(N={}))[s.Available=61]="Available",s[s.Accessible=89]="Accessible",s[s.Secured=90]="Secured",s[s.Private=91]="Private",s[s.Free=92]="Free",s[s.Paid=93]="Paid",s[s.OnStreet=94]="OnStreet",s[s.OnPremises=95]="OnPremises",s[s.FreeOnPremises=96]="FreeOnPremises",s[s.FreeOnStreet=97]="FreeOnStreet",s[s.PaidOnPremises=98]="PaidOnPremises",s[s.PaidOnStreet=99]="PaidOnStreet",s[s.Valet=114]="Valet",(a=D||(D={}))[a.WashingMachine=50]="WashingMachine",a[a.Private=199]="Private",a[a.Shared=200]="Shared",(o=$||($={}))[o.Dryer=51]="Dryer",o[o.Private=201]="Private",o[o.Shared=202]="Shared",(l=L||(L={}))[l.GamesConsole=148]="GamesConsole",l[l.PS3=11]="PS3",l[l.PS4=12]="PS4",l[l.NintendoWii=13]="NintendoWii",l[l.XBox=14]="XBox",(c=O||(O={}))[c.StreamingServices=190]="StreamingServices",c[c.Netflix=6]="Netflix",c[c.AmazonPrime=7]="AmazonPrime",(d=T||(T={}))[d.TV=2]="TV",d[d.SatelliteCable=180]="SatelliteCable",d[d.Smart=186]="Smart";var eO={61:{amenityId:N.Available,name:"Parking available",orderBy:0},50:{amenityId:D.WashingMachine,name:"Washing machine",orderBy:0},51:{amenityId:$.Dryer,name:"Dryer",orderBy:0},148:{amenityId:L.GamesConsole,name:"Games console",orderBy:0},190:{amenityId:O.StreamingServices,name:"Streaming services",orderBy:0},2:{amenityId:T.TV,name:"TV",orderBy:0}},eT=[N.Accessible,N.Secured,N.Private,N.Free,N.Paid,N.OnStreet,N.OnPremises,N.FreeOnPremises,N.FreeOnStreet,N.PaidOnPremises,N.PaidOnStreet],eA=[P.Shared,P.Private,P.Outdoor,P.Indoor,P.Heated],eE=[D.Shared,D.Private],ez=[$.Shared,$.Private],eF=[L.NintendoWii,L.PS3,L.PS4,L.XBox],eB=[O.AmazonPrime,O.Netflix],eG=[T.SatelliteCable,T.Smart],eM=function(){var e,n=(0,J.bp)(),t=(null===(e=n.listing)||void 0===e?void 0:e.responseData.amenities)||[],i=function(e){return t.some(function(n){return n.amenityId===e})},r=i(1),s=i(46),a=i(54),o=i(38),l=i(N.Available),c=i(P.Swimming),d=i(D.WashingMachine),u=i($.Dryer),m=i(L.GamesConsole),g=i(O.StreamingServices),h=i(T.TV),p=function(e){return t.some(function(n){return e.includes(n.amenityId)})};return{count:(0,Q.useMemo)(function(){var e=0;return(c||p(eA))&&(e+=1),(l||p(eT))&&(e+=1),d&&!p(eE)&&(e+=1),u&&!p(ez)&&(e+=1),m&&!p(eF)&&(e+=1),g&&!p(eB)&&(e+=1),h&&!p(eG)&&(e+=1),e+n.listing.responseData.amenities.filter(function(e){return!eA.includes(e.amenityId)&&!eT.includes(e.amenityId)&&e.amenityId!==N.Available&&e.amenityId!==P.Swimming&&e.amenityId!==D.WashingMachine&&e.amenityId!==$.Dryer&&e.amenityId!==L.GamesConsole&&e.amenityId!==O.StreamingServices&&e.amenityId!==T.TV}).length},[t]),hasAircon:s,hasLiftAccess:a,hasParkingAvailable:l,hasPetsAllowed:o,hasWifi:r,hasCharacteristics:p}},eR=t(75766);(u=A||(A={}))[u.Entertainment=1]="Entertainment",u[u.Bathroom=2]="Bathroom",u[u.KitchenDining=3]="KitchenDining",u[u.BedroomLaundry=4]="BedroomLaundry",u[u.WellnessFitness=5]="WellnessFitness",u[u.InternetOffice=6]="InternetOffice",u[u.HeatingCooling=7]="HeatingCooling",u[u.ParkingAccess=8]="ParkingAccess",u[u.Outdoor=9]="Outdoor",u[u.NiceToHaves=10]="NiceToHaves",u[u.Pets=11]="Pets",u[u.Other=12]="Other";var eU=(E={},(0,eR._)(E,A.Entertainment,"Entertainment"),(0,eR._)(E,A.Bathroom,"Bathroom"),(0,eR._)(E,A.KitchenDining,"Kitchen & Dining"),(0,eR._)(E,A.BedroomLaundry,"Bedroom & Laundry"),(0,eR._)(E,A.WellnessFitness,"Wellness & Fitness"),(0,eR._)(E,A.InternetOffice,"Internet & Office"),(0,eR._)(E,A.HeatingCooling,"Heating & Cooling"),(0,eR._)(E,A.ParkingAccess,"Parking & Access"),(0,eR._)(E,A.Outdoor,"Outdoor"),(0,eR._)(E,A.NiceToHaves,"Nice to haves"),(0,eR._)(E,A.Pets,"Pets"),(0,eR._)(E,A.Other,"Other"),E),eH=[{amenityId:1,categoryId:A.InternetOffice},{amenityId:2,categoryId:A.Entertainment},{amenityId:3,categoryId:A.Entertainment},{amenityId:4,categoryId:A.Entertainment},{amenityId:5,categoryId:A.Entertainment},{amenityId:6,categoryId:A.Entertainment},{amenityId:7,categoryId:A.Entertainment},{amenityId:10,categoryId:A.Entertainment},{amenityId:11,categoryId:A.Entertainment},{amenityId:12,categoryId:A.Entertainment},{amenityId:13,categoryId:A.Entertainment},{amenityId:14,categoryId:A.Entertainment},{amenityId:16,categoryId:A.HeatingCooling},{amenityId:17,categoryId:A.Entertainment},{amenityId:18,categoryId:A.NiceToHaves},{amenityId:19,categoryId:A.Entertainment},{amenityId:20,categoryId:A.Entertainment},{amenityId:21,categoryId:A.Outdoor},{amenityId:22,categoryId:A.BedroomLaundry},{amenityId:23,categoryId:A.Bathroom},{amenityId:24,categoryId:A.WellnessFitness},{amenityId:25,categoryId:A.Bathroom},{amenityId:26,categoryId:A.Bathroom},{amenityId:27,categoryId:A.Bathroom},{amenityId:28,categoryId:A.WellnessFitness},{amenityId:29,categoryId:A.BedroomLaundry},{amenityId:30,categoryId:A.NiceToHaves},{amenityId:31,categoryId:A.InternetOffice},{amenityId:34,categoryId:A.Bathroom},{amenityId:35,categoryId:A.BedroomLaundry},{amenityId:36,categoryId:A.WellnessFitness},{amenityId:37,categoryId:A.NiceToHaves},{amenityId:38,categoryId:A.Pets},{amenityId:39,categoryId:A.ParkingAccess},{amenityId:40,categoryId:A.KitchenDining},{amenityId:41,categoryId:A.KitchenDining},{amenityId:42,categoryId:A.KitchenDining},{amenityId:43,categoryId:A.KitchenDining},{amenityId:44,categoryId:A.KitchenDining},{amenityId:45,categoryId:A.KitchenDining},{amenityId:46,categoryId:A.HeatingCooling},{amenityId:47,categoryId:A.HeatingCooling},{amenityId:48,categoryId:A.HeatingCooling},{amenityId:49,categoryId:A.HeatingCooling},{amenityId:50,categoryId:A.BedroomLaundry},{amenityId:51,categoryId:A.BedroomLaundry},{amenityId:52,categoryId:A.ParkingAccess},{amenityId:53,categoryId:A.ParkingAccess},{amenityId:54,categoryId:A.ParkingAccess},{amenityId:55,categoryId:A.WellnessFitness},{amenityId:56,categoryId:A.WellnessFitness},{amenityId:57,categoryId:A.WellnessFitness},{amenityId:58,categoryId:A.Outdoor},{amenityId:59,categoryId:A.Outdoor},{amenityId:60,categoryId:A.Outdoor},{amenityId:61,categoryId:A.ParkingAccess},{amenityId:62,categoryId:A.Outdoor},{amenityId:63,categoryId:A.KitchenDining},{amenityId:64,categoryId:A.KitchenDining},{amenityId:65,categoryId:A.WellnessFitness},{amenityId:66,categoryId:A.Entertainment},{amenityId:67,categoryId:A.InternetOffice},{amenityId:68,categoryId:A.ParkingAccess},{amenityId:69,categoryId:A.ParkingAccess},{amenityId:70,categoryId:A.KitchenDining},{amenityId:71,categoryId:A.BedroomLaundry},{amenityId:72,categoryId:A.BedroomLaundry},{amenityId:73,categoryId:A.Other},{amenityId:74,categoryId:A.KitchenDining},{amenityId:75,categoryId:A.KitchenDining},{amenityId:76,categoryId:A.KitchenDining},{amenityId:77,categoryId:A.KitchenDining},{amenityId:78,categoryId:A.KitchenDining},{amenityId:79,categoryId:A.BedroomLaundry},{amenityId:80,categoryId:A.KitchenDining},{amenityId:81,categoryId:A.NiceToHaves},{amenityId:82,categoryId:A.WellnessFitness},{amenityId:83,categoryId:A.WellnessFitness},{amenityId:84,categoryId:A.WellnessFitness},{amenityId:85,categoryId:A.WellnessFitness},{amenityId:86,categoryId:A.WellnessFitness},{amenityId:87,categoryId:A.Outdoor},{amenityId:88,categoryId:A.InternetOffice},{amenityId:89,categoryId:A.ParkingAccess},{amenityId:90,categoryId:A.ParkingAccess},{amenityId:91,categoryId:A.ParkingAccess},{amenityId:92,categoryId:A.ParkingAccess},{amenityId:93,categoryId:A.ParkingAccess},{amenityId:94,categoryId:A.ParkingAccess},{amenityId:95,categoryId:A.ParkingAccess},{amenityId:96,categoryId:A.ParkingAccess},{amenityId:97,categoryId:A.ParkingAccess},{amenityId:98,categoryId:A.ParkingAccess},{amenityId:99,categoryId:A.ParkingAccess},{amenityId:100,categoryId:A.Outdoor},{amenityId:101,categoryId:A.Other},{amenityId:102,categoryId:A.WellnessFitness},{amenityId:103,categoryId:A.WellnessFitness},{amenityId:104,categoryId:A.KitchenDining},{amenityId:105,categoryId:A.KitchenDining},{amenityId:106,categoryId:A.WellnessFitness},{amenityId:107,categoryId:A.WellnessFitness},{amenityId:108,categoryId:A.Outdoor},{amenityId:109,categoryId:A.Outdoor},{amenityId:110,categoryId:A.Outdoor},{amenityId:111,categoryId:A.Outdoor},{amenityId:112,categoryId:A.InternetOffice},{amenityId:113,categoryId:A.InternetOffice},{amenityId:114,categoryId:A.ParkingAccess},{amenityId:115,categoryId:A.Other},{amenityId:116,categoryId:A.Other},{amenityId:117,categoryId:A.Other},{amenityId:118,categoryId:A.Outdoor},{amenityId:119,categoryId:A.NiceToHaves},{amenityId:120,categoryId:A.Other},{amenityId:121,categoryId:A.Bathroom},{amenityId:122,categoryId:A.Bathroom},{amenityId:123,categoryId:A.BedroomLaundry},{amenityId:124,categoryId:A.Outdoor},{amenityId:125,categoryId:A.Outdoor},{amenityId:126,categoryId:A.ParkingAccess},{amenityId:127,categoryId:A.KitchenDining},{amenityId:128,categoryId:A.KitchenDining},{amenityId:129,categoryId:A.NiceToHaves},{amenityId:130,categoryId:A.Other},{amenityId:131,categoryId:A.HeatingCooling},{amenityId:132,categoryId:A.Bathroom},{amenityId:133,categoryId:A.KitchenDining},{amenityId:134,categoryId:A.BedroomLaundry},{amenityId:135,categoryId:A.KitchenDining},{amenityId:136,categoryId:A.KitchenDining},{amenityId:137,categoryId:A.BedroomLaundry},{amenityId:138,categoryId:A.ParkingAccess},{amenityId:139,categoryId:A.ParkingAccess},{amenityId:140,categoryId:A.BedroomLaundry},{amenityId:141,categoryId:A.Outdoor},{amenityId:142,categoryId:A.Outdoor},{amenityId:143,categoryId:A.Outdoor},{amenityId:144,categoryId:A.Other},{amenityId:145,categoryId:A.Other},{amenityId:146,categoryId:A.WellnessFitness},{amenityId:147,categoryId:A.Entertainment},{amenityId:148,categoryId:A.Entertainment},{amenityId:149,categoryId:A.Outdoor},{amenityId:150,categoryId:A.ParkingAccess},{amenityId:151,categoryId:A.Outdoor},{amenityId:152,categoryId:A.Bathroom},{amenityId:153,categoryId:A.ParkingAccess},{amenityId:154,categoryId:A.KitchenDining},{amenityId:155,categoryId:A.KitchenDining},{amenityId:156,categoryId:A.KitchenDining},{amenityId:158,categoryId:A.BedroomLaundry},{amenityId:159,categoryId:A.NiceToHaves},{amenityId:160,categoryId:A.NiceToHaves},{amenityId:161,categoryId:A.Outdoor},{amenityId:162,categoryId:A.Outdoor},{amenityId:163,categoryId:A.Outdoor},{amenityId:164,categoryId:A.Outdoor},{amenityId:165,categoryId:A.Outdoor},{amenityId:166,categoryId:A.Pets},{amenityId:167,categoryId:A.Pets},{amenityId:168,categoryId:A.Entertainment},{amenityId:169,categoryId:A.Entertainment},{amenityId:170,categoryId:A.Entertainment},{amenityId:171,categoryId:A.Entertainment},{amenityId:172,categoryId:A.Entertainment},{amenityId:173,categoryId:A.Outdoor},{amenityId:174,categoryId:A.InternetOffice},{amenityId:175,categoryId:A.ParkingAccess},{amenityId:176,categoryId:A.Entertainment},{amenityId:177,categoryId:A.Entertainment},{amenityId:178,categoryId:A.NiceToHaves},{amenityId:179,categoryId:A.KitchenDining},{amenityId:180,categoryId:A.Entertainment},{amenityId:181,categoryId:A.Other},{amenityId:182,categoryId:A.Other},{amenityId:183,categoryId:A.ParkingAccess},{amenityId:184,categoryId:A.ParkingAccess},{amenityId:185,categoryId:A.ParkingAccess},{amenityId:186,categoryId:A.Entertainment},{amenityId:187,categoryId:A.Other},{amenityId:188,categoryId:A.Entertainment},{amenityId:189,categoryId:A.ParkingAccess},{amenityId:190,categoryId:A.Entertainment},{amenityId:191,categoryId:A.Outdoor},{amenityId:192,categoryId:A.Outdoor},{amenityId:193,categoryId:A.HeatingCooling},{amenityId:194,categoryId:A.Bathroom},{amenityId:195,categoryId:A.KitchenDining},{amenityId:196,categoryId:A.ParkingAccess},{amenityId:197,categoryId:A.BedroomLaundry},{amenityId:198,categoryId:A.Other},{amenityId:199,categoryId:A.BedroomLaundry},{amenityId:200,categoryId:A.BedroomLaundry},{amenityId:201,categoryId:A.BedroomLaundry},{amenityId:202,categoryId:A.BedroomLaundry}],eK=function(e){var n=eH.find(function(n){return n.amenityId===e.amenityId}),t=n?n.categoryId:S.Other,i=eU[t];return(0,ee._)((0,q._)({},e),{categoryId:t,categoryName:i})},eW=[S.WellnessFitness,S.Outdoor,S.Entertainment,S.ParkingAccess,S.KitchenDining,S.InternetOffice,S.BedroomLaundry,S.Bathroom,S.Pets,S.NiceToHaves,S.Other],eZ=function(){var e=(0,J.bp)(),n=eM(),t=n.hasParkingAvailable,i=n.hasCharacteristics,r=(0,e$.$G)().t,s=(e.listing.responseData.amenities||[]).map(function(e){return eK(e)});return{groupedAmenities:(0,Q.useMemo)(function(){var e=(0,eL.Z)(s,function(e){return e.categoryId}),n=1===Object.keys(e).length&&!!e[S.Other],a={amenityId:-1,name:r("listingpage:amenities:noCarParkSpace"),orderBy:0},o=Object.entries(e).map(function(e){var n=(0,en._)(e,2),t=(n[0],n[1]);return{categoryId:t[0].categoryId,categoryName:t[0].categoryName,items:t}});if(!t&&!i(eT)){var l=o.find(function(e){return e.categoryId===S.ParkingAccess});l?l.items.push(a):n&&!l?o[0].items.push(a):o.push({categoryId:S.ParkingAccess,categoryName:eU[S.ParkingAccess],items:[a]})}return o.sort(function(e,n){return eW.indexOf(e.categoryId)-eW.indexOf(n.categoryId)})},[s,t])}},eV=function(e){var n=e.filter(function(e){return eA.includes(e.amenityId)}).sort(function(e,n){return e.amenityId-n.amenityId}).map(function(e){return e.name.replace(/pool/i,"").trim()}),t={amenityId:56,name:"".concat(n.join(" ")," Pool"),categoryId:S.WellnessFitness,categoryName:"Wellness & Fitness",orderBy:0},i=e.filter(function(e){return!eA.includes(e.amenityId)});return(i=i.filter(function(e){return e.amenityId!==P.Swimming})).concat(t)},eY=function(e){return e.slice(0).sort(function(e,n){return-1===eQ.indexOf(n.amenityId)?-1:-1===eQ.indexOf(e.amenityId)?1:eQ.indexOf(e.amenityId)-eQ.indexOf(n.amenityId)})},eX=function(e,n){return e.filter(function(e){return e.amenityId===n}).length?e:e.concat(eO[n])},eQ=[68,69,65,3,161,162,163,164,112,67,113,88,106,55,146,107,102,28,103,1,46,38,61,96,97,98,99,92,93,94,95,91,90,89,114,50,115,199,200,51,201,202,56,82,83,84,85,86,142,57,24,110,111,108,109,62,58,100,87,143,141,54,2,180,186,40,78,80,34,71,72,198,73,129,64,74,35,23,76,75,101,81,77,79,193,189,150,48,52,53,116,117,118,133,138,169,172,183,184,196,4,5,6,7,10,11,12,13,14,16,17,18,19,20,21,22,25,26,27,29,30,31,36,37,39,41,42,43,44,45,47,49,59,60,63,66,104,105,119,120,121,122,123,124,125,126,127,128,130,131,132,134,135,136,137,139,140,144,145,147,148,149,151,152,153,154,155,156,157,158,159,160,70,165,166,167,168,170,171,173,174,175,176,177,178,179,181,182,185,187,188,190,191,192,194,195,197],eJ=function(e){var n,t;return{filteredAmenities:(n=eM().hasCharacteristics,t=e.items,e.categoryId===S.WellnessFitness&&n(eA)&&(t=eV(t)),e.categoryId===S.ParkingAccess&&n(eT)&&(t=t.filter(function(e){return e.amenityId!==N.Available})),e.categoryId===S.BedroomLaundry&&(n(eE)&&(t=t.filter(function(e){return e.amenityId!==D.WashingMachine})),n(ez)&&(t=t.filter(function(e){return e.amenityId!==$.Dryer}))),e.categoryId===S.Entertainment&&(n(eF)&&(t=t.filter(function(e){return e.amenityId!==L.GamesConsole})),n(eB)&&(t=t.filter(function(e){return e.amenityId!==O.StreamingServices})),n(eG)&&(t=t.filter(function(e){return e.amenityId!==T.TV}))),eY(t))}},eq=t(16752),e0=t(48977),e1=t(19725),e2=t(76595),e4=t(47910),e3=t(92076),e6=t(76871),e8=t(55333),e5=t(86066),e9=t(3e3),e7=t(50257),ne=(z={},(0,eR._)(z,S.Entertainment,eq.c),(0,eR._)(z,S.Bathroom,e0.v),(0,eR._)(z,S.KitchenDining,e1.U),(0,eR._)(z,S.BedroomLaundry,e2.E),(0,eR._)(z,S.WellnessFitness,e4.K),(0,eR._)(z,S.InternetOffice,e3.Z),(0,eR._)(z,S.HeatingCooling,e6.r),(0,eR._)(z,S.ParkingAccess,e8.i),(0,eR._)(z,S.Outdoor,e5.l),(0,eR._)(z,S.NiceToHaves,e9.P),(0,eR._)(z,S.Pets,e7.A),(0,eR._)(z,S.Other,null),z),nn=function(e){var n=ne[e.groupId];return n?(0,X.jsx)(n,{scribble:!0}):null},nt=function(e){var n=eJ(e.group).filteredAmenities;return(0,X.jsx)(ek.K,{as:"ul",space:16,dividers:!0,children:n.map(function(e){return(0,X.jsx)(eS.C,{scale:7,color:"neutrals-9",children:(0,ex.Ks)(e.name)},e.name)})})},ni=function(e){var n=e.amenityGroup;return(0,X.jsxs)(eP.x,{css:{borderBottom:"1px solid $neutrals-4"},children:[n.categoryId!==S.Other&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eP.x,{css:{width:"$80",height:"$80"},children:(0,X.jsx)(nn,{groupId:n.categoryId})}),(0,X.jsx)(eN.L,{size:8})]}),(0,X.jsx)(eD.D,{scale:6,children:n.categoryName}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(nt,{group:n}),(0,X.jsx)(eN.L,{size:16})]})},nr=function(e){var n=eZ().groupedAmenities,t=(0,e$.$G)().t;return(0,X.jsx)(e_.u,(0,ee._)((0,q._)({size:"lg",gap:{"@initial":0,"@md":32}},e),{fullscreen:{"@max-sm":"true"},children:(0,X.jsxs)(eP.x,{children:[(0,X.jsx)(eD.D,{scale:4,color:"neutrals-9",children:t("listingpage:amenities.modalTitle")}),(0,X.jsx)(eN.L,{size:32}),(0,X.jsx)(ek.K,{space:56,children:n.map(function(e){return(0,X.jsx)(ni,{amenityGroup:e},e.categoryId)})})]})}))},ns=t(28721),na=t(22659),no=t(53690),nl=function(e){return e.reduce(function(e,n){return e.concat(Array.isArray(n)?nl(n):n)},[])},nc={arrSortDesc:function(e,n){return e.sort(function(e,t){return e[n]-t[n]})},arrFlatten:nl,arrFilterUnique:function(e){return e.filter(function(e,n,t){return t.indexOf(e)===n})},arrCountFrequency:function(e,n){return e.reduce(function(e,t){return e+Number(t===n)},0)},truncate:function(e,n){var t=e.substring(0,n);return n<e.length&&(t=(t=t.replace(/\s$/,"")).replace(/\W\w+$/,"")+"..."),t},dateSort:function(e,n){return new Date(n.Date).getTime()-new Date(e.Date).getTime()},numberToLocaleString:function(e,n){return e?e.toLocaleString(n):""},uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})}},nd=nc.numberToLocaleString,nu=function(e,n,t){var i=(0,en._)((0,Q.useState)(!1),2),r=i[0],s=i[1],a=(0,en._)((0,Q.useState)(void 0),2),o=a[0],l=a[1];return(0,Q.useEffect)(function(){if(234!=e&&235!=e){var i=nd(Math.round(t/10.764),n);s(!0),l(i)}else s(!1),l(nd(t,n))},[e,n]),[r,o]},nm=function(e){var n=e.countryId,t=e.language,i=e.area,r=(0,en._)(nu(n,t,i),2),s=r[0],a=r[1];return i>=30&&(0,X.jsxs)(X.Fragment,{children:[a," sq/",s?"m":"ft"]})},ng=function(e){var n=e.area,t=e.floorsCount,i=e.bedroomCount,r=e.bathroomCount,s=(0,e$.$G)().t,a=(0,es.ts)().user,o=a.countryId,l=a.language;return(0,X.jsxs)(ns.k,{direction:"column","data-testid":"floorplan-overview",children:[(0,X.jsxs)(ns.k,{direction:"column",align:"center",children:[(0,X.jsx)(eS.C,{intent:"cta",uppercase:!0,color:"neutrals-9",children:s("listingpage:floorplan.overview.title")}),(0,X.jsx)(eN.L,{size:24})]}),(0,X.jsxs)(ns.k,{justify:"center",children:[n&&n>=30?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eS.C,{intent:"detail",color:"neutrals-9",dataTestid:"overview__area-measurement",children:(0,X.jsx)(nm,{countryId:o,language:l,area:n})}),(0,X.jsx)(eN.L,{horizontal:!0,size:16})]}):null,(0,X.jsxs)(eS.C,{intent:"detail",color:"neutrals-9",dataTestid:"floorplan-overview-floorcount",children:[t," ",s("listingpage:floorplan.overview.floor",{count:t})]})]}),(0,X.jsxs)(ns.k,{children:[(0,X.jsx)(eS.C,{intent:"detail",color:"neutrals-9",dataTestid:"floorplan-overview-bedroomcount",children:i?"".concat(i," ").concat(s("common:home.bedroom",{count:i})):s("common:home.studio")}),(0,X.jsx)(eN.L,{horizontal:!0,size:16}),(0,X.jsxs)(eS.C,{intent:"detail",color:"neutrals-9",dataTestid:"floorplan-overview-bathroomcount",children:[r," ",s("common:home.bathroom",{count:r})]})]})]})},nh=t(46231),np=t(8906),nx=t(93608),nf=t(10784),ny=t(80740),nb=t(30787),nv=t(19179),nj=t(56805),nI=t(28059);(m=F||(F={})).SmallSingle="SmallSingle",m.Single="Single",m.Bunkbed="Bunkbed",m.SmallDouble="SmallDouble",m.Double="Double",m.USQueenUKKing="USQueenUKKing",m.USKingUKSuperKing="USKingUKSuperKing",m.PullOutSingle="PullOutSingle",m.PullOutDouble="PullOutDouble",m.SofaBedSingle="SofaBedSingle",m.SofaBedDouble="SofaBedDouble",m.FutonSingle="FutonSingle",m.FutonDouble="FutonDouble",m.Cot="Cot",(g=B||(B={}))[g.Bath=1]="Bath",g[g.Shower=2]="Shower",g[g.WC=3]="WC",(h=G||(G={}))[h.ShowerOverBath=1]="ShowerOverBath",h[h.StandAloneShower=2]="StandAloneShower",h[h.Wetroom=3]="Wetroom",h[h.Other=4]="Other";var nC=(0,Q.memo)(function(e){var n=e.bedSize,t={block:!0,fixedSize:!0};switch(n){case F.SmallSingle:case F.Single:return(0,X.jsx)(ny.U,(0,ee._)((0,q._)({},t),{"data-testid":"bed-size-icon-single"}));case F.Bunkbed:return(0,X.jsx)(nb.L,(0,ee._)((0,q._)({},t),{"data-testid":"bed-size-icon-bunked"}));case F.PullOutSingle:case F.PullOutDouble:case F.Cot:return(0,X.jsx)(nv.w,(0,ee._)((0,q._)({},t),{"data-testid":"bed-size-icon-pullout"}));case F.SofaBedSingle:case F.SofaBedDouble:case F.FutonSingle:case F.FutonDouble:return(0,X.jsx)(nj.m,(0,ee._)((0,q._)({},t),{"data-testid":"bed-size-icon-sofa"}));default:return(0,X.jsx)(nI.r,(0,q._)({},t))}});nC.displayName="BedIcon";var nw=function(e){var n=e.icon,t=e.description;return(0,X.jsxs)(ns.k,{children:[(0,X.jsx)(eP.x,{css:{width:32,height:24,minWidth:32},children:n}),(0,X.jsx)(eN.L,{horizontal:!0,size:16}),(0,X.jsx)(eS.C,{modern:!0,as:"span",scale:8,color:"neutrals-9",children:t})]})},n_=function(e){var n=e.title,t=e.dataTestid,i=e.children;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eS.C,{intent:"detail",color:"neutrals-9",bold:!0,dataTestid:t,children:n}),(0,X.jsx)(eN.L,{size:4}),i]})},nk=function(e){var n=(0,e$.$G)().t;return(0,ex.kC)(n("common:home.bedType","",{context:e}))},nS=t(26793),nP=function(e){var n=e.bedroom,t=(0,nS.$)().t;return(0,X.jsx)(n_,{title:"Main bedroom"===n.bedroomName?"".concat((0,ex.kC)(t("listingpage:homeSpec.bedroom"))," 1"):n.bedroomName,dataTestid:"floor-bedrooms-description-title",children:n.beds.map(function(e,n){return(0,X.jsx)(nw,{icon:(0,X.jsx)(nC,{bedSize:e.bedSizes}),description:nk(e.bedSizes)},"bedtype-".concat(n))})})},nN=t(41329),nD=t(41350),n$=t(50735),nL=t(35038),nO=function(e){var n=e.type,t=e.className,i=void 0===t?"":t;switch(n){case G.ShowerOverBath:return(0,X.jsx)(n$.b,{className:i,"data-testid":"bath-shower-icon"});case G.StandAloneShower:return(0,X.jsx)(nL.o,{className:i,"data-testid":"shower-icon"});default:return(0,X.jsx)(nL.o,{className:i,"data-testid":"shower-icon-default"})}},nT=function(e){var n=e.feature,t=e.bathroom,i=e.className;return n===B.WC?(0,X.jsx)(nN.t,{"data-testid":"icon-wc",className:i}):n===B.Shower?(0,X.jsx)(nO,{type:t.showerType.id,className:i}):(0,X.jsx)(nD.E,{className:i,"data-testid":"bathroom-icon-bath"})},nA=function(e,n){var t=(0,e$.$G)().t;return e.map(function(e){return e==B.Shower?t("listingpage:floorplan.bathroom.showerTypes.".concat(G[n.showerType.id])):t("listingpage:floorplan.bathroom.".concat(B[e].toLowerCase()))})},nE=function(e){var n=[];if(e.hasBath&&n.push(B.Bath),e.hasShower&&n.push(B.Shower),e.hasWc&&n.push(B.WC),e.showerType&&e.showerType.id===G.ShowerOverBath){var t=n.indexOf(B.Bath);n.splice(t,1)}return n},nz=function(e){var n=nE(e),t=nA(n,e);return{icon:(0,X.jsx)(nT,{feature:n[0],bathroom:e}),featuresTranslated:t}},nF=function(e){return e.some(function(e){return e.hasBath||e.hasShower||e.hasWc})},nB=function(e){var n=nz(e.bathroom),t=n.icon,i=n.featuresTranslated,r=(0,nS.$)().t;return(0,X.jsx)(n_,{title:(0,ex.kC)(r("listingpage:homeSpec.bathroom")),dataTestid:"floor-bathrooms-description-title",children:(0,X.jsx)(nw,{icon:t,description:i.join(", ")})})},nG=function(e){var n=e.name,t=e.imageUrl,i=e.bedrooms,r=void 0===i?[]:i,s=e.bathrooms,a=void 0===s?[]:s,o=e.reverse,l=function(e){return(0,ex.kC)(e.toLowerCase().replace("master","main"))},c=Q.useMemo(function(){return r.map(function(e){return(0,ee._)((0,q._)({},e),{bedroomName:l(e.bedroomName)})})},[r]),d=Q.useMemo(function(){return a.map(function(e){return(0,ee._)((0,q._)({},e),{bathroomName:l(e.bathroomName)})})},[a]),u=nc.arrSortDesc(c,"order"),m=nc.arrSortDesc(d,"order");return(0,X.jsx)(nh.T,{fullBleed:!0,children:(0,X.jsx)(np.J,{dataTestid:"floorplan-floor",children:(0,X.jsx)(nx.$,{size:{"@initial":24,"@md":20},offset:{"@md":2},children:(0,X.jsxs)(np.J,{fullBleed:!0,align:{"@md":"center"},justify:{"@md":"between"},reverse:void 0!==o&&o,children:[(0,X.jsxs)(nx.$,{size:{"@initial":24,"@md":12},children:[(0,X.jsx)(eD.D,{as:"h1",editorial:!0,thin:!0,className:(0,no.g)({textAlign:{"@initial":"center","@md":"left"}}),children:n}),(0,X.jsx)(eN.L,{size:{"@initial":48,"@md":12}}),(0,X.jsxs)(np.J,{css:{flexGrow:1,padding:0,width:"100%"},children:[u.length?(0,X.jsx)(nx.$,{size:12,dataTestid:"floor-description-bedrooms",css:{flexGrow:1,borderRight:"1px solid $neutrals-5","&:last-child":{border:"none"}},children:(0,X.jsx)(ek.K,{space:12,children:u.map(function(e,n){return(0,X.jsx)(nP,{bedroom:e},"bedroom-".concat(n))})})}):null,m.length?(0,X.jsx)(nx.$,{size:12,dataTestid:"floor-description-bathrooms",css:{flexGrow:1,borderRight:"1px solid $neutrals-5","&:last-child":{border:"none"}},children:(0,X.jsx)(ek.K,{space:12,children:m.map(function(e,n){return(0,X.jsx)(nB,{bathroom:e},"bathroom-".concat(n))})})}):null]})]}),(0,X.jsxs)(nx.$,{size:{"@initial":24,"@md":8},center:!0,children:[(0,X.jsx)(eN.L,{size:48}),t?(0,X.jsx)(nf.t,{src:t,alt:n,defaultImageExtraParams:{fit:"fill","max-w":800,trim:"color","trim-color":"FFFFFF"},addDprToSrc:!0}):null]})]})})})})},nM=function(e){var n=void 0;return e<0&&(n="lower"),0===e&&(n="ground"),{floor:Math.abs(e),context:n}},nR=function(e){var n=e.area,t=e.floorsCount,i=e.bedroomCount,r=e.bathroomCount,s=e.floorplan,a=(0,e$.$G)().t;return(0,X.jsx)(eP.x,{css:{backgroundColor:"$system-white",borderRadius:"$4",marginX:"$8",paddingX:"$24",paddingTop:"$40",paddingBottom:"$64"},children:(0,X.jsxs)(ek.K,{space:40,children:[(0,X.jsx)(ns.k,{justify:"center",children:(0,X.jsx)(ng,{area:n,floorsCount:t,bedroomCount:i,bathroomCount:r})}),t>1&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(na.i,{}),(0,X.jsx)(eN.L,{size:40}),(0,X.jsx)(eS.C,{intent:"cta",uppercase:!0,color:"neutrals-9",className:(0,no.g)({textAlign:"center"}),css:{marginX:"$8"},children:a("listingpage:floorplan.floors.title")})]}),(0,X.jsx)(ek.K,{space:40,dividers:!0,children:(void 0===s?[]:s).map(function(e,n){return(0,X.jsx)(eP.x,{children:(0,X.jsx)(nG,{name:a("listingpage:floorplan.floors.floor",nM(e.type.level)),imageUrl:null==e?void 0:e.imageUrl,bedrooms:e.bedrooms,bathrooms:e.bathrooms,reverse:n%2==0})},"floor-".concat(n))})})]})})},nU=function(e){e.listingName;var n=e.area,t=e.floorsCount,i=e.bedroomCount,r=e.bathroomCount,s=e.floorplan,a=e.modalProps;return(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(e_.u,(0,ee._)((0,q._)({},a),{fullscreen:!0,hasGutter:!1,children:(0,X.jsx)(eP.x,{css:{marginTop:"$24",overflowY:"auto"},children:(0,X.jsx)(nR,{area:n,floorsCount:t,bedroomCount:i,bathroomCount:r,floorplan:s})})}))})},nH=t(14370),nK=t(89308),nW=t(91333),nZ=t(24434),nV=t(4327),nY=t(81825),nX=t(9391),nQ=function(e){var n=e.children,t=(e.containerCss,e.open);return(0,X.jsx)(e_.u,{align:"top",gap:0,open:void 0!==t&&t,fullscreen:!0,children:n})};nQ.Header=function(e){e.title;var n=e.headerCss;return(0,X.jsx)(ns.k,{align:"center",css:n,children:(0,X.jsx)(nh.T,{children:(0,X.jsx)(nH.r,{columns:"1fr $40",align:"center",justify:"center",css:{minHeight:"$56","@sm":{minHeight:"$64"}},children:(0,X.jsx)(nX.P,{css:{paddingRight:"$8","@sm":{textAlign:"center",paddingLeft:"$48"},"@lg":{textAlign:"left",paddingLeft:"$0"}}})})})})},nQ.Pager=function(e){var n=e.current,t=e.total;return(0,X.jsx)(ns.k,{align:{"@initial":"center","@md":"end"},justify:"end",children:(0,X.jsxs)(eS.C,{modern:!0,scale:8,color:"system-black",css:{textAlign:"right"},children:[n," / ",t]})})};var nJ=t(20563),nq=t(96095),n0=t(24818);(0,nJ.zo)("div",{height:"100%",position:"relative",gridRowStart:2,gridRowEnd:3,"@md":{gridColumnStart:2,gridColumnEnd:3,gridRowStart:1,gridRowEnd:2}}),(0,nJ.zo)("div",{display:"flex",justifyContent:"flex-end",gridRowStart:3,gridRowEnd:4,paddingRight:"$8","@md":{gridColumnStart:3,gridColumnEnd:4,gridRowStart:1,gridRowEnd:2,paddingRight:"$16",paddingLeft:"$8"}});var n1=(0,nJ.zo)("div",{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"$0",left:"$0",right:"$0",bottom:"$0",pointerEvents:"none",animation:"".concat(nq.s.opacityPulse," ").concat(n0.U.smooth({duration:2500})," infinite"),"@media (prefers-reduced-motion: reduce)":{animation:"none"}});(0,nJ.zo)("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%",alignItems:"center",display:"none","@md":{display:"flex",paddingX:"$24"}});var n2=function(e){var n=e.listingPhotos,t=e.listingName,i=(0,Q.useContext)(et),r=(0,en._)((0,Q.useState)(i.activeSlide),2),s=r[0],a=r[1],o=(0,Q.useMemo)(function(){return nc.arrSortDesc(n,"orderBy").map(function(e,n){return{src:encodeURI(e.fileUrl),alt:"".concat(t," - ").concat(n+1)}})},[n,t]),l=(0,en._)((0,nZ.v)({options:{align:"start",containScroll:"trimSnaps",loop:!0,startIndex:i.activeSlide},events:{select:function(e){return a(e.selectedScrollSnap())},reInit:function(e){return e.scrollTo(s)}},autoFocus:!0}),2),c=l[0],d=l[1];return(0,nV.O)("keydown",function(e){if(d)switch(e.key){case"Left":case"ArrowLeft":case"Right":case"ArrowRight":d.containerNode().focus()}},{capture:!0,passive:!0}),(0,X.jsxs)("div",{className:"relative isolate h-full px-4 xs:px-8 flex gap-8 items-center",children:[(0,X.jsx)("button",{className:"focus-ring max-md:hidden",onClick:function(){return null==d?void 0:d.scrollPrev(!0)},children:(0,X.jsx)(nY.Z,{_size:"lg",_rotate:90})}),(0,X.jsx)(n1,{children:(0,X.jsx)(nK.a,{})}),(0,X.jsx)("div",{ref:c,className:"h-full w-full overflow-x-hidden",children:(0,X.jsx)("div",{className:"w-full h-full flex gap-4 outline-none cursor-grab",children:null==o?void 0:o.map(function(e){return(0,X.jsx)("div",{className:"flex-none w-full flex items-center justify-center",children:(0,X.jsx)(nW.t,{src:e.src,alt:e.alt,width:1920,layout:"original",cdn:"imgix",sizes:"100vw",objectFit:"contain",breakpoints:[360,720,1080,1440]})},e.src)})})}),(0,X.jsx)("button",{className:"focus-ring max-md:hidden",onClick:function(){return null==d?void 0:d.scrollNext(!0)},children:(0,X.jsx)(nY.Z,{_size:"lg",_rotate:270})}),(0,X.jsx)("div",{className:"absolute z-10 right-8 bottom-4",children:(0,X.jsx)(nQ.Pager,{current:s+1,total:n.length})})]})},n4=function(e){var n=e.modalProps,t=e.listingName,i=e.listingPhotos;return(0,X.jsx)(e_.u,(0,ee._)((0,q._)({},n),{fullscreen:!0,contentCss:{paddingX:0},children:(0,X.jsx)(n2,{listingPhotos:void 0===i?[]:i,listingName:t})}))},n3=t(88232),n6=(0,nJ.iv)({animation:"".concat(nq.s.fadeIn()," 400ms ease-out 200ms both")}),n8=(0,nJ.zo)("li",{position:"relative","@md":{display:"inline-block"},"&::after":{"@md":{content:"â€¢",marginX:"$8"}},"&:last-child":{"&::after":{display:"none"}}});(0,nJ.zo)("div",{position:"absolute",top:0,left:0,width:"100%",height:"100%"});var n5=(0,nJ.iv)({reset:!0,display:"block",height:"100%",width:"100%",borderRadius:"$2",overflow:"hidden",transition:"150ms",aspectRatio:"3/2",hover:{filter:"opacity(.8)",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.2)"},keyboardFocus:{outline:"2px solid $system-black"}}),n9=function(e){var n=e.photo,t=e.index,i=(0,Q.useContext)(ei).setActive,r=(0,eI.m)().open,s=t%6,a=2!==s&&5!==s,o=s<3,l=s>3;return(0,X.jsx)("div",{className:(0,n3.M6)(a?"col-span-1":"col-span-2",o?"sm:col-span-2":l?"sm:col-span-3":"sm:col-span-6"),children:(0,X.jsx)("button",{className:n5(),type:"button",onClick:function(){i(t),r("gallery")},children:(0,X.jsx)(nW.t,{src:n.fileUrl,alt:"",cdn:"imgix",layout:"original",width:960,sizes:["(min-width: 1024px) ".concat(o?"320px":l?"480px":"960px"),"(min-width: 768px) ".concat(a?"50vw":"100vw"),"calc(".concat(a?"50vw":"100vw"," - 24px)")].join(", ")})})},n.fileUrl)},n7=t(11091),te=t(16940),tn=function(e){var n=e.children,t=e.icon;return(0,X.jsxs)("div",{className:"flex",children:[t,(0,X.jsx)("div",{className:"w-4"}),n]})},tt=function(){var e=(0,J.bp)().listing.responseData.floorplan,n=(0,Q.useMemo)(function(){return e.floors.flatMap(function(e){return e.bedrooms}).sort(function(e,n){return e.order-n.order})},[e]),t=(0,Q.useMemo)(function(){return e.floors.flatMap(function(e){return e.bathrooms}).sort(function(e,n){return e.order-n.order})},[e]),i=(0,Q.useMemo)(function(){return e.additionalBeds||[]},[e]),r=(0,Q.useMemo)(function(){var e=n.flatMap(function(e){return e.beds}),t=e.filter(function(e){return"Bunkbed"===e.bedSizes});return e.length+t.length},[n]),s=(0,Q.useMemo)(function(){return t.filter(function(e){return!e.hasBath&&!e.hasShower&&e.hasWc}).length},[t]),a=(0,Q.useMemo)(function(){return t.length-s},[t,s]);return{bedCount:r,bedroomCount:n.length,bathroomCount:a,wcOnlyCount:s,additionalBeds:i,bedrooms:n,bathrooms:t}},ti=function(e){var n,t,i=e.bedroomCount,r=e.bedCount,s=e.compact,a=(0,e$.$G)().t;if(0===i)n=a("common:home.studio");else{var o=a("common:home.bed",{context:r>1?"plural":null}),l=a("common:home.bedroom",{context:i>1?"plural":null});n="".concat(i," ").concat(l).toLowerCase(),t=", ".concat(r," ").concat(o).toLowerCase()}return(0,X.jsxs)(X.Fragment,{children:[n,(0,X.jsx)(n7._,{as:"span",css:{display:void 0!==s&&s?"none":"inline","@sm":{display:"inline"}},children:r?t:""})]})},tr=function(){var e=(0,e$.$G)().t,n=tt(),t=n.bedCount,i=n.bedroomCount,r=n.bathroomCount,s=n.wcOnlyCount,a=n.bathrooms,o=(0,eI.m)().open,l=e("common:home.bathroom",{count:a.length}),c=e("common:home.separateToilet",{count:s});return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eD.D,{as:"h3",modern:!0,scale:6,color:"neutrals-9",children:e("listingpage:sleepingArrangements")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsxs)(ek.K,{as:"ul",space:16,children:[(0,X.jsx)(tn,{icon:(0,X.jsx)(nI.r,{}),children:(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",scale:{"@initial":8,"@sm":7},children:(0,X.jsx)(ti,{bedCount:t,bedroomCount:i})})}),(0,X.jsx)(tn,{icon:(0,X.jsx)(nL.o,{width:24,height:24}),children:s?(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",scale:{"@initial":8,"@sm":7},children:"".concat(r," ").concat(l,", ").concat(s," ").concat(c).toLowerCase()}):(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",scale:{"@initial":8,"@sm":7},children:"".concat(r," ").concat(l).toLowerCase()})})]}),(0,X.jsx)(eN.L,{size:24}),i||nF(a)?(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(te.z,{action:"secondary",type:"button",onClick:function(){return o("bedsBathrooms")},full:{"@initial":"true","@sm":"false"},children:e("listingpage:allTheDetails.bedrooms.cta")})}):null]})},ts=t(65128),ta=t(43313),to=t(93186),tl=function(){var e,n,t=(0,nS.$)().t,i=(0,J.bp)(),r=(0,en._)((0,em.Qo)(),1)[0],s=(0,eI.m)().open;return(0,X.jsxs)("div",{children:[(0,X.jsx)(ta.x,{as:"h2",_scale:"h-6",_bold:!0,className:"pb-4",children:"Cancellation policy"}),(0,X.jsx)(to.u,{cancellationDetails:(null===(e=r.data)||void 0===e?void 0:e.cancellationDetails)||i.listing.responseData.cancellationDetails,isAvailable:!!(null===(n=r.data)||void 0===n?void 0:n.isAvailable),fromDate:r.form.date.from,toDate:r.form.date.to,children:(0,X.jsx)(eS.C,{modern:!0,scale:7,color:"neutrals-9",children:(0,X.jsx)(ts.r,{as:"button",type:"button",intent:"detail",underline:!0,onClick:function(e){e.preventDefault(),s("cancellation")},children:t("common:cancellation.viewFullTerms")})})})]})},tc=t(21102),td=function(){var e=(0,J.bp)(),n=(0,e$.$G)().t,t=e.listing.responseData.basicInfo,i=t&&parseInt(t.checkInTime,10),r=t&&parseInt(t.checkOutTime,10);return(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{className:"grid grid-cols-[24px_1fr] ".concat(i?"":"grid-rows-2"," items-center gap-x-4"),children:[(0,X.jsx)("div",{className:"h-6 w-6 mr-4",children:(0,X.jsx)(tc.Z,{})}),(0,X.jsx)("div",{children:i?(0,X.jsx)(eS.C,{modern:!0,scale:7,color:"system-grey-dark",children:(0,X.jsx)(e$.cC,{i18nKey:"listingpage:allTheDetails.needToKnow.checkIn",tOptions:{time:t.checkInTime},components:[(0,X.jsx)("strong",{},"checkInTime")]})}):(0,X.jsx)(eS.C,{modern:!0,scale:7,color:"system-grey-dark",children:(0,X.jsx)(e$.cC,{i18nKey:"listingpage:allTheDetails.needToKnow.checkInFlexible",components:[(0,X.jsx)("strong",{},"strong")]})})}),i?null:(0,X.jsx)(ta.x,{className:"text-gray-700 col-start-2",children:n("listingpage:allTheDetails.needToKnow.arrangeWithHost")})]}),(0,X.jsx)("div",{className:"h-4"}),(0,X.jsxs)("div",{className:"grid grid-cols-[24px_1fr] ".concat(i?"":"grid-rows-2"," items-center gap-x-4"),children:[(0,X.jsx)("div",{className:"h-6 w-6 mr-4",children:(0,X.jsx)(tc.Z,{})}),(0,X.jsx)("div",{children:r?(0,X.jsx)(eS.C,{modern:!0,scale:7,color:"system-grey-dark",children:(0,X.jsx)(e$.cC,{i18nKey:"listingpage:allTheDetails.needToKnow.checkOut",tOptions:{time:t.checkOutTime},components:[(0,X.jsx)("strong",{},"strong")]})}):(0,X.jsx)(eS.C,{modern:!0,scale:7,color:"system-grey-dark",children:(0,X.jsx)(e$.cC,{i18nKey:"listingpage:allTheDetails.needToKnow.checkOutFlexible",components:[(0,X.jsx)("strong",{},"strong")]})})}),r?null:(0,X.jsx)(ta.x,{className:"text-gray-700 col-start-2",children:n("listingpage:allTheDetails.needToKnow.arrangeWithHost")})]})]})},tu=(0,nJ.zo)(eP.x,{maxWidth:720}),tm=function(e){var n=e.children,t=e.css;return(0,X.jsx)(tu,{css:t,children:n})},tg=function(){var e=(0,J.bp)().listing.responseData.highLows.listingLows;return{truths:(0,Q.useMemo)(function(){return(0,ex.ik)(e)},[e])}},th=t(9862),tp=t(16725),tx=["suitableForChildren","suitableForInfants","petsAllowed","eventsAllowed","smokingAllowed"],tf=function(e){var n=e.allowed,t=e.children;return(0,X.jsxs)("div",{className:"flex items-center flex-nowrap",children:[void 0!==n&&n?(0,X.jsx)(th.Z,{className:"mr-4 shrink-0"}):(0,X.jsx)(tp.Z,{_size:"sm",className:"mr-4 shrink-0"}),(0,X.jsx)(ta.x,{_scale:"b-medium",children:t})]})},ty=function(){var e=(0,J.bp)(),n=(0,e$.$G)().t,t=e.listing.responseData.houseRules,i=eM().hasPetsAllowed,r=(0,ee._)((0,q._)({},t),{petsAllowed:i}),s=tx.sort(function(e,n){return Number(r[n])-Number(r[e])});return(0,X.jsxs)("div",{children:[(0,X.jsx)(ta.x,{as:"h2",_scale:"h-6",_bold:!0,className:"pb-4",children:n("listingpage:houseRules.title")}),(0,X.jsx)("div",{className:"grid gap-y-4",children:s.map(function(e){return(0,X.jsx)(tf,{allowed:r[e],children:(0,X.jsx)(e$.cC,{i18nKey:"listingpage:houseRules.".concat(e),tOptions:{context:r[e]?"":"not"},components:[(0,X.jsx)("strong",{},"houseRule")]})},"rule-".concat(e))})})]})},tb=t(1067),tv=t(95297),tj=t(71716),tI=function(){var e=(0,J.bp)(),n=(0,e$.$G)().t,t=eM(),i=t.hasAircon,r=t.hasLiftAccess,s=t.hasWifi,a=e.listing.responseData.basicInfo,o="relative before:content-[''] before:w-full before:absolute before:right-0 before:top-[55%] before:border before:border-gray-500 text-gray-700",l=[(0,X.jsx)(tn,{icon:(0,X.jsx)(tb.Z,{}),children:(0,X.jsx)(ta.x,{className:s?"text-gray-900":o,_scale:"b-medium",children:s?n("listingpage:allTheDetails.wifi.label",{context:(null==a?void 0:a.wifiSpeed)?"speed":null,speed:a.wifiSpeed}):n("listingpage:allTheDetails.wifi.label_none")})},"wifi-amenity"),(0,X.jsx)(tn,{icon:(0,X.jsx)(tv.Z,{}),children:(0,X.jsx)(ta.x,{className:i?"text-gray-900":o,_scale:"b-medium",children:n("listingpage:allTheDetails.aircon",{context:i?null:"unavailable"})})},"aircon-amenity")];return(0,X.jsxs)("div",{children:[(0,X.jsx)(ta.x,{as:"h2",_scale:"h-6",_bold:!0,className:"pb-4",children:n("listingpage:allTheDetails.goodToKnow.title")}),(0,X.jsxs)("div",{className:"grid gap-y-4",children:[(0,X.jsx)(td,{}),a.whatFloor?(0,X.jsx)(tn,{icon:(0,X.jsx)(tj.Z,{}),children:(0,X.jsx)(ta.x,{className:"text-gray-900",_scale:"b-medium",children:n("listingpage:allTheDetails.goodToKnow.floor",{context:r?"lift":a.whatFloor?"steps":null,count:a.whatFloor})})}):null,!a.whatFloor&&r?(0,X.jsx)(tn,{icon:(0,X.jsx)(tj.Z,{}),children:(0,X.jsx)(ta.x,{className:"text-gray-900",_scale:"b-medium",children:(0,ex.kC)(n("listingpage:allTheDetails.needToKnow.hasLift"))})}):null,s&&!i?(0,X.jsxs)(X.Fragment,{children:[l[0]," ",l[1]]}):(0,X.jsxs)(X.Fragment,{children:[l[1]," ",l[0]]})]})]})},tC=function(){return(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12",children:[(0,X.jsx)(ty,{}),(0,X.jsx)(tI,{}),(0,X.jsx)(tl,{})]})},tw=t(79763),t_=t(1346),tk=t(81278),tS=function(){var e=(0,J.bp)();return{services:(0,Q.useMemo)(function(){return e.listing.responseData.services.sort(function(e,n){return e.name.localeCompare(n.name)})},[e.listing.responseData.services])}},tP=function(){var e=(0,e$.$G)().t,n=tS().services,t=(0,en._)(Q.useState(!1),2),i=t[0],r=t[1],s=(0,tw.G)([t_.w.md],[!0],!1),a=(0,en._)(Q.useState(n),2),o=a[0],l=a[1];return(0,Q.useEffect)(function(){l(i||s?n:n.slice(0,6))},[i,s,n]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eD.D,{as:"h3",modern:!0,scale:6,color:"neutrals-9",children:e("listingpage:vipServices.title")}),(0,X.jsx)(eN.L,{size:8}),(0,X.jsx)(eS.C,{modern:!0,scale:8,children:e("listingpage:vipServices.subTitle")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(nH.r,{columns:{"@initial":1,"@sm":n.length>4?2:1},rowGap:16,columnGap:64,children:o.map(function(e){return(0,X.jsx)(tn,{icon:(0,X.jsx)(tk.N,{}),children:(0,X.jsx)(eS.C,{modern:!0,scale:{"@initial":8,"@sm":7},color:"system-grey-dark",children:(0,ex.Ks)(e.name)})},e.name)})}),(0,X.jsx)(n7._,{above:"md",children:n.length>6&&(0,X.jsx)(ts.r,{as:"button",underline:!0,onClick:function(){return r(!i)},css:{paddingTop:"$16"},children:(0,X.jsx)(eS.C,{as:"span",scale:7,color:"system-inherit",modern:!0,children:e(i?"listingpage:viewLess":"listingpage:viewMore")})})})]})};t(62286);var tN=t(34078),tD=t.n(tN),t$=t(17563),tL=(p=(0,ef._)(function(e){var n,t,i,r;return(0,ey.Jh)(this,function(s){switch(s.label){case 0:n=e.mockPriority,s.label=1;case 1:return s.trys.push([1,5,,6]),t=tD()(ew.v.API_BASE_URI,"leads","config",n?"?".concat(t$.stringify({mockPriority:n})):""),[4,fetch(t)];case 2:if(!(i=s.sent()).ok)return[3,4];return[4,i.json()];case 3:return[2,s.sent()];case 4:return[3,6];case 5:return r=s.sent(),console.log("Leads: Error fetching dynamic leads"),console.error(r),[2,{priceThreshold:null,priority:null}];case 6:return[2]}})}),function(e){return p.apply(this,arguments)});(x=M||(M={}))[x.First=1]="First",x[x.Second=2]="Second",x[x.Third=3]="Third",x[x.Fourth=4]="Fourth";var tO={isFetching:!0,priceThreshold:null,priority:null},tT=Q.createContext(null);function tA(e){var n=e.children,t=(0,en._)(Q.useState(tO),2),i=t[0],r=t[1];return Q.useEffect(function(){var e=new URLSearchParams(document.location.search).get("priority"),n={};e&&(n.mockPriority=e),tL(n).then(function(e){return r((0,ee._)((0,q._)({},e),{isFetching:!1}))})},[]),(0,X.jsx)(tT.Provider,{value:i,children:n})}tT.displayName="LeadsContext";var tE=t(18791),tz=t(3052);(f=R||(R={}))[f.Individual=1]="Individual",f[f.Business=2]="Business";var tF=t(4852),tB=t(54005),tG=t(87787),tM=function(){var e=(0,J.bp)().listing.responseData.basicInfo.additionalFees;return{fees:(0,Q.useMemo)(function(){return e?(0,ex.ik)(e):null},[e])}},tR=function(){var e=(0,e$.$G)().t,n=(0,en._)(Q.useState(!1),2),t=n[0],i=n[1],r=tM().fees,s=r&&(t?r:r.slice(0,3));return(0,X.jsxs)(tm,{children:[(0,X.jsx)(eD.D,{as:"h3",modern:!0,scale:6,color:"neutrals-9",children:e("listingpage:allTheDetails.optionalFees.title")}),(0,X.jsx)(eN.L,{size:8}),(0,X.jsx)(eS.C,{modern:!0,scale:8,children:e("listingpage:allTheDetails.optionalFees.subtitle")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(tF.a,{type:"square",space:8,children:null==s?void 0:s.map(function(e,n){return(0,X.jsx)(eS.C,{modern:!0,color:"system-black",scale:{"@initial":8,"@sm":7},children:e},"fee-".concat(n))})}),(null==r?void 0:r.length)>3&&(0,X.jsx)(ts.r,{as:"button",underline:!0,onClick:function(){return i(!t)},css:{paddingTop:"$16"},children:(0,X.jsx)(eS.C,{as:"span",scale:7,color:"system-inherit",modern:!0,children:t?e("listingpage:allTheDetails.optionalFees.viewLess"):e("listingpage:allTheDetails.optionalFees.viewMore",{count:(null==r?void 0:r.length)-3})})}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(tB.b,{noWrap:!0,color:"blue",css:{padding:"$8"},icon:(0,X.jsx)(tG.U,{}),children:(0,X.jsx)(eS.C,{scale:8,color:"brand-blue-darker",children:e("listingpage:allTheDetails.optionalFees.handlingCharge",{charge:"3.5%"})})})]})};function tU(){var e=(0,e$.$G)().t,n=(0,es.ts)().user,t=n.countryId,i=n.language,r=(0,J.bp)().listing.responseData,s=r.basicInfo,a=r.photos,o=r.overview,l=(0,en._)((0,eI.d)("gallery"),1)[0],c=tt(),d=c.bedroomCount,u=c.bathroomCount,m=c.wcOnlyCount,g=e("common:home.bedroom",{count:d}).toLowerCase(),h=e("common:home.studio").toLowerCase(),p=e("common:home.bathroom",{count:u}).toLowerCase(),x=e("common:home.separateToilet",{count:m}).toLowerCase();return(0,X.jsxs)("div",{className:"max-w-5xl mx-auto px-4 xs:px-8 py-10",children:[(0,X.jsxs)("div",{className:(0,no.g)({textAlign:"center"}),children:[(0,X.jsx)(eD.D,{as:"h2",scale:4,editorial:!0,children:s.name}),(0,X.jsx)(eN.L,{size:{"@initial":8,"@sm":16}}),(0,X.jsxs)(eS.C,{as:"ul",color:"neutrals-9",scale:8,modern:!0,children:[(0,X.jsx)(n8,{children:e("listingpage:homeSpec.sleepsGuests",{guestCount:s.guestCount})}),(0,X.jsxs)(n8,{children:[d?"".concat(d," ").concat(g):h,u?", ".concat(u," ").concat(p):null,m?", ".concat(m," ").concat(x):null]}),(null==o?void 0:o.totalArea)>0?(0,X.jsx)(n8,{children:(0,X.jsx)(nm,{countryId:t,language:i,area:o.totalArea})}):null]})]}),(0,X.jsx)(eN.L,{size:40}),(0,X.jsx)(nH.r,{className:n6(),gap:{"@initial":8,"@sm":16},columns:{"@initial":2,"@sm":6},children:a.map(function(e,n){return(0,X.jsx)(n9,{photo:e,index:n},e.fileUrl)})}),(0,X.jsx)(n4,{modalProps:(0,q._)({},l),listingName:s.name,listingPhotos:a})]})}function tH(e){var n=(0,eb.useRouter)(),t=(0,en._)((0,Q.useState)("0px"),2),i=t[0],r=t[1];(0,Q.useEffect)(function(){n.push({pathname:n.pathname,query:n.query,hash:e.open?"gallery":""},void 0,{shallow:!0})},[e.open]);var s=(0,Q.useCallback)(function(e){var n;"50px"===(null===(n=e[0])||void 0===n?void 0:n.target.style.marginTop)?r("50px"):r("0px")},[i]);return(0,Q.useEffect)(function(){var e=new MutationObserver(s);return e.observe(document.body,{subtree:!1,childList:!1,attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),function(){e&&e.disconnect()}},[i,r]),(0,X.jsx)(e_.u,(0,ee._)((0,q._)({},e),{closeButton:{css:{position:"absolute","@md":{position:"fixed"}}},panelCss:{marginTop:i},fullscreen:!0,hasGutter:!1,children:(0,X.jsx)(tU,{})}))}var tK=t(63575),tW=t(90641),tZ=t(3219),tV=t(63144),tY=t.n(tV),tX=function(e){var n=e.baseUrl,t=e.callbackEndpointUrl,i=e.formValues,r=e.propertyInfo,s=e.successCallback,a=e.statusCallback,o=e.errorCallback,l=e.errorMessage;a("loading"),tY()(tD()(n,t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listingId:r.propertyId,checkInContact:i.checkInDate,checkOutContact:i.checkOutDate,message:i.message,guests:i.guests,hostFirstName:r.hostName,listingName:r.propertyName,phoneNumber:i.phoneNumber,countryDialingCodeId:parseInt(i.countryDiallingCodeId)})}).then(function(e){return e.json()}).catch(function(e){throw console.error(e),Error(l)}).then(function(e){if(e.Ok)a("success"),s&&s(e);else throw Error(l)}).catch(function(e){console.error(e),a("error"),o(e.message)})},tQ=t(54132),tJ=t(27076),tq=t(27199),t0=t(11214),t1=t(29221),t2=t(41780),t4=t(79673),t3=t(32964),t6=function(e){var n=e.isGuests,t=e.children,i=e.onClick,r=e.isLoading,s=e.error;return(0,X.jsxs)(te.z,{action:"secondary",rounded:!0,type:"button",full:!0,onClick:i,copyProps:{as:"div",css:{display:"flex",width:"100%",justifyContent:"center",gap:"$4"}},css:{padding:0,borderColor:s?"$brand-orange-dark":"$neutrals-4b",hover:{borderColor:s?"$brand-orange-darker":"$neutrals-6"},active:{backgroundColor:"$system-white"}},loading:r,children:[(0,X.jsxs)(t1.b,{children:[(0,X.jsx)(t2.m,{variant:2}),n?(0,X.jsx)(t3.P,{}):(0,X.jsx)(t4.j,{})]}),(0,X.jsxs)(ns.k,{css:{justifyContent:"center",alignItems:"center"},children:[" ",t]})]})},t8=t(16874),t5=function(){var e=(0,en._)(Q.useState(!0),2),n=e[0],t=e[1],i=(0,en._)(Q.useState(!1),2),r=i[0],s=i[1],a=(0,en._)(Q.useState(!1),2),o=a[0],l=a[1],c=(0,en._)(Q.useState(!1),2),d=c[0],u=c[1],m=(0,eI.m)(),g=m.open,h=m.close;return{closeBookingModal:function(){h("booking")},openBookingModal:function(){g("booking")},guestsPopoverOpen:o,setGuestsPopoverOpen:l,datesPopoverOpen:r,setDatesPopoverOpen:s,showDatesModalPane:n,setShowDatesModalPane:t,expanded:d,setExpanded:u}},t9=Q.createContext(null);t9.displayName="BookingFieldsContext";var t7=function(){return Q.useContext(t9)};function ie(e){var n=e.children,t=t5();return(0,X.jsx)(t9.Provider,{value:t,children:n})}var it=t(11640),ii=t(91679),ir=t(60385),is=t(3151),ia=function(){var e=(0,J.bp)(),n=(0,en._)((0,em.Qo)(),2),t=n[0],i=n[1],r=eM().hasPetsAllowed,s=e.listing.responseData,a=s.basicInfo,o=s.houseRules,l=t.calendar,c=t.data,d=t.error,u=t.form,m=function(e){i(function(n){return Object.assign({},n,{form:Object.assign({},n.form,e)})})},g={adultsAndChildren:a.guestCount-(u.detailGuests.adults+u.detailGuests.children),allowChildren:o.suitableForChildren,pets:r?2:0,infants:o.suitableForInfants?5:0};return{error:d,form:u,allowedGuests:g,minimumNights:(0,Q.useMemo)(function(){if(t.form.date.from){var e=t.calendar.dates.find(function(e){return(0,is.Z)(e.date,t.form.date.from)});if(e&&e.allowCheckIn&&e.validDurations.length)return e.validDurations[0].minStay}},[t.calendar.dates,t.form.date]),guestCount:a.guestCount,isAvailable:c&&c.isAvailable,listingId:a.id,allowPets:r,allowChildren:o.suitableForChildren,allowInfants:o.suitableForInfants,dates:l.dates,onMonthChange:function(e){var n=t.availability.nextMonth;1===(0,ii.Z)(n,e)&&(0,ir.W)(em.Tj.GetAvailability,{start:n,end:(0,it.Z)(n,12)})},onLoadMoreMonths:function(){var e=t.availability.nextMonth;(0,ir.W)(em.Tj.GetAvailability,{start:e,end:(0,it.Z)(e,6)})},setGuests:function(e){m({guests:e})},setDate:function(e){m({date:e})},setDetailGuests:function(e){i(function(n){return(0,ee._)((0,q._)({},n),{form:(0,ee._)((0,q._)({},n.form),{detailGuests:e})})})},defaultMonthsInView:6}},io=t(7739),il=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=(0,es.ts)().user,t=(0,en._)((0,em.Qo)(),1)[0].data,i=e||t,r=i.discountPercentage,s=i.discountType,a=i.isEligibleForSplitPayments,o=!!(i.discountPercentage&&i.discountPercentage>=5&&i.discountType),l=(0,io.p)({currencyCode:n.currencyCode,price:i.displayPricePerNight}),c=(0,io.p)({currencyCode:n.currencyCode,price:o?i.guestTotalWithoutLongStayDiscount/i.nights:i.displayPricePerNight}),d=(0,io.p)({currencyCode:n.currencyCode,price:i.totalPrice}),u=(0,io.p)({currencyCode:n.currencyCode,price:i.totalPrice/2});return{nightlyPrice:l,nightlyPriceWithoutDiscount:c,totalPrice:d,totalPriceWithoutDiscount:(0,io.p)({currencyCode:n.currencyCode,price:o?i.guestTotalWithoutLongStayDiscount:i.totalPrice}),discountedPrice:(0,io.p)({currencyCode:n.currencyCode,price:i.guestTotalWithoutLongStayDiscount-i.totalPrice}),discountPercentage:r,discountType:s,shouldShowDiscount:o,isEligibleForSplitPayments:a,splitPrice:u}},ic=t(67606),id=t(59251),iu=function(){var e=il(),n=e.shouldShowDiscount,t=e.discountPercentage,i=e.discountType,r=(0,nS.$)().t;return n&&(0,X.jsxs)(ns.k,{css:{backgroundColor:"$brand-green-lightest",paddingY:"$4",paddingX:"$12",gap:"$4",justifyContent:"center","@sm":{justifyContent:"start",paddingY:"$8",paddingX:"$16"}},align:"center",children:[(0,X.jsx)(ic.B,{size:"xs",css:{color:"$brand-green-darker"}}),(0,X.jsx)(eS.C,{modern:!0,intent:"detail",color:"brand-green-darker",children:(0,X.jsx)(id.c,{components:[(0,X.jsx)("strong",{},"discount-percentage")],i18nKey:"listingpage:booking.discount.percentageDiscount",tOptions:{percentage:t.toFixed(),type:r("listingpage:booking.discount.".concat(i))}})})]})},im=function(e){var n=e.data,t=il().nightlyPrice,i=(0,nS.$)().t;return(0,X.jsx)(ns.k,{children:n.isAvailable?(0,X.jsxs)("p",{children:[(0,X.jsx)("strong",{children:(0,ex.PC)(t)+" "})," x "+n.nights+" ","nights"]}):(0,X.jsx)(eS.C,{intent:"detail",color:"brand-orange-dark",children:i("listingpage:booking.errors_unavailable")})})},ig=function(e){var n=(0,nS.$)().t,t=(0,en._)((0,em.Qo)(),1)[0],i=t.data,r=t.isLoading,s=t.error;return"guests"===e.guestsOrDates?(0,X.jsxs)(eS.C,{intent:"detail",color:"neutrals-9",children:[n("listingpage:booking.instructionsGuests",{count:e.guestLimit}),e.infants&&" (".concat(n("listingpage:booking.infantsExclude"),")")]}):e.form.date.from&&e.form.date.to?i?(0,X.jsx)(im,{data:i}):r?(0,X.jsx)(tW.F,{height:"24px",width:"120px"}):s?(0,X.jsx)(eS.C,{intent:"detail",color:"brand-orange-dark",children:n("listingpage:booking.errors_unavailable")}):null:(0,X.jsx)(eP.x,{children:n("listingpage:booking.instructionsCheck".concat(e.form.date.from?"Out":"In"))})},ih=t(27755),ip=function(e){var n=e.isGuests,t=e.isModal,i=void 0!==t&&t,r=(0,nS.$)().t,s=t7(),a=s.closeBookingModal,o=s.setDatesPopoverOpen,l=s.setGuestsPopoverOpen,c=s.setExpanded,d=ia(),u=d.form,m=d.setDate,g=(0,en._)((0,em.Qo)(),1)[0].data,h=(0,J.bp)().listing,p=h.responseData.basicInfo.guestCount,x=h.responseData.houseRules.suitableForInfants,f=function(){a(),l(!1),o(!1)};return void 0!==n&&n?(0,X.jsxs)(ns.k,{css:(0,ee._)((0,q._)({},i&&{position:"absolute",bottom:0,backgroundColor:"$system-white",width:"100%",zIndex:9,marginBottom:"env(safe-area-inset-bottom)"}),{columnGap:"$24",paddingX:"$24",paddingY:"$12"}),justify:"between",align:"center",children:[(0,X.jsx)(ig,{guestsOrDates:"guests",guestLimit:p,infants:x}),(0,X.jsx)(ix,{onClick:f,isModal:i})]}):(0,X.jsxs)(eP.x,{css:(0,q._)({},i&&{position:"absolute",bottom:0,backgroundColor:"$system-white",width:"100%",zIndex:9,marginBottom:"env(safe-area-inset-bottom)"}),children:[i&&g&&(0,X.jsx)(iu,{}),(0,X.jsxs)(ns.k,{justify:i?"start":"between",align:"center",children:[!i&&g?(0,X.jsx)(eP.x,{css:{marginLeft:"$32",width:"100%"},children:(0,X.jsx)(iu,{})}):(0,X.jsx)(eN.L,{size:24}),(0,X.jsx)(ns.k,{justify:"end",css:{paddingX:"$24",paddingY:"$12",width:"100%",borderTop:i?"1px solid $neutrals-4":"none"},children:(0,X.jsxs)(ns.k,{css:{columnGap:"$12",width:"100%"},justify:i?"between":"end",children:[(0,X.jsxs)(ns.k,{direction:"column",align:i?"start":"end",justify:"center",css:{minHeight:"$48"},children:[(0,X.jsx)(ig,{guestsOrDates:"dates",form:u}),(u.date.from||u.date.to)&&(0,X.jsx)(ts.r,{as:"button",intent:"detail",underline:!0,onClick:function(){m({from:void 0,to:void 0}),c(!1)},type:"button",children:r("listingpage:booking.clearDates")})]}),u.date.from&&u.date.to&&(0,X.jsx)(ix,{onClick:f,isModal:i})]})})]})]})},ix=function(e){var n=e.onClick,t=e.isModal;return(0,X.jsx)(ih.z,{onClick:n,type:"button",className:(0,n3.M6)(" rounded-full p-3 px-6"),_action:"primary",children:t?"Save":"Close"})},iy=function(e){var n=e.datesFilter,t=e.guestsFilter,i=(0,nS.$)().t,r=(0,en._)((0,eI.d)("booking"),1)[0],s=(0,eI.m)().close,a=t7().showDatesModalPane;return(0,X.jsxs)(e_.u,(0,ee._)((0,q._)({slideFromBelow:!0},r),{contentCss:{borderTopLeftRadius:"24px",borderTopRightRadius:"24px",borderBottomLeftRadius:0,borderBottomRightRadius:0,width:"100%",padding:0,overflow:"clip"},panelCss:{width:"100%",height:"90%"},align:"bottom",closeButton:{css:{display:"none"}},children:[(0,X.jsx)(ib,{close:function(){return s("booking")}}),(0,X.jsx)(eP.x,{css:{overflowY:"scroll",overflowX:"clip",height:"80%"},children:a?n:(0,X.jsxs)(eP.x,{css:{padding:"$24"},children:[(0,X.jsx)(eD.D,{as:"h3",scale:7,modern:!0,children:i("filters.guestsPlaceholder")}),(0,X.jsx)(eN.L,{size:24}),t]})}),(0,X.jsx)(ip,{isGuests:!a,isModal:!0})]}))},ib=function(e){var n=e.close;return(0,X.jsxs)(ns.k,{css:{width:"100%",borderBottom:"1px solid $neutrals-4",paddingY:"$8"},justify:"between",children:[(0,X.jsx)(ns.k,{css:{flexGrow:1,paddingRight:"$12"}}),(0,X.jsxs)(ns.k,{css:{flexGrow:1},children:[(0,X.jsx)(iv,{isDates:!0}),(0,X.jsx)(iv,{isDates:!1})]}),(0,X.jsx)(ns.k,{css:{paddingRight:"$12"},children:(0,X.jsx)("button",{onClick:n,children:(0,X.jsx)(t8.C2,{size:"xs"})})})]})},iv=function(e){var n=e.isDates,t=t7(),i=t.setShowDatesModalPane,r=t.showDatesModalPane,s=(0,nS.$)().t;return(0,X.jsx)("button",{onClick:function(){return i(!!n)},children:(0,X.jsxs)(ns.k,{css:{gap:"$4",padding:"$8"},align:"center",children:[n?(0,X.jsx)(t4.j,{size:"xs"}):(0,X.jsx)(t3.P,{size:"xs"}),(0,X.jsx)(eS.C,{intent:"detail",bold:n?r:!r,color:"neutrals-10",css:{boxSizing:"border-box",borderBottom:"2px solid transparent",hover:{borderBottomColor:"$brand-yellow-primary"},fontSize:"18px"},children:s("listingpage:booking.summary.".concat(n?"dates":"guests"))})]})})},ij=t(4586),iI=t(74692),iC=(y=(0,ef._)(function(e,n){return(0,ey.Jh)(this,function(t){switch(t.label){case 0:return[4,fetch(tD()(ew.v.APP_BASE_URI,"wishlist",n,"?listingid=".concat(e)),{method:"POST"})];case 1:return[2,t.sent()]}})}),function(e,n){return y.apply(this,arguments)}),iw=(b=(0,ef._)(function(){return(0,ey.Jh)(this,function(e){switch(e.label){case 0:return[4,fetch(tD()(ew.v.APP_BASE_URI,"search/WishlistListings"),{method:"GET"})];case 1:return[2,e.sent()]}})}),function(){return b.apply(this,arguments)}),i_=function(){var e,n,t,i=(0,J.bp)(),r=(0,es.ts)(),s=(0,en._)(Q.useState([]),2),a=s[0],o=s[1],l=(0,en._)(Q.useState(!1),2),c=l[0],d=l[1],u=(0,en._)((0,em.Qo)(),2),m=u[0];u[1];var g=(0,en._)(Q.useState(!1),2),h=g[0],p=g[1],x=i.listing.responseData.basicInfo,f={listing_id:Number(x.id),checkin_date:(0,tz.p6)(m.form.date.from,tz.E_.ISO),checkout_date:(0,tz.p6)(m.form.date.to,tz.E_.ISO),city:null==x?void 0:null===(e=x.tracking)||void 0===e?void 0:e.city,region:null==x?void 0:null===(n=x.tracking)||void 0===n?void 0:n.region,country:null==x?void 0:null===(t=x.tracking)||void 0===t?void 0:t.country,num_adults:m.form.detailGuests.adults,num_children:m.form.detailGuests.children,content_ids:[Number(x.id)],content_type:"hotel",google_business_vertical:"hotel_rental"};return Q.useEffect(function(){r.user.isAuthenticated&&iw().then(function(e){return e.json()}).then(function(e){return h?(iC(Number(x.id),"add"),(0,tE.BH)(f),Promise.resolve((0,ij._)(e).concat([x.id]))):Promise.resolve(e)}).then(function(e){o(e),p(!1)})},[r]),Q.useEffect(function(){d(-1!==a.indexOf(x.id))},[a]),(0,X.jsx)(ik,{fill:c,onClick:function(e){e.preventDefault(),r.user.isAuthenticated?iC(Number(x.id),c?"remove":"add").then(function(e){return e.json()}).then(function(e){if(e.Ok)c?(0,tE.YX)(f):(0,tE.BH)(f),d(function(e){return!e});else throw Error("Favourite : Unable to ".concat(c?"remove from":"add to"," wishlist"))}).catch(function(e){console.error(e)}):(p(!0),window.dispatchEvent(new CustomEvent(iI.e.HEADER_EVENT_LOGIN_TOGGLE)))}})},ik=function(e){var n=e.fill,t=e.onClick;return(0,X.jsx)(iS,{type:"button",onClick:t,children:(0,X.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,X.jsx)("path",{stroke:n?"transparent":"black",fill:n?"#F75C30":"white",fillRule:"nonzero",d:"M12.66 4.4A4.83 4.83 0 0 1 15.79 3h.25c1.34 0 2.6.55 3.53 1.55a5.87 5.87 0 0 1 .02 7.66L12 21l-7.6-8.8a5.86 5.86 0 0 1 .01-7.63 4.7 4.7 0 0 1 3.54-1.55c1.3 0 2.5.48 3.38 1.37l.65.66.67-.64Z"})})})},iS=(0,nJ.zo)("button",{reset:!0,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",after:{content:'""',borderRadius:"50%",backgroundColor:"$neutrals-4b",opacity:.4,width:"0.5rem",height:"0.5rem",position:"absolute",zIndex:-1,transition:"all 0.2s ease-in-out"},hover:{after:{width:"2rem",height:"2rem"}},active:{after:{backgroundColor:"#F059A1"}},path:{transformOrigin:"center",transition:"all 0.2s ease-in-out"},"&:active path":{transform:"scale(1.2)"}}),iP=t(1669),iN=t(9124);(v=U||(U={}))[v.Min=0]="Min",v[v.Max=20]="Max";var iD=(0,Q.memo)(function(e){var n=e.initialValue,t=e.onChange,i=e.category,r=e.forcedMin,s=e.remainingGuests,a=(0,e$.$G)().t,o=(0,en._)((0,Q.useState)(n),2),l=o[0],c=o[1],d="adults"===i||"children"===i;return(0,X.jsx)("div",{"data-testid":"guest-stepper",children:(0,X.jsxs)(ns.k,{align:"center",justify:"between",css:{width:"100%"},children:[(0,X.jsxs)(ns.k,{direction:"row",align:"baseline",css:{gap:"$8"},children:[(0,X.jsx)(eS.C,{bold:!0,modern:!0,scale:7,color:"system-black",children:a("filters.guests.".concat(i,".label"))}),(0,X.jsx)(eS.C,{modern:!0,color:"system-grey-medium",scale:9,children:a("filters.guests.".concat(i,".hint"))})]}),(0,X.jsx)("div",{children:(0,X.jsx)(eP.x,{css:{width:"100%","@md":{width:"auto"}},children:(0,X.jsx)(iN.v,{min:r||0,max:d?0!==s.adultsAndChildren?l+1:l:s[i],initialValue:n||0,renderLabel:function(e){return d&&e>=20?"".concat(e,"+"):e},onChange:function(e){return c(e),t(i,e)}})})})]})})});iD.displayName="GuestFilter";var i$=function(e){var n=e.guests,t=e.onChange,i=e.allowedGuests,r=(0,e$.$G)().t,s=(0,en._)(Q.useState(n),2),a=s[0],o=s[1],l=Object.keys(n),c=l.filter(function(e){return"adults"===e||"children"===e&&i.allowChildren||"infants"===e&&i.infants>0||"pets"===e&&i.pets>0}),d=l.filter(function(e){return-1===c.indexOf(e)}),u={children:"suitableForChildren",infants:"suitableForInfants",pets:"petsAllowed"};return(0,Q.useEffect)(function(){JSON.stringify(a)!==JSON.stringify(n)&&t(a)},[a]),(0,X.jsxs)(eP.x,{children:[(0,X.jsx)(ek.K,{space:20,dividers:!0,children:c.map(function(e){return(0,X.jsx)(iD,{forcedMin:"adults"===e?1:null,remainingGuests:i,initialValue:n[e],onChange:function(e,n){o((0,ee._)((0,q._)({},a),(0,eR._)({},e,n)))},category:e},e)})}),(0,X.jsx)(ek.K,{space:16,css:{marginTop:"$16",borderTop:"1px solid $neutrals-3",paddingY:"$16"},children:d.map(function(e){return(0,X.jsxs)(ns.k,{align:"start",children:[(0,X.jsx)(iP.P,{css:{backgroundColor:"$neutrals-4",borderRadius:"$rounded",marginRight:"$8"}}),(0,X.jsx)(eS.C,{scale:7,"data-testid":"forbidden-message",children:r("listingpage:houseRules.".concat(u[e]),{context:"not"})})]},e)})})]})},iL=t(53823),iO=function(e){var n=e.isGuests,t=e.children,i=e.trigger,r=e.open,s=e.setOpen;return(0,X.jsxs)(iL.J2,{open:r,onOpenChange:s,children:[(0,X.jsx)(iL.tW,{style:{width:"100%"},children:i}),(0,X.jsxs)(iL.yk,{side:"bottom",align:"end",avoidCollisions:!0,collisionPadding:{top:1500,left:0},style:{borderRadius:"24px",zIndex:9999,padding:0,paddingBottom:"12px",minWidth:500,minHeight:n?"initial":384,justifyContent:"space-between",display:"flex",flexDirection:"column"},children:[(0,X.jsxs)(eP.x,{css:{paddingX:"$24",paddingTop:"$24"},children:[" ",t]}),(0,X.jsx)(ip,{isGuests:n})]})]})},iT=function(e){var n=e.isBookingBar,t=e.isLoading,i=(0,nS.$)().t,r=ia(),s=r.form,a=r.dates,o=r.setDate,l=r.onLoadMoreMonths,c=r.onMonthChange,d=r.allowedGuests,u=r.setDetailGuests,m=r.minimumNights,g=r.error,h=r.defaultMonthsInView,p=s.date,x=s.detailGuests,f=(0,en._)(Q.useState(!1),2),y=f[0],b=f[1],v=p.from||p.to?"".concat((0,tz.p6)(p.from,tz.E_.PRETTY_NO_YEAR)||" "," -\n  ").concat((0,tz.p6)(p.to,tz.E_.PRETTY_NO_YEAR)||"..."):i("common:datesPlaceholder"),j="".concat(i("common:guestAmount",{count:x.adults+x.children})).concat(x.infants+x.pets>0?"...":"").trimEnd();(0,Q.useEffect)(function(){t||b(!0)},[t]);var I=t7(),C=I.setDatesPopoverOpen,w=I.setGuestsPopoverOpen,_=I.datesPopoverOpen,k=I.guestsPopoverOpen,S=I.setShowDatesModalPane,P=I.openBookingModal,N=(0,X.jsx)(t0.T,{setOpen:function(){},className:"notranslate",open:!0,dates:a,labels:{root:i("listingpage:booking.fromTo"),from:i("listingpage:booking.checkIn"),to:i("listingpage:booking.checkOut"),clearDates:i("listingpage:booking.clearDates"),minimumNights:i("listingpage:booking.minNight",{count:m})},minimumNights:m,value:p,onChange:o,onMonthChange:c,locale:"en-GB",isMobile:n,defaultMonthsInView:n?h:void 0,onLoadMoreMonths:l}),D=(0,X.jsx)(i$,{guests:x,onChange:u,allowedGuests:d});return(0,X.jsxs)(ns.k,{css:{gap:"$8",flexDirection:"column","@xs":{flexDirection:"row"}},children:[(0,X.jsx)(iO,{open:_,setOpen:C,isGuests:!1,trigger:(0,X.jsx)(t6,{isGuests:!1,onClick:function(){S(!0),n?P():C(!_)},isLoading:!y,error:g,children:v}),children:N}),(0,X.jsxs)(ns.k,{css:{gap:"$8",width:"100%"},align:"center",children:[(0,X.jsx)(iO,{open:k,setOpen:w,isGuests:!0,trigger:(0,X.jsx)(t6,{isGuests:!0,onClick:function(){S(!1),n?P():w(!k)},isLoading:!y,children:j}),children:D}),(0,X.jsx)(n7._,{above:"md",children:(0,X.jsx)(i_,{})})]}),(0,X.jsx)(iy,{datesFilter:N,guestsFilter:D})]})},iA=function(e){var n=e.error;return(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(eS.C,{scale:"7",color:"brand-orange-primary","data-testid":"contact-host-modal-form-error",children:n})})},iE=function(e){var n,t=e.onSubmit,i=e.status,r=e.setError,s=e.setStatus,a=e.error,o=(0,nS.$)().t,l=(0,es.ts)(),c=l.user.language,d=Q.useMemo(function(){var e=c.match(/[a-z]{2}$/i)[0];return tQ.n.find(function(n){var t;return n.iso.toLowerCase()===((null===(t=l.user.countryCode)||void 0===t?void 0:t.toLowerCase())||e.toLowerCase())})},[c]),u=ia().form,m=(0,en._)(Q.useState({dialCode:(null==d?void 0:d.dialCode)||"+44",number:(null==l?void 0:null===(n=l.user)||void 0===n?void 0:n.phoneNumber)||"",countryCode:(null==d?void 0:d.iso)||"GB",countryId:(null==d?void 0:d.id)||234}),2),g=m[0],h=m[1],p=(0,en._)(Q.useState(""),2),x=p[0],f=p[1],y=(0,tw.G)([t_.w.md],[!0],!1);return(0,X.jsxs)("form",{name:"contact-host-modal__form",onSubmit:function(e){if(e.preventDefault(),!u.date.to||!u.date.from||!g||!x){s("error"),r(o("listingpage:contactHost.form.completeFormError"));return}t&&t({checkInDate:(0,tz.p6)(u.date.from,tz.E_.LEGACY),checkOutDate:(0,tz.p6)(u.date.to,tz.E_.LEGACY),guests:(u.detailGuests.adults+u.detailGuests.children).toString(),countryDiallingCodeId:g.countryId.toString(),phoneNumber:g.number||"N/A",message:x}),(0,tE._Q)({phone_number:g.number||null})},"data-testid":"contact-host-modal-form","data-track-id":"contact-host-modal-form",children:[(0,X.jsxs)(nH.r,{columns:1,rowGap:{"@initial":32},children:[(0,X.jsx)(iT,{isBookingBar:!y,isLoading:!1}),(0,X.jsx)(tJ.B,{id:"contact-host-message",label:o("listingpage:contactHost.form.messageLabel"),name:"message",placeholder:o("listingpage:contactHost.form.messagePlaceholder"),value:x,onChange:function(e){return f(e.target.value)},css:{minHeight:"$128","@md":{minHeight:"$192"}}}),(0,X.jsxs)(nX.P,{children:[(0,X.jsx)(nH.r,{columns:{"@initial":1,"@sm":"1fr $256"},children:(0,X.jsx)(nX.P,{children:(0,X.jsx)(tq.E,{id:"contact-host-phone",value:g,label:o("listingpage:contactHost.form.phoneLabel"),onChange:function(e){h(e)},countryCode:{label:"Country code",id:"country-code",name:"country-code"},phoneNumber:{label:"Phone number",id:"phone-number",name:"phone-number"}})})}),(0,X.jsx)(eN.L,{size:8}),(0,X.jsx)(eS.C,{intent:"detail",children:o("listingpage:contactHost.form.phoneOptional")})]})]}),"error"===i&&a&&(0,X.jsx)(iA,{error:a}),(0,X.jsx)(eN.L,{size:24}),(0,X.jsx)(te.z,{type:"submit",loading:"loading"===i,dataTrackId:"listingpage-contact-host-modal--send-message",full:!0,children:o("listingpage:contactHost.form.send")})]})},iz=function(e){var n=e.avatar,t=e.name,i=(0,nS.$)().t,r=(0,no.g)({textAlign:{"@initial":"left","@sm":"center"}});return(0,X.jsxs)(ns.k,{direction:"column",align:{"@initial":"start","@sm":"center"},children:[n,(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(eD.D,{as:"h3",scale:5,children:i("listingpage:contactHost.successMessage.title")}),(0,X.jsx)(eS.C,{color:"neutrals-9",className:r,children:i("listingpage:contactHost.successMessage.host",{name:t})}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(eS.C,{color:"neutrals-9",className:r,children:i("listingpage:contactHost.successMessage.body")})]})},iF=function(e){var n=e.baseUrl,t=e.callbackEndpointUrl,i=e.modalProps,r=e.onSubmit,s=(0,nS.$)().t,a=(0,J.bp)(),o=(0,eI.m)().close,l=a.listing.responseData,c=l.host,d=l.basicInfo,u=(0,en._)(Q.useState(""),2),m=u[0],g=u[1],h=(0,en._)(Q.useState(""),2),p=h[0],x=h[1],f=function(e){g(e)},y=function(e){x(e)},b=(0,ex.kC)(c.firstName.trim()),v={propertyId:d.id,propertyName:d.name,hostName:b},j=c.fileUrl||d.featuredImageUrl,I=s("common:errors.genericError"),C=(0,X.jsx)(eP.x,{css:{width:"$64",height:"$64"},children:(0,X.jsx)(tK.o,{ratio:"1:1",children:(0,X.jsx)(tW.F,{width:"100%",height:"100%",css:{borderRadius:"$rounded"},children:!!j&&(0,X.jsx)(tZ.q,{src:encodeURI(j),name:s("listingpage:contactHost.title",{name:b}),size:"medium",css:{img:{display:"block"}}})})})});return(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(e_.u,(0,ee._)((0,q._)({size:"lg",gap:{"@initial":0,"@md":32},fullscreen:{"@max-sm":"true"}},i),{children:"success"!==m?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(ns.k,{direction:{"@initial":"column","@md":"row"},align:{"@initial":"start","@md":"center"},children:[(0,X.jsx)(eP.x,{css:{marginBottom:"$16","@md":{marginBottom:0,marginRight:"$16"}},children:C}),(0,X.jsx)(eD.D,{as:"h3",scale:5,children:s("listingpage:contactHost.title",{name:b,propertyName:d.name})})]}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(ie,{children:(0,X.jsx)(iE,{onSubmit:function(e){tX({baseUrl:n,callbackEndpointUrl:t,formValues:e,propertyInfo:v,successCallback:r,statusCallback:f,errorCallback:y,errorMessage:I})},status:m,setError:y,setStatus:f,error:p})}),(0,X.jsxs)(n7._,{above:"md",children:[(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(te.z,{full:!0,action:"secondary",onClick:function(){setTimeout(function(){return g("")},100),o("contactHost")},children:s("listingpage:contactHost.cancel")})]})]}):(0,X.jsx)(iz,{avatar:C,name:b})}))})};iF.displayName="ContactHostModal";var iB=t(57631),iG=t(52993),iM=t(83244),iR=function(e){var n=(0,Q.useMemo)(function(){var n=e.bedroomName.toLowerCase(),t=n.includes("master")||n.includes("main"),i=null;return t||(i=parseInt(/([0-9]+)/gm.exec(e.bedroomName)[0],10)),{isMain:t,bedroomCount:i}},[e]),t=n.isMain,i=n.bedroomCount;return{bedroomName:e.bedroomName,isMain:t,bedroomCount:i}},iU=t(24523),iH=t(60167),iK=t(76474),iW=t(45027),iZ=t(5203),iV=function(e){var n=e.children;return(0,X.jsx)(ek.K,{as:"ul",space:8,css:{li:{display:"flex",before:{backgroundColor:"$neutrals-9",content:"''",display:"block",flex:"none",width:"$space$4",height:"$space$4",marginRight:"$space$12",marginTop:"$space$12"}}},children:n})},iY=function(e){var n=e.bed,t=e.bedroomName,i=(0,e$.$G)().t,r=nk(n.bedSizes),s="".concat(t,"-").concat(r),a=(0,Q.useMemo)(function(){return[{name:"mattress",value:[n.mattressType]},{name:"duvet",value:n.duvetType?[n.duvetType]:[]},{name:"pillows",value:n.pillowType?(0,ij._)(n.pillowType):[]}].filter(function(e){return!!e.value.length})},[n]);return(0,X.jsxs)(iU.Qd,{value:s,css:{border:"1px solid $neutrals-4",borderRadius:"$4",boxShadow:"0px 1px 2px ".concat((0,iH.m)("system-black",.1))},children:[(0,X.jsx)(iK._,{children:(0,X.jsx)(iW.K,{css:{borderRadius:"$4",paddingX:"$16","@xs":{paddingX:"$24"}},children:(0,X.jsxs)(ns.k,{align:"center",children:[(0,X.jsx)(eP.x,{css:{width:32,height:24},children:(0,X.jsx)(nC,{bedSize:n.bedSizes})}),(0,X.jsx)(eN.L,{horizontal:!0,size:{"@initial":16,"@sm":24}}),(0,X.jsx)(eS.C,{modern:!0,as:"span",scale:{"@initial":8,"@xs":6},color:"system-black",css:{fontWeight:"normal"},children:r})]})})}),(0,X.jsx)(iZ.H,{children:(0,X.jsx)(eP.x,{css:{paddingX:"$16"},children:(0,X.jsx)(iV,{children:a.map(function(e){return(0,X.jsx)(eS.C,{modern:!0,as:"span",color:"neutrals-7",scale:8,children:(0,ex.kC)("".concat(e.value.join(", ")," ").concat(i("listingpage:bedroomInfo.".concat(e.name))).trim().toLowerCase())},"feature-".concat(e.name))})})})})]})},iX=function(e){var n=e.icon,t=e.description;return(0,X.jsxs)(ns.k,{align:"center",css:{border:"1px solid $neutrals-4",borderRadius:"$4",boxShadow:"0px 1px 2px ".concat((0,iH.m)("system-black",.1)),padding:"$16",minHeight:"$80","@xs":{paddingX:"$24"}},children:[(0,X.jsx)(eP.x,{css:{width:32,height:24},children:n}),(0,X.jsx)(eN.L,{horizontal:!0,size:{"@initial":16,"@sm":24}}),(0,X.jsx)(eS.C,{modern:!0,scale:{"@initial":8,"@xs":6},color:"system-black",children:t})]})},iQ={"30db":"decibel30","40db":"decibel40","50db":"decibel50"},iJ=function(e){var n=e.bedroom,t=(0,e$.$G)().t,i=!!iQ[n.bedroomDecibels];return n.bedroomDecibels?(0,X.jsxs)(eS.C,{modern:!0,scale:8,color:"neutrals-9",children:[(0,X.jsx)(e$.cC,{i18nKey:"listingpage:bedroomInfo.roomDecibelLevel",tOptions:{context:"method",value:n.bedroomDecibels},components:[(0,X.jsx)("strong",{className:(0,no.g)({fontWeight:"bold"})},"decibels")]}),(0,X.jsx)("span",{children:" "}),i&&t("listingpage:bedroomInfo.decibelDescriptions.".concat(iQ[n.bedroomDecibels]),{context:"text"})]}):null},iq=function(e){var n,t=e.bedroom,i=(0,e$.$G)().t,r=iR(t),s=r.isMain,a=r.bedroomCount,o=t.bedroomStorage,l=t.bedroomWindow,c=t.sleepCount,d=t.bedroomName,u=o.filter(function(e){return!["None","none"].includes(e)}),m=l&&!["None","none"].includes(l)?l:"",g=u.map(function(e){return e.toLowerCase()});g.unshift(m);var h=(n=(g=g.filter(function(e){return""!==e})).join(", "),"".concat(n.charAt(0).toUpperCase()).concat(n.slice(1))),p=null==t?void 0:t.beds.some(function(e){var n;return!!(e.mattressType||e.duvetType||(null===(n=e.pillowType)||void 0===n?void 0:n.length))});return(0,X.jsxs)(ek.K,{space:16,children:[(0,X.jsx)(eD.D,{as:"h3",modern:!0,color:"neutrals-9",scale:7,"data-testid":"bedroom-name",children:(0,X.jsxs)(ns.k,{children:[s?"Bedroom 1":i("listingpage:bedroomInfo.bedroomNames.bedroom",{count:a}),(0,X.jsx)(eN.L,{horizontal:!0,size:16}),!!c&&(0,X.jsx)(iG.C,{css:{backgroundColor:"$brand-blue-lighter",marginTop:"$4",span:{fontWeight:"normal"}},children:i("listingpage:homeSpec.sleepsGuests",{guestCount:c})})]})}),m.length||u.length||(null==t?void 0:t.bedroomDecibels)&&(0,X.jsxs)(ek.K,{space:4,children:[(m.length||u.length)&&(0,X.jsx)(eS.C,{modern:!0,scale:8,color:"neutrals-9",children:h}),(null==t?void 0:t.bedroomDecibels)&&(0,X.jsx)(iJ,{bedroom:t})]}),p?(0,X.jsx)(iM.UQ,{divider:!0,multiple:!0,css:{borderTop:"none"},textToggle:{hideLabel:i("common:hide"),showLabel:i("common:show")},children:(0,X.jsx)(ek.K,{space:16,children:null==t?void 0:t.beds.map(function(e,n){return(0,X.jsx)(iY,{bed:e,bedroomName:d},"bed-details-".concat(n))})})}):(0,X.jsx)(ek.K,{space:16,children:null==t?void 0:t.beds.map(function(e,n){return(0,X.jsx)(iX,{icon:(0,X.jsx)(nC,{bedSize:e.bedSizes}),description:nk(e.bedSizes)},"bed-details-".concat(n))})})]})},i0=function(e){var n=e.bathroom,t=(0,e$.$G)().t,i=nz(n),r=i.icon,s=i.featuresTranslated;return(0,X.jsxs)(ek.K,{space:16,children:[(0,X.jsx)(eD.D,{as:"h3",modern:!0,color:"neutrals-9",scale:7,"data-testid":"bedroom-name",children:(0,X.jsxs)(ns.k,{children:[t(n.hasBath||n.hasShower||!n.hasWc?"common:home.bathroom":"common:home.toilet"),(0,X.jsx)(eN.L,{horizontal:!0,size:16}),(0,X.jsx)(iG.C,{css:{backgroundColor:"$brand-yellow-lighter",marginTop:"$4",span:{fontWeight:"normal"}},children:t(n.isEnsuite?"common:home.ensuiteLabel":"common:home.separateLabel")})]})}),(0,X.jsx)(ek.K,{space:16,children:(0,X.jsx)(iX,{icon:r,description:s.join(", ")})})]})},i1=function(e){var n=e.beds,t=(0,e$.$G)().t;return(0,X.jsxs)(ek.K,{space:16,children:[(0,X.jsx)(eD.D,{as:"h3",modern:!0,color:"neutrals-9",scale:6,"data-testid":"bedroom-name",children:t("listingpage:bedroomInfo.communalAreas")}),(0,X.jsx)(ek.K,{space:16,children:n.map(function(e,n){return(0,X.jsxs)(ns.k,{align:"center",css:{border:"1px solid $neutrals-4",borderRadius:"$4",boxShadow:"0px 1px 2px ".concat((0,iH.m)("system-black",.1)),padding:"$16 $12",minHeight:"$80"},children:[(0,X.jsx)(eP.x,{css:{width:"$32",height:"$24"},children:(0,X.jsx)(nC,{bedSize:e.bedSizes})}),(0,X.jsx)(eN.L,{horizontal:!0,size:24}),(0,X.jsx)(eS.C,{modern:!0,scale:6,color:"neutrals-9",children:nk(e.bedSizes)})]},"additional-bedroom-".concat(n))})})]})},i2=function(e){var n=tt(),t=n.bedrooms,i=n.additionalBeds,r=n.bathrooms,s=(0,e$.$G)().t;return(0,X.jsxs)(e_.u,(0,ee._)((0,q._)({align:"top",size:"lg",gap:{"@initial":0,"@md":32}},e),{fullscreen:{"@max-sm":"true"},children:[(0,X.jsx)(eD.D,{as:"h2",scale:4,children:s("listingpage:allTheDetails.bedrooms.modalTitle")}),t.length?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:24}),(0,X.jsxs)(ek.K,{space:32,children:[t.map(function(e,n){return(0,X.jsx)(iq,{bedroom:e},"bedroom-".concat(n))}),i.length?(0,X.jsx)(i1,{beds:i}):null]})]}):null,nF(r)?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:56}),(0,X.jsx)(na.i,{}),(0,X.jsx)(eN.L,{size:40}),(0,X.jsxs)(ns.k,{align:"center",children:[(0,X.jsx)(iB.m,{size:"sm",css:{paddingRight:"16px"}}),(0,X.jsx)(eS.C,{scale:7,color:"neutrals-9",modern:!0,children:s("listingpage:allTheDetails.bedrooms.toiletDisclaimer")})]}),(0,X.jsx)(eN.L,{size:40}),(0,X.jsxs)(ek.K,{space:32,children:[r.filter(function(e){return e.hasBath||e.hasShower}).map(function(e,n){return(0,X.jsx)(i0,{bathroom:e},"bathroom-".concat(n))}),r.filter(function(e){return!e.hasBath&&!e.hasShower&&e.hasWc}).map(function(e,n){return(0,X.jsx)(i0,{bathroom:e},"bathroom-".concat(n))})]})]}):null]}))},i4=t(84442),i3=t(80789),i6=function(e){var n,t=(0,J.bp)(),i=(0,en._)((0,em.Qo)(),2),r=i[0];i[1];var s=(0,i3.D)({cancellationDetails:t.listing.responseData.cancellationDetails,fromDate:r.form.date.from,toDate:r.form.date.to,isAvailable:!!(null===(n=r.data)||void 0===n?void 0:n.isAvailable)}),a=s.cancellations,o=s.policyName,l=a.map(function(e){return e.value=parseInt(e.value),e});return(0,X.jsx)(i4.z,(0,q._)({refunds:l,policyType:o.toLowerCase()},e))},i8=t(19132),i5=t(21077),i9=t(64715),i7=function(){return(0,X.jsx)(ns.k,{align:"center",justify:"center",css:{paddingTop:"$12",before:{content:"''",display:"block",width:"$8",height:"$8",background:"$neutrals-9",borderRadius:9999,position:"absolute",marginLeft:"1px"},width:"$80"}})},re=function(e){var n=(0,e$.$G)().t,t=(0,Q.useMemo)(function(){return Object.values(n("listingpage:plumTestSteps.list",{returnObjects:!0})).map(function(e,n){var t=n+1,i=(0,X.jsx)(i7,{});return 3===t&&(i=(0,X.jsx)(i8.O,{width:80,height:80})),5===t&&(i=(0,X.jsx)(i5.Z,{width:80,height:80})),{align:"start",text:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eS.C,{modern:!0,bold:!0,scale:7,color:"system-black",children:e.title}),(0,X.jsx)(eN.L,{size:4}),(0,X.jsx)(eS.C,{modern:!0,scale:7,color:"system-black",children:e.content})]}),badge:i}})},[]);return(0,X.jsxs)(e_.u,{align:"top",size:"lg",gap:{"@initial":0,"@md":32},children:[(0,X.jsx)(eD.D,{modern:!0,as:"h2",scale:4,color:"system-black",children:n("listingpage:plumTestSteps.title")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(eS.C,{modern:!0,scale:6,color:"system-black",children:n("listingpage:plumTestSteps.description")}),(0,X.jsx)(eN.L,{size:32}),(0,X.jsx)(i9.T,{badgeSize:"large",steps:t}),(0,X.jsx)(eN.L,{size:32})]})},rn=t(49297),rt=t(98253),ri=function(){var e,n=(0,eb.useRouter)().events,t=(0,J.bp)(),i=(0,en._)((0,eI.d)("floorPlan"),1)[0],r=(0,en._)((0,eI.d)("gridModal"),1)[0],s=(0,en._)((0,eI.d)("userSettings"),1)[0],a=(0,en._)((0,eI.d)("amenities"),1)[0],o=(0,en._)((0,eI.d)("contactHost"),1)[0],l=(0,en._)((0,eI.d)("bedsBathrooms"),1)[0],c=(0,en._)((0,eI.d)("cancellation"),1)[0],d=(0,en._)((0,eI.d)("nominated"),1)[0],u=(0,eI.m)(),m=u.closeAll,g=u.close,h=u.open,p=(0,es.jL)().saveCurrencyAndLanguage,x=t.listing.responseData,f=x.basicInfo,y=f.name,b=f.bedroomCount,v=f.bathroomCount,j=x.floorplan.floors,I=x.overview,C=I.totalArea,w=I.floorsCount,_=(0,Q.useCallback)((e=(0,ef._)(function(e,n){return(0,ey.Jh)(this,function(t){return p(n.id,n.code,e),g("userSettings"),[2]})}),function(n,t){return e.apply(this,arguments)}),[g,p]);(0,rn.i)(rt.D.USER_SETTINGS_SAVE,function(e){_(e.language,(0,ee._)((0,q._)({},e.currency),{name:""}))});var k=function(e){r.open&&e.oldURL.includes("#gallery")&&g("gridModal"),!r.open&&e.newURL.includes("#gallery")&&h("gridModal")};return(0,ev.O)(iI.e.HEADER_EVENT_SETTINGS_CLICK,function(){h("userSettings")}),(0,Q.useEffect)(function(){return window.addEventListener("hashchange",k),function(){window.removeEventListener("hashchange",k)}},[k]),(0,Q.useEffect)(function(){return n.on("routeChangeStart",m),function(){n.off("routeChangeStart",m)}},[m,n]),(0,ej._1)(["drawers","modals"]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eC.l,(0,ee._)((0,q._)({},s),{baseUrl:ew.v.APP_BASE_URI,onSave:_})),(0,X.jsx)(tH,(0,q._)({},r)),(0,X.jsx)(nr,(0,q._)({},a)),(0,X.jsx)(i2,(0,q._)({},l)),j.length>0&&(0,X.jsx)(nU,{modalProps:i,listingName:y,area:C,floorsCount:w,bedroomCount:b,bathroomCount:v,floorplan:j}),(0,X.jsx)(iF,{baseUrl:ew.v.APP_BASE_URI,callbackEndpointUrl:"conversation/contactexternal",modalProps:o}),(0,X.jsx)(i6,(0,q._)({},c)),(0,X.jsx)(re,(0,q._)({},d))]})},rr=t(94184),rs=t.n(rr),ra=(0,nJ.zo)("section",{}),ro=function(e){var n=e.className,t=e.children,i=e.css,r=e.hasSpacing,s=rs()("section__content",n);return(0,X.jsxs)(ra,{className:"section","data-testid":"section",css:i,children:[(0,X.jsx)("div",{className:s,"data-testid":"section-content",children:t}),(void 0===r||r)&&(0,X.jsx)(eN.L,{size:{"@initial":64,"@sm":80,"@lg":96,"@xxl":128}})]})},rl=function(){var e=(0,e$.$G)().t;return(0,tw.G)([t_.w["max-lg"]],[!0],!1),(0,X.jsxs)(ro,{"data-testid":"all-the-details",hasSpacing:!1,children:[(0,X.jsx)(eD.D,{modern:!0,editorial:!0,as:"h2",scale:4,color:"neutrals-9",children:e("listingpage:allTheDetails.title")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(na.i,{}),(0,X.jsx)(eN.L,{size:40}),(0,X.jsx)(tC,{}),(0,X.jsx)(eN.L,{size:64})]})},rc=t(66938),rd=JSON.parse('{"fr-paris":"airbnb","gb-england-london":"airbnb","es-b-barcelona":"airbnb","de-berlin":"airbnb","es-m-madrid":"airbnb","ae-dubai":"aparthotels","es":"villas","dk-copenhagen":"airbnb","fr":"airbnb","it-rome":"airbnb","us-ca-los--angeles":"airbnb","gb-scotland-edinburgh":"airbnb","it":"villas","pt":"villas","gb-england-greater--manchester-manchester":"airbnb","gb-england-cambridgeshire-cambridge":"airbnb","gb-england-cornwall":"cottages","it-milan":"airbnb","pt-porto":"airbnb","gb-england-brighton--and--hove-brighton":"airbnb","gb-england-somerset":"cottages","gb-scotland":"lodges","it-tuscany":"villas","it-venice-san--marco":"","pt-lisbon":"airbnb","gb-england":"cottages","gb-england-norfolk":"cottages","gb-wales":"cottages","it-florence":"airbnb","it-veneto-venice":"airbnb","us-ca":"airbnb","dk":"airbnb","gb-england-county--durham-durham":"airbnb","gb-england-devon":"cottages","gb-england-somerset-bath":"airbnb","us-sc-charleston":"airbnb","us-sc":"airbnb","gb-england-dorset":"cottages","it-sicily":"villas","de":"airbnb","gb":"cottages","gb-england-kent":"cottages","gb-england-suffolk":"cottages","gb-wales-pembrokeshire":"cottages","us":"airbnb","gb-england-north--yorkshire":"cottages","ae":"aparthotels","gb-england-cambridgeshire":"cottages","gb-england-west--sussex":"cottages","gb-england-redcar--and--cleveland-redcar":"cottages","gb-england-county--durham":"cottages","it-apulia":"villas","il-tel--aviv-yafo":"airbnb","us-ny-new--york":"airbnb","us-ca-san--diego":"airbnb","us-ca-palm--springs":"airbnb","us-ca-joshua--tree":"airbnb","gr-athens":"airbnb","es-se-seville":"airbnb","it-emilia-romagna-bologna":"airbnb","es-ss-donostia-san--sebastian":"airbnb","gb-england-bristol-bristol--city--centre":"airbnb","gb-england-cotswolds":"cottages","gb-england-gloucestershire":"cottages","gb-england-oxfordshire":"cottages","gb-england-york":"airbnb","gb-england-yorkshire":"cottages","gb-england-northumberland":"cottages","Snowdonia":"cottages","gb-england-east--sussex":"cottages","es-balearic-islands-majorca":"villas","es-ma-marbella":"villas","es-ma-costa--del--sol":"villas","es-ma-malaga":"airbnb","es-a-alicante":"airbnb","es-balearic-islands-ibiza":"villas","es-cn":"villas","es-gi-girona":"airbnb","gr-crete":"villas","gr-mikonos":"villas","gr-rhodes":"villas","gr-corfu":"villas","gr-paros":"villas","gr-santorini":"villas","gr-zakynthos":"villas","gr-cephalonia":"villas","gr-lefkada":"villas","gr-halkidiki":"villas","gr":"villas","it-umbria":"villas","it-campania-sorrento":"villas","it-lombardy-como":"villas","it-campania-amalfi":"villas","za-wc-city--of--cape--town--metropolitan--municipality-cape--town":"airbnb","bb":"villas","fr-french--riviera":"villas","fr-var-saint-tropez":"villas","fr-alpes-maritimes-cannes":"villas","fr-haute-savoie-chamonix":"airbnb","pt-algarve":"villas","pt-madeira":"villas","pt-coimbra":"villas","hr-split-dalmatia--county":"villas","hr-istria--county":"villas","hr-dubrovnik-neretva--county":"villas","us-ny-the--hamptons":"airbnb","us-ny-hudson--valley":"airbnb","cy":"villas","hr":"villas"}');function ru(){var e=(0,J.bp)().listing,n=e.responseData.basicInfo.breadCrumbs;return(0,Q.useMemo)(function(){return(n||[]).map(function(e,n,t){var i=t.map(function(e){return e.slug}),r=i.indexOf(e.slug),s=i.slice(0,r).reverse(),a=rd[e.slug];if(!a&&s.length){var o=!0,l=!1,c=void 0;try{for(var d,u=s[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var m=d.value;if(rd[m]){a=rd[m];break}}}catch(e){l=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}}return{name:e.name,url:a?tD()(ew.v.APP_BASE_URI,"d",e.slug,a):tD()(ew.v.APP_BASE_URI,"d",e.slug)}})},[e])}var rm=t(34242),rg=function(){var e=ru();return(0,X.jsx)(ns.k,{align:"center",css:{backgroundColor:"$neutrals-2",minHeight:"$80",overflowX:"auto",paddingY:"$24","@md":{overflowX:"visible"}},children:(0,X.jsx)(nh.T,{children:(0,X.jsx)(np.J,{children:(0,X.jsx)(nx.$,{size:{"@initial":24,"@sm":22},offset:{"@sm":1},children:(0,X.jsx)(rc.O,{items:[{name:rm.h.ogSiteName,url:ew.v.APP_BASE_URI}].concat((0,ij._)(e))})})})})})},rh=t(82231),rp=function(){var e=(0,nS.$)().t,n=(0,en._)((0,rh.o)(),2),t=(n[0],n[1]);return Q.useEffect(function(){return t(!1),function(){t(!0)}},[t]),(0,X.jsx)(ns.k,{"data-testid":"delisted-overlay",css:{bottom:0,backgroundImage:"linear-gradient(".concat((0,iH.m)("system-white",0),", $system-white 50%)"),position:"fixed",top:"$80",width:"100%",zIndex:"$9","@sm":{backgroundImage:"linear-gradient(".concat((0,iH.m)("system-white",0),", $system-white 65%)")},"@lg":{backgroundImage:"linear-gradient(".concat((0,iH.m)("system-white",0),", $system-white 75%)")}},children:(0,X.jsx)(np.J,{fullBleed:!0,css:{width:"100%"},children:(0,X.jsxs)(nx.$,{size:{"@initial":18},offset:{"@initial":3},css:{justifyContent:"flex-end"},center:!0,children:[(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",bold:!0,children:e("listingpage:delistedHome.title")}),(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",children:e("listingpage:delistedHome.subtitle")}),(0,X.jsx)(eN.L,{size:{"@initial":16,"@sm":32}}),(0,X.jsx)(te.z,{as:"a",className:"reengagement-backtosearch-button",href:(0,ex.zR)(),action:"primary",dataTestid:"delisted-similar-homes-button",children:e("listingpage:delistedHome.cta")}),(0,X.jsx)(eN.L,{size:64})]})})})},rx=t(86051),rf=t(29443),ry=function(e,n){var t=nc.arrSortDesc(n,"orderBy").map(function(n,t){return{src:encodeURI(n.fileUrl),alt:"".concat(e," - ").concat(t+1)}});return{hasImages:(null==t?void 0:t.length)>=1,images:t}},rb=function(e){var n=e.css,t=(0,J.bp)().listing.responseData.basicInfo.isExclusive,i=(0,e$.$G)().t;return t?(0,X.jsx)(eP.x,{css:(0,ee._)((0,q._)({},n),{backgroundColor:"$brand-yellow-lighter",position:"absolute",paddingY:"$8",paddingX:"$16",zIndex:1,left:0,textAlign:"center","@sm":{margin:"$8",width:"fit-content",textAlign:"left"}}),children:(0,X.jsxs)(eS.C,{modern:!0,scale:9,color:"system-inherit",bold:!0,children:[i("listingpage:exclusive.title"),(0,X.jsxs)(rv,{children:[". ",i("listingpage:exclusive.message")]})]})}):null},rv=(0,nJ.zo)("span",{display:"none",fontWeight:"normal","@sm":{display:"inline"}}),rj=function(e){var n=e.images,t=e.label,i=e.onClick;return(0,X.jsx)("div",{className:"grid grid-cols-2 gap-2 isolate",children:n.slice(0,2).map(function(e,n){return(0,X.jsxs)("button",{type:"button",className:"rounded-xs overflow-hidden aspect-[16/9] relative z-0 cursor-pointer focus-ring after:opacity-0 after:inset-0 after:absolute after:z-10 after:transition-opacity after:bg-gray-900/20 after:duration-300 after:ease-smooth hover:after:opacity-100 focus:after:opacity-1 focus:outline-none","aria-label":t,title:t,onClick:i,children:[0===n&&(0,X.jsx)(rb,{css:{bottom:0,borderRadius:"$2",margin:"$16"}}),(0,X.jsx)(nW.t,{src:e.src,alt:e.alt,width:940,layout:"original",cdn:"imgix",sizes:[[rf.B.xl,"716px"].join(" "),"50vw"].join(", "),breakpoints:[360,720,1080,1440]})]},e.src)})})},rI=t(85097);function rC(e){var n=e.emblaApi,t=(0,rI.z)(n),i=t.snaps,r=t.trackWidth,s=t.trackPosition;return(0,X.jsx)("div",{className:"py-2 mx-auto overflow-hidden text-center",style:{width:r},children:(0,X.jsx)("div",{className:"whitespace-nowrap inline-flex items-center transition-all",style:{transform:s?"translate3d(".concat(s,"px, 0,0)"):void 0},children:null==i?void 0:i.map(function(e){return(0,X.jsx)("button",{ref:e.ref,type:"button",className:(0,n3.M6)("flex justify-center items-center w-4 h-4 p-0 bg-white border-none focus-ring"),onClick:e.onClick,onBlur:e.onBlur,onFocus:e.onFocus,children:(0,X.jsx)("span",{className:(0,n3.M6)("flex w-2 h-2 bg-black rounded-full transition-all",e.isActive?"scale-100 opacity-100":e.isPrev||e.isNext?"scale-75 opacity-50":"scale-50 opacity-25")})},e.index)})})})}var rw=function(e){var n=e.images,t=e.onGalleryClick,i=(0,en._)((0,nZ.v)({options:{align:"start",containScroll:"trimSnaps",loop:!0}}),2),r=i[0],s=i[1];return(0,X.jsxs)("div",{children:[(0,X.jsxs)("div",{ref:r,className:"overflow-x-hidden relative isolate",role:"button",tabIndex:0,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==t||t())},onClick:t,children:[(0,X.jsx)("div",{className:"flex outline-none cursor-grab",children:null==n?void 0:n.map(function(e){return(0,X.jsx)("div",{className:"flex-none w-full bg-gray-150 overflow-hidden aspect-[5/4] sm:aspect-[16/9]",children:(0,X.jsx)(nW.t,{src:e.src,alt:e.alt,width:1280,layout:"original",cdn:"imgix",sizes:"100vw",breakpoints:[360,720]})},e.src)})}),(0,X.jsx)(rb,{css:{bottom:0,right:0}})]}),(0,X.jsx)(rC,{emblaApi:s})]})},r_=function(){var e=(0,e$.$G)().t,n=(0,J.bp)(),t=n.listing.responseData,i=t.basicInfo,r=t.photos,s=(0,rx.G)(rf.B.sm,!1),a=(0,en._)((0,Q.useState)(!1),2),o=a[0],l=a[1],c=ry(i.name,r),d=c.images,u=c.hasImages,m=n.listing.responseData.floorplan,g=(0,eI.m)().open;return(0,Q.useEffect)(function(){l(!0)},[]),(0,X.jsxs)("div",{className:"-mx-4 sm:-mx-8 relative",children:[o&&u?s?(0,X.jsx)(rj,{images:d,label:e("listingpage:viewPhotos",{number:d.length}),onClick:function(){g("gridModal")}}):(0,X.jsx)(rw,{images:d,onGalleryClick:function(){g("gridModal")}}):(0,X.jsxs)("div",{className:"flex gap-2 mb-10 md:mb-0",children:[(0,X.jsx)("div",{className:"bg-gray-100 w-full h-full grow aspect-[5/4] sm:aspect-[16/9] rounded-xs"}),(0,X.jsx)("div",{className:"bg-gray-100 w-full h-full grow aspect-[5/4] sm:aspect-[16/9] rounded-xs max-sm:hidden"})]}),(0,ex.sh)(i.status)?null:(0,X.jsxs)("div",{className:"max-sm:hidden flex justify-between absolute bottom-4 right-4 flex gap-2",children:[(0,X.jsx)(ih.z,{_action:"secondary",_size:"small",onClick:function(){return g("gridModal")},children:e("listingpage:homeSpec.viewPhoto",{count:r.length})}),m.hasFloorPlanImages&&(0,X.jsx)(ih.z,{_action:"secondary",_size:"small",onClick:function(){return g("floorPlan")},children:e("listingpage:homeSpec:floorplan")})]})]})},rk=t(5152),rS=t.n(rk),rP=t(70131),rN=function(e){var n=e.rootMargin,t=e.threshold,i=e.triggerOnce,r=e.children,s=(0,rP.YD)({rootMargin:void 0===n?"50%":n,threshold:void 0===t?0:t,triggerOnce:void 0===i||i}),a=s.ref,o=s.inView;return(0,X.jsx)("div",{ref:a,children:o&&r})},rD=rS()(Promise.all([t.e(362),t.e(267)]).then(t.bind(t,64819)).then(function(e){return e.LocationMap}),{loadableGenerated:{webpack:function(){return[64819]}},ssr:!1}),r$=function(e){var n=e.latitude,t=e.longitude;return(0,X.jsx)(rN,{children:(0,X.jsx)(rD,{latitude:n,longitude:t})})},rL=t(15253),rO=t(57655),rT=(0,n3.tv)({base:["w-8 h-8","flex items-center justify-center","rounded-full","border border-gray-150","transition","focus-ring","hover:bg-gray-50","disabled:opacity-50 disabled:pointer-events-none","absolute","top-[96px]","translate-y-[50%]","z-10","bg-white"],variants:{_direction:{prev:["-left-4","xl:-left-14"],next:["-right-4","xl:-right-14"]}}}),rA=(0,n3.tv)({base:["absolute bottom-2 left-2","text-[14px] text-white leading-4","z-10","drop-shadow-[0_1px_2px_black]"]});function rE(e){var n=e.attractions,t=(0,nS.$)().t,i=(0,en._)((0,nZ.v)({options:{align:"start",containScroll:"trimSnaps",dragFree:!0}}),2),r=i[0],s=i[1],a=Q.useRef(null),o=Q.useRef(null);return Q.useEffect(function(){var e=function(){s&&(a.current.disabled=!s.canScrollPrev(),o.current.disabled=!s.canScrollNext())};if(s)return e(),s.on("select",e),function(){s.off("select",e)}},[s]),(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:"max-w-lg mb-4 md:mb-6",children:[(0,X.jsx)(ta.x,{as:"h2",_scale:"b-large",_bold:!0,className:"mb-2 text-gray-900",children:t("listingpage:attractions.title")}),(0,X.jsx)(ta.x,{className:"text-gray-700",_scale:"b-small",children:t("listingpage:attractions.subtitle")})]}),(0,X.jsx)("div",{className:"relative sm:container",children:(0,X.jsx)("div",{className:"full-bleed overflow-x-hidden",children:(0,X.jsxs)("div",{className:"max-sm:container",children:[(0,X.jsx)("button",{ref:a,className:rT({_direction:"prev",class:"hidden sm:block"}),type:"button",onClick:function(){return null==s?void 0:s.scrollPrev()},children:(0,X.jsx)(nY.Z,{className:"text-gray-700",_size:"sm",_rotate:90})}),(0,X.jsx)("div",{ref:r,children:(0,X.jsx)("div",{className:"flex -mx-4",children:n.map(function(e,n){return(0,X.jsxs)("div",{className:"flex-none w-[236px] px-4 pb-2 md:pb-4 border-r border-gray-150",children:[(0,X.jsxs)("div",{className:"relative aspect-[4/5] rounded-xs overflow-hidden mb-4",children:[(0,X.jsx)(nW.t,{src:e.fileUrl,alt:e.title,width:210,layout:"original",cdn:"imgix",breakpoints:[480]}),((null==e?void 0:e.imageCopyright)||(null==e?void 0:e.imageSource)&&(null==e?void 0:e.imageSource)!==K.Unknown)&&(0,X.jsxs)(ta.x,{_scale:"b-tiny",className:rA(),children:["\xa9 ",(null==e?void 0:e.imageCopyright)||(null==e?void 0:e.imageSource)]})]}),(0,X.jsx)(ta.x,{as:"h3",_scale:"b-medium",_bold:!0,className:"mb-2 text-gray-900",children:e.title}),(0,X.jsx)(ta.x,{className:"text-gray-900 mb-4",_scale:"b-small",children:e.text}),(null==e?void 0:e.travelType)&&(null==e?void 0:e.travelTimeInMinutes)&&(0,X.jsxs)("div",{className:"flex align-middle",children:[(null==e?void 0:e.travelType)===H.Walking?(0,X.jsx)(rL.Z,{className:"text-gray-700 mr-1"}):(0,X.jsx)(rO.Z,{className:"text-gray-700 mr-1"}),(0,X.jsxs)(ta.x,{as:"span",className:"text-gray-700",_scale:"b-small",children:[null==e?void 0:e.travelTimeInMinutes," min"," "]})]})]},"attraction-".concat(n))})})}),(0,X.jsx)("button",{ref:o,className:rT({_direction:"next",class:"hidden sm:block"}),type:"button",onClick:function(){return null==s?void 0:s.scrollNext()},children:(0,X.jsx)(nY.Z,{className:"text-gray-700",_size:"sm",_rotate:270})})]})})})]})}(j=H||(H={})).Walking="Walking",j.Driving="Driving",(I=K||(K={})).Google="Google",I.Unsplashed="Unsplashed",I.Unknown="0";var rz=function(e){if("number"!=typeof e||e<0)return"";var n=Math.floor(e/60);return"".concat(n>0?"".concat(n," hr"):""," ").concat("".concat(e%60," min"))},rF=["Germany","United States","United Kingdom","France","Spain","Greece","Italy","Israel"];function rB(e){var n,t=e.title,i=e.places,r=(0,J.bp)().listing.responseData.basicInfo,s=i.filter(function(e){return"Airport"===e.placeType}).slice().map(function(e){var n;return e.name=(n=e.name)?n.split(" ").filter(function(e){return"Airport"!==e}).join(" "):"",e}),a=i.filter(function(e){return"Airport"!==e.placeType});return(0,X.jsxs)("div",{className:"space-y-3",children:[(0,X.jsx)(ta.x,{_scale:"b-medium",_bold:!0,className:"text-gray-900",children:t}),"Get around"===t&&rF.includes(null===(n=r.tracking)||void 0===n?void 0:n.country)&&(0,X.jsx)(rG,{places:s}),a.map(function(e){return(0,X.jsx)(Q.Fragment,{children:(0,X.jsx)(rM,{place:e,groupTitle:t},e.name)},e.name)})]})}function rG(e){var n=e.places;return 0===n.length?null:(0,X.jsxs)("div",{className:"w-full p-[15px] border border-sand-100 rounded-[2px] shadow-[0_2px_4px_0_rgba(29,29,29,0.04)]",children:[(0,X.jsx)(ta.x,{_scale:"b-small",children:(0,ex.KZ)(n[0].placeType)}),(0,X.jsx)("div",{className:"grid grid-cols-6 gap-y-3 items-center",children:n.map(function(e){return(0,X.jsxs)(Q.Fragment,{children:[(0,X.jsx)("div",{className:"col-start-1 col-end-4 text-gray-900",children:(0,X.jsx)(ta.x,{_scale:"b-small",_bold:!0,children:e.name})}),e.durationMins&&(0,X.jsx)("div",{className:"col-start-4 col-end-7 flex text-gray-700 justify-end whitespace-nowrap",children:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ta.x,{className:"pr-1",children:rz(Math.round(e.durationMins))}),e.travelType===H.Walking?(0,X.jsx)(rL.Z,{color:"gray-700"}):(0,X.jsx)(rO.Z,{color:"gray-700"})]})})]},e.name)})})]})}function rM(e){var n=e.place,t=e.groupTitle;if(!n)return null;var i=0===n.durationMins?1:n.durationMins;return(0,X.jsxs)("div",{className:"p-[15px] w-full border border-sand-100 rounded-[2px] grid grid-cols-6 gap-3 items-center shadow-[0_2px_4px_0_rgba(29,29,29,0.04)]",children:[(0,X.jsxs)("div",{className:"col-start-1 col-end-5 text-gray-900",children:[(0,X.jsx)(ta.x,{_scale:"b-small",children:(0,ex.KZ)(n.placeType)}),"Local shops & services"!==t&&(0,X.jsx)(ta.x,{_scale:"b-small",_bold:!0,children:n.name})]}),i&&(0,X.jsx)("div",{className:"col-start-5 col-end-7 flex text-gray-700 justify-end whitespace-nowrap",children:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(ta.x,{className:"pr-1",children:rz(Math.round(i))}),n.travelType===H.Walking?(0,X.jsx)(rL.Z,{color:"gray-700"}):(0,X.jsx)(rO.Z,{color:"gray-700"})]})})]})}function rR(e){var n=e.nearestPlaces;if(!n)return null;var t=n.nearestTown,i=n.nearestSupermarket,r=n.nearestConvenienceStore,s=n.nearestPharmacy,a=n.nearestCafe,o=n.nearestBeach,l=n.nearestAirports,c=n.nearestTransports,d=n.nearestBusStop,u=(0,nS.$)().t,m=(null==i?void 0:i.durationMins)<(null==r?void 0:r.durationMins)?i:r,g=[o,t].filter(function(e){return void 0!==e}),h=[m,a,s].filter(function(e){return void 0!==e}),p=(0,ij._)(c).filter(function(e){return void 0!==e&&("SubwayStation"===e.placeType||"TrainStation"===e.placeType)}),x=(0,ij._)(l||[]).concat((0,ij._)(p),[d]).filter(function(e){return void 0!==e});return(0,X.jsx)("div",{className:"mb-16",children:(0,X.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[x.length>0&&(0,X.jsx)(rB,{title:u("listingpage:neighbourhoodPlaces.getAround"),places:x}),h.length>0&&(0,X.jsx)(rB,{title:u("listingpage:neighbourhoodPlaces.localShops"),places:h}),g.length>0&&(0,X.jsx)(rB,{title:u("listingpage:neighbourhoodPlaces.pointsOfInterest"),places:g})]})})}var rU=t(81989);function rH(e){var n=e.name,t=e.description,i=(0,e$.$G)().t,r=(0,rx.G)(t_.w.md,!0);return(0,X.jsxs)("div",{children:[(0,X.jsx)(eD.D,{as:"h2",scale:4,color:"neutrals-9",editorial:!0,modern:!0,children:i("listingpage:neighbourhoodPlaces.localGuide")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(na.i,{}),!!t&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:40}),(0,X.jsx)(eD.D,{as:"h3",scale:6,modern:!0,children:i("listingpage:neighbourhoodPlaces.aboutTitle",{name:n})}),(0,X.jsx)(eN.L,{size:8}),(0,X.jsx)(tm,{children:(0,X.jsx)(rU.t,{copy:t,wordLimit:r?70:50,wordThreshold:30,expandText:i("listingpage:readMore"),collapseText:i("listingpage:readLess"),copyProps:{color:"neutrals-9",modern:!0,scale:7},linkProps:{underline:!0,modern:!0},linkCopyProps:{as:"span",color:"system-inherit",modern:!0,scale:7}})})]})]})}(C=W||(W={})).SEARCH_GUEST="exp_search_guest",C.ATTRACTIONS_REVAMP="exp_attractions_revamp",(w=Z||(Z={}))[w.exp_search_guest=W.SEARCH_GUEST]="exp_search_guest",w[w.exp_attractions_revamp=W.ATTRACTIONS_REVAMP]="exp_attractions_revamp",(_=V||(V={})).CONTROL="control",_.TEST="test";var rK=rS()(Promise.all([t.e(906),t.e(404)]).then(t.bind(t,79138)).then(function(e){return e.NearbyAttractions}),{loadableGenerated:{webpack:function(){return[79138]}},ssr:!1}),rW=function(e){return(0,X.jsx)(rN,{children:(0,X.jsx)(rK,(0,q._)({},e))})},rZ=function(){var e,n=(0,J.bp)().listing.responseData,t=n.basicInfo,i=n.neighbourhood,r=n.nearestPlaces,s=n.attractions,a=(e=W.ATTRACTIONS_REVAMP,(0,en._)(Q.useContext(ed),1)[0][e]||V.CONTROL);return(0,X.jsxs)(ro,{hasSpacing:!1,children:[(0,X.jsxs)("div",{className:"container container-narrow",children:[(0,X.jsx)(rH,{name:i.neighbourhoodName,description:i.description}),(0,X.jsx)(eN.L,{size:48}),s&&s.length>0&&("test"===a?(0,X.jsx)(rE,{attractions:s}):(0,X.jsx)(rW,{attractions:s}))]}),(0,X.jsx)(eN.L,{size:48}),(0,X.jsx)(r$,{latitude:t.latitude,longitude:t.longitude,hideTitle:!0}),(0,X.jsx)(eN.L,{size:48}),(0,X.jsx)("div",{className:"container container-narrow",children:(0,X.jsx)(rR,{nearestPlaces:r})})]})},rV=rS()(t.e(145).then(t.bind(t,37540)).then(function(e){return e.SimilarHomes}),{loadableGenerated:{webpack:function(){return[37540]}},ssr:!1}),rY=function(){return(0,X.jsx)(rN,{children:(0,X.jsx)(rV,{})})};t(13357);var rX=rS()(Promise.resolve().then(t.bind(t,13357)).then(function(e){return e.SyncedInfo}),{loadableGenerated:{webpack:function(){return[13357]}}}),rQ=function(e){return(0,X.jsx)(rX,(0,q._)({},e))},rJ=t(47231),rq=t(51671),r0={autoFetchUserInfo:!1,isFetchingUser:!1,identityBaseUrl:ew.v.APP_BASE_URI,facebookAppId:ew.v.FACEBOOK_APP_ID,googleAppId:ew.v.GOOGLE_APP_ID,cdnUrl:ew.v.CDN_URL},r1=function(e){var n=e.token,t=(0,es.ts)(),i=t.isFetching,r=t.user,s=(0,es.jL)(),a=s.setUser,o=s.clearUser,l=s.fetchUser,c=Object.assign({},r0,{userInfo:r},{isFetchingUser:i});return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(rJ.K,{config:c,cancelOnTapOutside:!0,onLogin:l,right:"10px",top:"55px",zIndex:"$8",displayAllScreens:!0}),(0,X.jsx)(rq.e,{config:c,hasShadow:!1,token:n,onLogin:a,onLogout:o})]})},r2=t(82241),r4=t(45848);function r3(){var e,n=(0,J.bp)().listing,t=(0,es.ts)().user.isAuthenticated,i=(0,en._)((0,em.Qo)(),1)[0],r=(0,eI.m)(),s=(null===(e=i.data)||void 0===e?void 0:e.totalPriceGbp)>5e3;return{isAuthenticated:t,isHighValueBooking:s,onClick:function(){switch(!0){case!t:window.dispatchEvent(new CustomEvent(iI.e.HEADER_EVENT_LOGIN_TOGGLE));break;case s:var e={listingUrl:window.location.href,listingName:n.responseData.basicInfo.name,listingGuestCount:i.form.guests};i.form.date.from&&i.form.date.to&&(e.listingFromDate=(0,tz.p6)(i.form.date.from,tz.E_.ISO),e.listingToDate=(0,tz.p6)(i.form.date.to,tz.E_.ISO)),(0,tE.R7)({name:"listing-qualified-for-holiday-matchmaking",parameters:e});break;default:r.open("contactHost")}}}}function r6(){var e=(0,nS.$)().t,n=r3(),t=n.isHighValueBooking,i=n.onClick;return(0,X.jsxs)("div",{className:"bg-white border border-sand-100 p-4 rounded-xs flex gap-2 items-center justify-between",children:[(0,X.jsxs)("div",{className:"[text-wrap:balance]",children:[(0,X.jsx)(ta.x,{_bold:!0,children:e("getInTouchBanner.title",{context:t?"highValue":""})}),(0,X.jsxs)(ta.x,{children:[e("getInTouchBanner.copy")," ",(0,X.jsx)(r4.r,{as:"button",type:"button",onClick:i,_underline:!0,children:e("getInTouchBanner.cta",{context:t?"highValue":""})})]})]}),(0,X.jsxs)("svg",{className:"flex-none",width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,X.jsx)("circle",{cx:"32",cy:"32",r:"32",fill:"#F9F6F2"}),(0,X.jsx)("path",{d:"M51 35.1902C51 30.5168 46.5359 26.7374 41.0663 26.7374C40.4228 26.7374 39.7793 26.778 39.1761 26.8999C38.2511 21.7388 32.9826 17.7969 26.6685 17.7969C19.6707 17.7969 14 22.6329 14 28.5661C14 32.4268 16.4533 36.003 20.3946 37.913C20.4348 38.1162 20.4348 38.3194 20.4348 38.5226C20.4348 39.4979 20.0728 40.4732 19.4293 41.2047C19.3489 41.286 19.3087 41.4485 19.3489 41.5705C19.3891 41.6924 19.4696 41.8143 19.5902 41.8549C20.1533 42.0581 20.6761 42.1394 21.2391 42.1394C23.1293 42.1394 24.8587 41.0015 25.6228 39.2541C25.9848 39.2947 26.3065 39.2947 26.6685 39.2947C28.5185 39.2947 30.288 38.9289 31.8967 38.3194C33.5054 41.6517 37.487 43.8462 41.8304 43.5618C42.4739 44.9028 43.8011 45.7969 45.2891 45.7969C45.7315 45.7969 46.1739 45.7156 46.6163 45.553C46.737 45.5124 46.8174 45.3905 46.8576 45.2686C46.8978 45.1467 46.8576 44.9841 46.7772 44.9028C46.2946 44.3339 46.013 43.6024 46.013 42.8709C46.013 42.749 46.013 42.5864 46.0533 42.4645C49.1098 41.0015 51 38.1975 51 35.1902ZM31.937 37.466C30.3283 38.1568 28.5587 38.5226 26.6685 38.5226C26.2663 38.5226 25.8239 38.5226 25.4217 38.4819C25.2207 38.4819 25.0598 38.5632 25.0196 38.7258C24.4163 40.3107 22.888 41.3673 21.2391 41.3673C20.9576 41.3673 20.6761 41.3266 20.3946 41.286C20.9576 40.4732 21.2391 39.5385 21.2391 38.5226C21.2391 38.1975 21.1989 37.8723 21.1587 37.5472C21.1185 37.4253 21.038 37.3034 20.9174 37.2628C17.137 35.5153 14.8043 32.1829 14.8043 28.5661C14.8043 23.0799 20.113 18.6096 26.6685 18.6096C33.2239 18.6096 38.5326 23.0799 38.5326 28.5661C38.5326 32.4674 35.8783 35.8404 31.937 37.466ZM45.812 44.9841C45.6511 45.0247 45.45 45.0247 45.2891 45.0247C44.0424 45.0247 42.8761 44.212 42.4739 43.0334C42.3935 42.8709 42.2326 42.749 42.0717 42.7896C41.75 42.8303 41.4283 42.8303 41.1065 42.8303C37.4065 42.8303 34.0685 40.9202 32.6609 38.0755C36.6424 36.2468 39.337 32.6706 39.337 28.5661C39.337 28.2816 39.337 27.9972 39.2967 27.7127C39.9 27.6314 40.463 27.5501 41.0663 27.5501C46.0935 27.5501 50.1957 30.9638 50.1957 35.1902C50.1957 37.9536 48.3859 40.5139 45.4902 41.8549C45.3696 41.8956 45.2891 42.0175 45.2489 42.1394C45.2087 42.3832 45.1685 42.6677 45.1685 42.9115C45.2087 43.643 45.4098 44.3745 45.812 44.9841Z",fill:"#636366"}),(0,X.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.9174 37.2628C20.8607 37.2366 20.8043 37.21 20.7483 37.1831C17.0675 35.4153 14.8043 32.1287 14.8043 28.5661C14.8043 23.0799 20.113 18.6096 26.6685 18.6096C32.5169 18.6096 37.3731 22.1677 38.3525 26.8309C38.3671 26.9004 38.3808 26.9702 38.3937 27.0402C38.4412 27.2988 38.4769 27.5606 38.5001 27.8253C38.5068 27.9011 38.5125 27.9771 38.5171 28.0533C38.5274 28.2232 38.5326 28.3941 38.5326 28.5661C38.5326 32.2854 36.1201 35.5246 32.4799 37.2272C32.4228 37.254 32.3653 37.2803 32.3075 37.3063C32.1853 37.3612 32.0618 37.4145 31.937 37.466C31.8329 37.5107 31.7281 37.554 31.6226 37.596C31.535 37.6309 31.4468 37.6648 31.3582 37.6978C29.9071 38.2384 28.3347 38.5226 26.6685 38.5226C26.3596 38.5226 26.0269 38.5226 25.707 38.5041C25.6104 38.4986 25.515 38.4914 25.4217 38.4819C25.2207 38.4819 25.0598 38.5632 25.0196 38.7258C24.9907 38.8016 24.9597 38.8763 24.9267 38.9496C24.3099 40.32 22.9849 41.2481 21.5261 41.3566C21.4309 41.3637 21.3352 41.3673 21.2391 41.3673C21.0258 41.3673 20.8124 41.3439 20.599 41.3149C20.5309 41.3057 20.4627 41.2958 20.3946 41.286C20.4419 41.2177 20.4872 41.1485 20.5306 41.0784C20.6763 40.8431 20.7995 40.5983 20.9003 40.345C21.1262 39.777 21.2391 39.1661 21.2391 38.5226C21.2391 38.2673 21.2143 38.012 21.1842 37.7567C21.176 37.6869 21.1673 37.6171 21.1587 37.5472C21.1185 37.4253 21.038 37.3034 20.9174 37.2628ZM20.2562 37.8449C20.2318 37.8328 20.2075 37.8205 20.1832 37.8082C16.3657 35.8741 14 32.3573 14 28.5661C14 22.6329 19.6707 17.7969 26.6685 17.7969C32.8194 17.7969 37.978 21.5377 39.0957 26.5022C39.1123 26.576 39.128 26.6501 39.1429 26.7244C39.1545 26.7827 39.1656 26.8413 39.1761 26.8999C39.1797 26.8992 39.1833 26.8985 39.1869 26.8977C39.2508 26.8849 39.3152 26.873 39.38 26.862C39.4098 26.8569 39.4396 26.852 39.4696 26.8473C39.986 26.766 40.5261 26.7374 41.0663 26.7374C46.5359 26.7374 51 30.5168 51 35.1902C51 38.1414 49.1795 40.897 46.2228 42.3814C46.1909 42.3974 46.1589 42.4133 46.1267 42.429C46.1023 42.4409 46.0778 42.4528 46.0533 42.4645C46.0308 42.5325 46.0209 42.6131 46.0165 42.6923C46.0161 42.6992 46.0158 42.7061 46.0155 42.713C46.0131 42.7664 46.013 42.8186 46.013 42.8651V42.8709C46.013 42.8844 46.0131 42.898 46.0133 42.9115C46.0214 43.4773 46.197 44.0413 46.5029 44.5282C46.5851 44.6592 46.6768 44.7845 46.7772 44.9028C46.8576 44.9841 46.8978 45.1467 46.8576 45.2686C46.8174 45.3905 46.737 45.5124 46.6163 45.553C46.4107 45.6286 46.2052 45.6866 45.9996 45.727C45.7628 45.7736 45.526 45.7969 45.2891 45.7969C43.8935 45.7969 42.6393 45.0104 41.9581 43.8062C41.9478 43.7881 41.9376 43.7698 41.9276 43.7514C41.8937 43.6893 41.8613 43.626 41.8304 43.5618C41.7673 43.5659 41.7042 43.5695 41.6411 43.5726C41.6305 43.5731 41.6199 43.5736 41.6093 43.5741C41.4411 43.5819 41.2735 43.586 41.1065 43.5865C37.1377 43.5973 33.5735 41.5571 31.9985 38.5227C31.9821 38.491 31.9659 38.4592 31.9499 38.4273C31.9319 38.3915 31.9142 38.3555 31.8967 38.3194C31.832 38.3439 31.7669 38.3681 31.7016 38.3918C30.1454 38.9578 28.444 39.2947 26.6685 39.2947C26.3926 39.2947 26.14 39.2947 25.8752 39.2767C25.8591 39.2756 25.843 39.2744 25.8268 39.2732C25.7599 39.2681 25.6921 39.2618 25.6228 39.2541C25.5914 39.326 25.5583 39.3969 25.5236 39.4668C25.5192 39.4757 25.5148 39.4845 25.5103 39.4933C24.6979 41.1047 23.0416 42.1394 21.2391 42.1394C20.9126 42.1394 20.5995 42.1121 20.2844 42.0495C20.0561 42.0041 19.8267 41.9403 19.5902 41.8549C19.4696 41.8143 19.3891 41.6924 19.3489 41.5705C19.3087 41.4485 19.3489 41.286 19.4293 41.2047C19.5359 41.0836 19.6347 40.9558 19.7254 40.8225C20.1828 40.1503 20.4348 39.3364 20.4348 38.5226C20.4348 38.3938 20.4348 38.2651 20.4246 38.1364C20.4242 38.1322 20.4239 38.128 20.4235 38.1238C20.4176 38.0535 20.4085 37.9833 20.3946 37.913C20.3482 37.8905 20.3021 37.8679 20.2562 37.8449ZM42.4739 43.0334C42.4954 43.0964 42.519 43.1582 42.5448 43.219C42.9175 44.0995 43.7257 44.7469 44.6529 44.9541C44.8602 45.0004 45.0735 45.0247 45.2891 45.0247C45.3925 45.0247 45.5124 45.0247 45.6275 45.014C45.6917 45.008 45.7544 44.9986 45.812 44.9841C45.7654 44.9135 45.7215 44.8413 45.6803 44.7676C45.5487 44.5326 45.4439 44.2829 45.364 44.0246C45.2525 43.6646 45.1892 43.2881 45.1685 42.9115C45.1685 42.8981 45.1686 42.8846 45.1688 42.8709C45.1726 42.6555 45.205 42.4128 45.2397 42.1961C45.2427 42.177 45.2458 42.1581 45.2489 42.1394C45.2891 42.0175 45.3696 41.8956 45.4902 41.8549C45.5645 41.8205 45.6381 41.7853 45.7109 41.7493C48.4775 40.3824 50.1957 37.8827 50.1957 35.1902C50.1957 30.9638 46.0935 27.5501 41.0663 27.5501C40.8018 27.5501 40.5451 27.5658 40.2893 27.5902C40.0251 27.6153 39.762 27.6499 39.4924 27.6863C39.4627 27.6903 39.433 27.6943 39.4032 27.6983C39.3819 27.7012 39.3606 27.7041 39.3392 27.707C39.3251 27.7089 39.3109 27.7108 39.2967 27.7127V27.7127C39.2987 27.7263 39.3005 27.7399 39.3022 27.7535C39.3081 27.7995 39.313 27.8456 39.3171 27.8916C39.337 28.1165 39.337 28.3413 39.337 28.5661C39.337 32.4262 36.9538 35.819 33.3583 37.7305C33.1908 37.8195 33.0208 37.9053 32.8482 37.9878C32.7861 38.0175 32.7236 38.0467 32.6609 38.0755C32.6836 38.1214 32.7068 38.1671 32.7305 38.2125C32.8616 38.4636 33.0079 38.7072 33.1683 38.9425C34.776 41.3016 37.7964 42.8303 41.1065 42.8303C41.3316 42.8303 41.5566 42.8303 41.7816 42.8164C41.8783 42.8104 41.975 42.8018 42.0717 42.7896C42.2326 42.749 42.3935 42.8709 42.4739 43.0334Z",fill:"#636366"}),(0,X.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.1845 25.6719H20.9274V24.8719H32.1845V25.6719Z",fill:"#636366"}),(0,X.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.1845 29.1719H20.9274V28.3719H32.1845V29.1719Z",fill:"#636366"}),(0,X.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.1845 32.6721H20.9274V31.8721H32.1845V32.6721Z",fill:"#636366"})]})]})}var r8=t(10880),r5=function(){var e=(0,J.bp)(),n=(0,eI.m)().open,t=(0,en._)((0,em.Qo)(),2),i=t[0],r=t[1],s=i.isLoading,a=i.error,o=i.hasPressedSubmit,l=e.listing.responseData,c=l.basicInfo,d=l.neighbourhood,u=!!(i.form.date.from&&i.form.date.to),m=!u||!!a;return{hasDates:u,isDisabled:m,handleSubmit:function(e){if(s||m||o){e.preventDefault();return}if(!u){e.preventDefault(),n("booking");return}var t={booking_value:i.data.totalPrice,content_ids:[parseInt(c.id)],listing_id:parseInt(c.id),listing_city:d.cityName,listing_city_id:d.cityId};c.instantBook?(0,tE.VW)(t):(0,tE.k$)(t),r(function(e){return(0,ee._)((0,q._)({},e),{hasPressedSubmit:!0})})}}},r9=t(89283),r7=(0,nJ.zo)(r9.aV,{backgroundColor:(0,iH.m)("neutrals-9",.4),width:"100%",height:"100%",top:0,position:"absolute",opacity:.3,animationFillMode:"both",animationDuration:"300ms",animationTimingFunction:n0.U.smooth(),"&[data-state='open']":{animationName:nq.s.fadeIn},"&[data-state='closed']":{animationName:nq.s.fadeOut}}),se=function(e){return{filter:e?"blur(1.5px) opacity(0.5)":"unset",transition:"filter 0.2s"}},sn=function(e){var n=e.data,t=e.isInvalid,i=il(n),r=i.splitPrice;return i.isEligibleForSplitPayments?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(tB.b,{color:"blue",compact:!0,css:se(t),children:(0,X.jsx)(id.c,{i18nKey:"listingpage:booking.paymentPlanInfo",tOptions:{amount:r.priceToString},components:[(0,X.jsx)(eS.C,{as:"span",modern:!0,scale:9,bold:!0,color:"system-inherit"},"strong")]})})]}):null},st=function(e){var n=e.lines,t=e.space;return(0,X.jsx)(ek.K,{space:void 0===t?8:t,children:(0,ij._)(Array(n)).map(function(e,n){return(0,X.jsx)(tW.F,{height:"24px"},n)})})},si=function(){var e=(0,en._)((0,em.Qo)(),1)[0],n=e.data,t=e.isLoading,i=(0,nS.$)().t,r=(0,en._)(Q.useState(null),2),s=r[0],a=r[1];Q.useEffect(function(){if(!t&&n)return a(n)},[n,t]);var o=!n;return s?(0,X.jsxs)(ek.K,{space:8,css:{marginTop:"$8"},children:[(0,X.jsxs)(so,{children:[(0,X.jsx)(sr,{data:s,isInvalid:o}),(0,X.jsx)(ss,{priceItem:"totalPriceWithoutDiscount",data:s,isInvalid:o,isLoading:t})]}),(0,X.jsx)(sa,{data:s,isInvalid:o,isLoading:t}),(0,X.jsxs)(so,{children:[(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-7",scale:8,children:i("listingpage:booking.summary.feesDisclaimer")}),(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-7",scale:8,css:se(o),children:i("listingpage:booking.summary.included")})]}),(0,X.jsxs)(so,{children:[(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-7",scale:8,children:i("listingpage:booking.summary.taxes")}),(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-7",scale:8,css:se(o),children:i("listingpage:booking.summary.included")})]}),(0,X.jsxs)(so,{children:[(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",bold:!0,scale:8,children:i("listingpage:booking.summary.totalPrice",{count:s.nights})}),(0,X.jsx)(ss,{priceItem:"totalPrice",data:s,isInvalid:o,isLoading:t,css:{fontWeight:"500",fontSize:"18px"}})]}),(0,X.jsx)(sn,{data:s,isInvalid:o})]}):(0,X.jsx)(st,{space:8,lines:4})},sr=function(e){var n=e.data,t=e.isInvalid,i=il(n).nightlyPriceWithoutDiscount,r=(0,nS.$)().t;return(0,X.jsx)(eS.C,{color:"neutrals-9",intent:"detail",dataTestid:"booking-form-summary-nightly-price",css:se(t),children:r("listingpage:booking.summary.pricePerNight",{pricePerNight:(0,ex.PC)(i),nights:n.nights})})},ss=function(e){var n=e.data,t=e.priceItem,i=e.isInvalid,r=e.isLoading,s=e.css,a=void 0===s?{}:s,o=e.prefix,l=il(n);return r?(0,X.jsx)(tW.F,{height:"20px",width:75,animated:!0}):(0,X.jsxs)(eS.C,{color:"neutrals-9",intent:"detail",css:(0,q._)({},se(i),a),children:[o," ",(0,ex.PC)(l[t])]})},sa=function(e){var n=e.data,t=e.isInvalid,i=e.isLoading,r=(0,nS.$)().t;return il(n).shouldShowDiscount?(0,X.jsxs)(so,{children:[(0,X.jsx)(eS.C,{modern:!0,intent:"detail",color:"brand-green-darker",css:se(t),children:r("listingpage:booking.discount.formDiscount",{percentage:n.discountPercentage.toFixed(),type:r("listingpage:booking.discount.".concat(n.discountType))})}),i?(0,X.jsx)(tW.F,{height:18,width:75,animated:!0}):(0,X.jsx)(ss,{priceItem:"discountedPrice",data:n,isInvalid:t,isLoading:i,css:{color:"$brand-green-darker"},prefix:"â€”"})]}):null},so=(0,nJ.zo)(ns.k,{justifyContent:"space-between",alignItems:"baseline"}),sl=function(e){var n=e.isExpanded,t=e.setIsExpanded;return(0,X.jsx)(sc,{onClick:function(){return t(!n)},type:"button",children:(0,X.jsx)(t8.C2,{size:"xs",css:{cursor:"pointer",transform:"rotate(".concat(n?"90":"270","deg)")}})})},sc=(0,nJ.zo)("button",{reset:!0,minWidth:"$48",display:"flex",justifyContent:"end",cursor:"pointer"}),sd=function(e){e.error;var n=il(),t=n.nightlyPrice,i=n.nightlyPriceWithoutDiscount,r=n.shouldShowDiscount;return(0,nS.$)().t,(0,X.jsxs)(ns.k,{align:"end",css:{gap:"$8",marginLeft:"$12","@md":{marginLeft:0}},children:[r&&(0,X.jsx)(eS.C,{color:"neutrals-7",scale:7,dataTestid:"price-label",modern:!0,css:{textDecoration:"line-through"},children:(0,ex.PC)(i)}),(0,X.jsx)(eS.C,{color:"system-grey-dark",scale:5,bold:!0,dataTestid:"price-label",modern:!0,children:(0,X.jsx)(id.c,{i18nKey:"common:nightlyPrice",tOptions:{price:(0,ex.PC)(t)},components:[(0,X.jsx)("small",{},"small-price")]})})]})},su=t(29244),sm=function(){var e=(0,tw.G)([t_.w.md],[!0],!1),n=(0,en._)((0,Q.useState)(e),2),t=n[0],i=n[1],r=(0,J.bp)(),s=(0,en._)((0,em.Qo)(),1)[0],a=s.data,o=s.error,l=s.hasPressedSubmit,c=s.allowBooking,d=s.isLoading,u=ia(),m=u.isAvailable,g=u.listingId,h=u.form,p=(0,e$.$G)().t,x=r5().handleSubmit,f=(0,en._)(Q.useState(null),2),y=f[0],b=f[1];(0,Q.useEffect)(function(){i(e)},[e]),(0,Q.useEffect)(function(){if(!d){if(a)return b(a);if(!h.date.from&&!h.date.to)return b(null)}},[a,d]);var v=r.listing.responseData.basicInfo,j=!t;if(!c)return null;var I=t7(),C=I.setDatesPopoverOpen,w=I.setShowDatesModalPane,_=I.expanded,k=I.setExpanded,S=I.openBookingModal,P=I.datesPopoverOpen,N=I.guestsPopoverOpen,D=P||N,$=h.detailGuests,L=$.adults,O=$.children,T=$.infants,A=$.pets,E=j&&_&&a||!j&&(h.date.from&&h.date.to||a)&&(D||a)||!j&&y&&D?"auto":0,z=j&&_&&!!a;return(0,X.jsx)(r9.fC,{open:z,modal:!0,children:(0,X.jsxs)("form",{name:"listingpage-booking-form--inline",id:"listingpage-booking-form--inline",action:tD()(ew.v.APP_BASE_URI,"book"),method:"post",onSubmit:x,children:[(0,X.jsx)(r9.h_,{children:(0,X.jsx)(r7,{onClick:function(){k(!1)}})}),(0,X.jsx)("input",{type:"hidden",name:"CheckIn",value:h.date.from?(0,tz.p6)(h.date.from,tz.E_.LEGACY):""}),(0,X.jsx)("input",{type:"hidden",name:"CheckOut",value:h.date.to?(0,tz.p6)(h.date.to,tz.E_.LEGACY):""}),(0,X.jsx)("input",{type:"hidden",name:"Adults",value:L}),(0,X.jsx)("input",{type:"hidden",name:"Children",value:O}),(0,X.jsx)("input",{type:"hidden",name:"Infants",value:T}),(0,X.jsx)("input",{type:"hidden",name:"Pets",value:A}),(0,X.jsx)("input",{type:"hidden",name:"IsAvailable",value:String(m)}),(0,X.jsx)("input",{type:"hidden",name:"ListingId",value:g}),(0,X.jsxs)(ns.k,{direction:"column",align:"stretch",justify:"between",children:[(0,X.jsxs)(ns.k,{justify:"between",align:"center",css:{marginBottom:"$12",minHeight:j?"unset":"$32",gap:"$4"},children:[a?(0,X.jsx)(sd,{error:o}):(0,X.jsx)(n7._,{below:"sm",children:(0,X.jsx)(eS.C,{intent:"detail",color:o?"brand-orange-dark":"neutrals-9",css:{textWrap:"balance"},children:p("listingpage:booking.".concat(o?"errors_unavailable":"button_addDates"))})}),(0,X.jsx)(n7._,{below:"md",children:(0,X.jsx)(i_,{})}),a&&j&&(0,X.jsx)(sl,{isExpanded:_,setIsExpanded:k})]}),(0,X.jsx)(n7._,{below:_&&a?"initial":"xs",children:(0,X.jsx)(ns.k,{css:{gap:"$12"},align:"center",children:(0,X.jsxs)(eP.x,{css:{width:"100%"},children:[(0,X.jsx)(iT,{isBookingBar:j,isLoading:d}),(0,X.jsx)(eN.L,{size:12})]})})}),(0,X.jsxs)(su.Z,{duration:300,height:E,children:[(0,X.jsx)(si,{}),(0,X.jsx)(eN.L,{size:12})]}),(0,X.jsxs)(ns.k,{direction:"column",align:"center",children:[a&&(_||!j)&&(0,X.jsx)(ih.z,{className:(0,n3.M6)("w-full rounded-full py-3font-medium"),type:"submit",disabled:!!o||!c||d,_loading:l,_action:"primary",children:p("listingpage:booking.button",{context:v.instantBook?"instantBook":"requestBook"})}),a&&j&&!_&&(0,X.jsx)(ih.z,{onClick:function(){return k(!0)},type:"button",className:(0,n3.M6)("w-full rounded-full py-3 font-medium"),_action:"primary",children:"View details to book"}),!a&&(0,X.jsx)(ih.z,{onClick:function(){if(!j)return C(!0);w(!0),S()},type:"button",className:(0,n3.M6)("w-full rounded-full py-3 font-medium"),_action:"primary",children:p("common:checkAvailability")})]}),(0,X.jsx)(su.Z,{duration:300,height:E,children:(0,X.jsx)(eS.C,{scale:9,modern:!0,css:{textAlign:"center",marginY:"$12"},children:p("listingpage:booking.paymentChargeInfo")})})]})]})})},sg=function(){var e=(0,tw.G)([t_.w.md],[!0],!1);return(0,X.jsxs)(ro,{hasSpacing:!1,css:{borderTopLeftRadius:"$space$32",borderTopRightRadius:"$space$32",backgroundColor:"$system-white",bottom:0,left:0,position:"fixed",boxShadow:"0 -4px 10px 0 ".concat((0,iH.m)("neutrals-9",.1)),padding:"$24",width:"100%",zIndex:5,marginTop:"$24",paddingBottom:"max(env(safe-area-inset-bottom), 24px)",border:"1px solid $neutrals-2","@md":{boxShadow:"0 2px 8px 0 ".concat((0,iH.m)("neutrals-9",.1)),width:"auto",borderRadius:"$space$32",position:"relative",marginTop:0,maxWidth:"initial",marginX:0}},children:[(0,X.jsx)(ie,{children:(0,X.jsx)(sm,{})}),(0,X.jsx)(r8.G,{style:(0,q._)({},!e&&{position:"absolute",top:"-80px",height:"fit-content"}),children:(0,X.jsx)(id.c,{i18nKey:"common:cookies.copy",components:[(0,X.jsx)("a",{href:"/cookie-policy",target:"_blank",rel:"noopener noreferrer"},"bold")]})})]})},sh=function(){var e=(0,J.bp)().listing.responseData,n=e.basicInfo,t=e.overview,i=e.nearestStation;return(0,X.jsxs)(eP.x,{css:{display:"flex",flexDirection:"column",gap:"$32","@md":{position:"sticky",top:"$32",zIndex:2,maxWidth:"540px",margin:"0 auto",paddingY:"$32"}},children:[(0,X.jsx)(sg,{basicInfo:n,overview:t,nearestStation:i}),(0,X.jsx)(n7._,{below:"md",children:(0,X.jsx)(r6,{})})]})},sp=function(){var e=(0,J.bp)(),n=eM().hasCharacteristics;return{topAmenities:(0,Q.useMemo)(function(){var t,i=(null===(t=e.listing)||void 0===t?void 0:t.responseData.amenities)||[];return i.length?(i=i.sort(function(e,n){return e.name.localeCompare(n.name)}),n(eA)&&(i=eV(i)),n(eT)&&(i=i.filter(function(e){return!eT.includes(e.amenityId)}),i=eX(i,N.Available)),n(eE)&&(i=i.filter(function(e){return!eE.includes(e.amenityId)}),i=eX(i,D.WashingMachine)),n(ez)&&(i=i.filter(function(e){return!ez.includes(e.amenityId)}),i=eX(i,$.Dryer)),n(eF)&&(i=i.filter(function(e){return!eF.includes(e.amenityId)}),i=eX(i,L.GamesConsole)),n(eB)&&(i=i.filter(function(e){return!eB.includes(e.amenityId)}),i=eX(i,O.StreamingServices)),n(eG)&&(i=i.filter(function(e){return!eG.includes(e.amenityId)}),i=eX(i,T.TV)),eY(i).slice(0,6)):[]},[e.listing.responseData.amenities]),topAmenitiesLimit:6}},sx=function(){var e=(0,nS.$)().t,n=eM().count,t=sp(),i=t.topAmenities,r=t.topAmenitiesLimit,s=(0,eI.m)().open;return(0,X.jsxs)(eP.x,{"data-testid":"top-amenities",children:[(0,X.jsx)(eD.D,{scale:6,color:"neutrals-9",modern:!0,children:e("listingpage:amenities:title")}),(0,X.jsx)(eN.L,{size:24}),(0,X.jsx)(nH.r,{columns:{"@initial":1,"@sm":2},rowGap:16,rows:{"@initial":6,"@sm":3},css:{gridAutoFlow:"column"},children:i.map(function(e){return(0,X.jsxs)(ns.k,{align:"center",children:[(0,X.jsx)(tk.N,{}),(0,X.jsx)(eN.L,{horizontal:!0,size:16}),(0,X.jsx)(eS.C,{scale:7,color:"neutrals-9",modern:!0,children:(0,ex.Ks)(e.name)})]},e.name)})}),n>r?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:32}),(0,X.jsx)(te.z,{full:{"@initial":!0,"@sm":!1},type:"button",action:"secondary",size:"small",onClick:function(){return s("amenities")},children:e("listingpage:amenities.showAll",{count:n})})]}):null]})},sf=function(e){var n=e.description,t=(0,e$.$G)().t,i=(0,rx.G)(t_.w.sm,!0),r=n.replace(/(\r\n|\r|\n){3,}/g,"$1\n").trim();return(0,X.jsx)(tm,{children:(0,X.jsx)(rU.t,{copy:r,wordLimit:i?120:35,wordThreshold:30,expandText:t("listingpage:readMore"),collapseText:t("listingpage:readLess"),copyProps:{color:"neutrals-9",modern:!0,scale:7},linkProps:{underline:!0,modern:!0},linkCopyProps:{as:"span",color:"system-inherit",modern:!0,scale:7},multiline:!0})})},sy=function(){var e,n,t,i=(0,J.bp)().listing.responseData.highLows,r=(null==i?void 0:i.highlights)||[],s=(null===(e=r)||void 0===e?void 0:e.length)>0&&void 0!==(t=null===(n=r[0])||void 0===n?void 0:n.title)&&/^\*\*.+\*\*\s+.+/.test(t);return s&&(r=r.map(function(e){var n=e.title,t=e.fileUrl,i=n.split("**");return{title:i.length>1?i[1]:n,copy:i.length>2?i[2].trim():"",fileUrl:t}})),{highlights:r,showHighlightsUpdated:s}},sb=function(){var e,n=(0,J.bp)(),t=sy().highlights,i=(0,e$.$G)().t,r=(0,en._)((0,Q.useState)(0),2),s=r[0],a=r[1],o=n.listing.responseData.highLows,l=function(e){a(e)};return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eD.D,{scale:6,modern:!0,color:"neutrals-9",children:i("listingpage:highlights.title")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsxs)(nH.r,{columns:{"@initial":"1fr","@md":"1fr 2fr"},gap:{"@initial":0,"@md":32},css:{overflow:"hidden",width:"100%",position:"relative"},children:[(0,X.jsx)(n7._,{below:"md",children:(0,X.jsx)(tK.o,{ratio:"3:4",children:null==o?void 0:null===(e=o.highlights)||void 0===e?void 0:e.map(function(e,n){return(0,X.jsx)(nW.t,{src:e.fileUrl,alt:e.title,width:300,layout:"original",cdn:"imgix",className:(0,n3.M6)("transition","absolute","top-0","left-0",s===n?"opacity-100":"opacity-0")},n)})})}),(0,X.jsx)(eP.x,{css:{flexGrow:1},children:(0,X.jsx)(iM.UQ,{css:{border:"none"},defaultSelected:[t[0].fileUrl],children:t.map(function(e,n){return(0,X.jsxs)(iU.Qd,{css:{border:"none",color:"$neutrals-7","&[data-state='open'] span":{color:"$neutrals-9"}},onClick:function(){l(n)},value:e.fileUrl,children:[(0,X.jsx)(iK._,{scale:8,children:(0,X.jsx)(iW.K,{compact:!0,size:"large",disabled:s===n,css:{minHeight:"auto",paddingTop:0,"&:hover":{backgroundColor:"transparent"}},children:(0,X.jsx)(eS.C,{modern:!0,bold:!0,as:"span",scale:{"@initial":8,"@xs":7},children:e.title})})}),(0,X.jsx)(iZ.H,{css:{"> div":{padding:"0"}},children:(0,X.jsxs)(nH.r,{columns:{"@initial":"1fr 1fr","@sm":"1fr 2fr","@md":"1fr"},gap:{"@initial":16},children:[(0,X.jsx)(n7._,{above:"md",children:(0,X.jsx)(tK.o,{ratio:"3:4",children:(0,X.jsx)(nW.t,{src:e.fileUrl,alt:e.title,width:300,layout:"original",cdn:"imgix"})})}),(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",scale:8,children:e.copy})]})}),(0,X.jsx)(eN.L,{size:{"@initial":16,"@md":32}})]},n)})})})]})]})},sv=t(49183);(0,n3.tv)({base:["bg-blue-dark","w-6","h-6","rounded-full","text-blue-light"]});var sj=function(){var e=tg().truths,n=(0,nS.$)().t;return e?(0,X.jsxs)(eP.x,{children:[(0,X.jsx)(eD.D,{scale:6,modern:!0,color:"neutrals-9",children:n("listingpage:homeTruths.title")}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(eP.x,{as:"ul",children:e.map(function(e,n){return(0,X.jsxs)(ns.k,{css:{gap:"$12",marginBottom:"$12"},children:[(0,X.jsx)(eP.x,{css:{marginTop:"$2",borderRadius:"9999px",width:"$24",height:"$24",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"$brand-blue-light"},children:(0,X.jsx)(sv.Z,{color:"blue",_size:"md",className:"text-blue-darkest w-6 h-6 rounded-full"})}),(0,X.jsx)(eS.C,{modern:!0,color:"neutrals-9",scale:{"@initial":8,"@sm":7},children:e})]},"truth-".concat(n))})})]}):null},sI=t(40680),sC=function(e){var n=e.children,t=e.separator;return(0,X.jsx)("div",{children:Q.Children.map(n,function(e,n){if(Q.isValidElement(e)){var i=Q.cloneElement(e);return 0===n?i:[Q.cloneElement(t,(0,ee._)((0,q._)({},t.props),{key:"separator-child-".concat(n)})),i]}})})},sw=function(){var e=ru(),n=(0,X.jsx)(eS.C,{as:"span",color:"neutrals-7",modern:!0,scale:8,css:{marginRight:"4px"},"aria-hidden":!0,children:","});return(0,X.jsx)(sC,{separator:n,children:e.slice(-2).reverse().map(function(e){return(0,X.jsx)(ts.r,{href:e.url,intent:"detail",underline:!0,children:(0,X.jsx)(eS.C,{as:"span",modern:!0,color:"neutrals-7",scale:8,children:e.name})},e.name)})})},s_=function(){var e=(0,J.bp)().listing.responseData.basicInfo,n=ru();return(0,X.jsxs)("div",{className:(0,no.g)({textAlign:{"@initial":"left"}}),children:[(0,X.jsxs)(n7._,{below:"md",children:[(0,X.jsx)(rc.O,{items:n}),(0,X.jsx)(eN.L,{size:16})]}),(0,X.jsx)(eD.D,{as:"h1",scale:"1",editorial:!0,modern:!0,children:e.name}),(0,X.jsxs)(n7._,{above:"md",children:[(0,X.jsx)(eN.L,{size:4}),(0,X.jsx)(sw,{})]})]})},sk=t(24600),sS=t(87850),sP=(0,nJ.zo)("li",{display:"flex",flexDirection:"column",justifyContent:"center",columnGap:"$8",alignItems:"flex-start","@lg":{flexDirection:"row"}}),sN=function(){var e=(0,J.bp)().listing.responseData,n=(0,nS.$)().t,t=(0,es.ts)().user,i=t.countryId,r=t.language,s=e.basicInfo.guestCount,a=tt(),o=a.bedCount,l=a.bedroomCount,c=a.bathroomCount,d=(0,J.bp)().listing.responseData.overview,u=n("common:home.bathroom",{count:c});return(0,X.jsxs)(ns.k,{wrap:"false",as:"ul",align:"center",css:{gap:"$12"},children:[(0,X.jsxs)(sP,{children:[(0,X.jsx)(sk.j,{}),(0,X.jsxs)(eS.C,{modern:!0,color:"system-black",scale:8,bold:!0,css:{whiteSpace:"nowrap"},children:[s," ",n("listingpage:homeSpec.guest",{count:s})]})]}),(0,X.jsxs)(sP,{children:[(0,X.jsx)(nI.r,{css:{marginRight:"$4"}})," ",(0,X.jsx)(eS.C,{modern:!0,color:"system-black",scale:8,bold:!0,css:{whiteSpace:"nowrap"},children:(0,X.jsx)(ti,{bedCount:o,bedroomCount:l,compact:!0})})]}),(0,X.jsxs)(sP,{children:[(0,X.jsx)(nL.o,{css:{marginRight:"$4",transform:"scale(0.8)"},size:"sm"}),(0,X.jsx)(eS.C,{modern:!0,color:"system-black",scale:8,bold:!0,css:{whiteSpace:"nowrap"},children:"".concat(c," ").concat(u).toLowerCase()})]}),(null==d?void 0:d.totalArea)>0?(0,X.jsxs)(sP,{children:[(0,X.jsx)(sS.R,{css:{marginRight:"$4",transform:"scale(0.8)"},size:"sm"}),(0,X.jsx)(eS.C,{modern:!0,color:"system-black",scale:8,bold:!0,css:{whiteSpace:"nowrap"},children:(0,X.jsx)(nm,{countryId:i,language:r,area:d.totalArea})})]}):null]})},sD=t(54150),s$=t(65789);function sL(e){var n=e.context,t=(0,e$.$G)().t;return(0,X.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,X.jsx)(sD.W,{className:"flex-none [&_circle]:fill-yellow-light w-16 h-16 sm:w-20 sm:h-20"}),(0,X.jsxs)(ta.x,{as:"div",_scale:"b-small",children:[(0,X.jsx)("strong",{className:"font-medium",children:t("plumPromiseAlert.title",{context:n})}),(0,X.jsxs)("p",{children:[t("plumPromiseAlert.content",{context:n})," ",(0,X.jsx)(s$.k,{trigger:(0,X.jsx)(r4.r,{as:"button",type:"button",trackId:"plum-promise-learn-more",_underline:!0,children:t("plumPromiseAlert.cta")})})]})]})]})}var sO=function(){var e=(0,e$.$G)().t,n=(0,eI.m)().open;return(0,X.jsxs)("div",{className:"flex flex-col justify-center bg-gray-50 h-full w-full p-6 xxl:p-12",children:[(0,X.jsx)(ta.x,{_scale:"b-small",children:e("listingpage:highlightsSlider.viewPhotosTitle")}),(0,X.jsx)(ih.z,{className:"mt-4 w-full",type:"button",_action:"secondary",_size:"small",onClick:function(){return n("gridModal")},children:e("listingpage:highlightsSlider.viewPhotosButton")})]})},sT=(0,nJ.zo)("div",{overflow:"hidden",width:"calc(100% + $32)",marginX:"-$16",paddingX:"$16","@sm":{width:"100%",marginX:0,paddingX:0,overflow:"hidden"},"@md":{width:"100%",overflow:"visible"}});function sA(e){var n=e.emblaApi,t=(0,n3.M6)("w-6 h-6","flex items-center justify-center","rounded-full","border border-gray-500","transition","focus-ring","lg:w-8 lg:h-8","hover:bg-gray-50","disabled:opacity-50 disabled:pointer-events-none"),i=(0,Q.useRef)(null),r=(0,Q.useRef)(null);return(0,Q.useEffect)(function(){var e=function(){n&&(i.current.disabled=!n.canScrollPrev(),r.current.disabled=!n.canScrollNext())};if(n)return e(),n.on("select",e),function(){n.off("select",e)}},[n]),(0,X.jsxs)("div",{className:"flex gap-3",children:[(0,X.jsx)("button",{ref:i,className:t,type:"button",onClick:function(){return null==n?void 0:n.scrollPrev()},children:(0,X.jsx)(nY.Z,{_size:"xs",_rotate:90})}),(0,X.jsx)("button",{ref:r,className:t,type:"button",onClick:function(){return null==n?void 0:n.scrollNext()},children:(0,X.jsx)(nY.Z,{_size:"xs",_rotate:270})})]})}var sE=function(){var e,n=(0,J.bp)(),t=(0,en._)((0,nZ.v)({options:{align:"start",containScroll:"trimSnaps",dragFree:!0}}),2),i=t[0],r=t[1],s=n.listing.responseData.highLows,a=(0,nS.$)().t;return(null==s?void 0:null===(e=s.highlights)||void 0===e?void 0:e.length)?(0,X.jsxs)(sT,{children:[(0,X.jsxs)(n7._,{above:"md",children:[(0,X.jsx)(na.i,{}),(0,X.jsx)(eN.L,{size:32})]}),(0,X.jsx)(ns.k,{justify:"between",children:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eS.C,{bold:!0,scale:6,color:"neutrals-9",modern:!0,children:a("listingpage:highlights.title")}),s.highlights.length>=3&&(0,X.jsx)(n7._,{below:"sm",children:(0,X.jsx)(sA,{emblaApi:r})})]})}),(0,X.jsx)(eN.L,{size:{"@initial":16}}),(0,X.jsx)("div",{ref:i,className:"relative md:overflow-hidden",children:(0,X.jsxs)("div",{className:"flex -mx-3",children:[s.highlights.map(function(e,n){return(0,X.jsxs)("div",{className:"flex-none w-3/4 xs:w-2/3 sm:w-1/3 px-3 border-r border-gray-150",children:[(0,X.jsx)("div",{className:"aspect-[1/1]",children:(0,X.jsx)(nW.t,{src:e.fileUrl,alt:e.title,width:480,layout:"original",cdn:"imgix",sizes:"(min-width: 1440px) 306px, (min-width: 1280px) 222px, (min-width: 992px) 194px, (min-width: 768px) 266px, 56vw",breakpoints:[360,480]})}),(0,X.jsx)(eN.L,{size:12}),(0,X.jsx)(eS.C,{scale:"7",color:"neutrals-9",modern:!0,children:(0,ex.kC)(e.title)})]},"highlight-".concat(n))}),(0,X.jsx)("div",{className:"flex-none w-3/4 xs:w-2/3 sm:w-1/3 px-3",children:(0,X.jsx)(sO,{})})]})})]}):null};sE.displayName="HighlightsSlider";var sz=function(e){var n=e.children;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eD.D,{as:"h2",scale:"4",color:"neutrals-9",editorial:!0,modern:!0,children:n}),(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(na.i,{})]})},sF=function(){var e,n=(0,J.bp)(),t=sy().showHighlightsUpdated,i=(0,e$.$G)().t,r=(0,eI.m)().open,s=n.listing.responseData,a=s.amenities,o=s.basicInfo,l=s.services,c=s.photos,d=s.floorplan,u=s.highLows,m=(0,sI.T)(o),g=i("listingpage:criticReviewExp");return(0,X.jsxs)(eP.x,{className:"sm:mt-8",css:{columnGap:"calc($12 + 4%)","@md":{display:"grid",gridTemplateColumns:"3fr 2fr"}},children:[(0,X.jsxs)("div",{children:[(0,X.jsx)(s_,{}),(0,X.jsx)(eN.L,{size:24}),(0,X.jsx)(sN,{})]}),(0,X.jsx)(eP.x,{css:{gridColumn:"2/2",gridRow:"span 2"},children:(0,X.jsx)(sh,{})}),(0,X.jsxs)(ro,{hasSpacing:!1,css:{"@initial":{overflow:"auto"},"@md":{overflow:"hidden"}},children:[(0,X.jsxs)(eD.D,{as:"h3",scale:"6",color:"neutrals-9",modern:!0,css:{marginTop:"$24"},children:[(0,X.jsx)(r2.Q,{width:26,css:{marginRight:"$4",verticalAlign:"sub",fontSize:"1.2em"}}),g]}),(0,X.jsx)(eN.L,{size:8}),(0,X.jsx)(sf,{description:m}),(0,X.jsxs)(n7._,{above:"sm",children:[(0,X.jsx)(eN.L,{size:32}),(0,X.jsx)(te.z,{action:"secondary",size:"small",full:!0,onClick:function(){r("gridModal")},children:i("listingpage:homeSpec.viewPhoto",{count:c.length})}),d.hasFloorPlanImages&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:16}),(0,X.jsx)(te.z,{action:"secondary",size:"small",full:!0,onClick:function(){r("floorPlan")},children:i("listingpage:homeSpec:floorplan")})]}),(0,X.jsx)(eN.L,{size:32})]}),(0,X.jsx)("div",{className:"sm:mt-5 ",children:(0,X.jsx)(sL,{context:"guest"})}),(0,X.jsxs)(n7._,{above:"md",children:[(0,X.jsx)(eN.L,{size:24}),(0,X.jsx)(r6,{})]}),(0,X.jsx)(eN.L,{size:64}),(null==u?void 0:null===(e=u.highlights)||void 0===e?void 0:e.length)?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(sz,{children:i("listingpage:highLows.title")}),(0,X.jsx)(eN.L,{size:32}),(0,X.jsx)(eS.C,{scale:7,color:"neutrals-9",modern:!0,children:i("listingpage:highLows.copy")}),t?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:32}),(0,X.jsx)(sb,{})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:32}),(0,X.jsx)(sE,{})]}),(null==u?void 0:u.listingLows)&&"tbc"!==u.listingLows?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:48}),(0,X.jsx)(sj,{})]}):null,(0,X.jsx)(eN.L,{size:64})]}):null,(0,X.jsx)(sz,{children:"About this stay"}),a.length?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:40}),(0,X.jsx)(sx,{}),(0,X.jsx)(eN.L,{size:48})]}):null,(0,X.jsx)(tr,{}),(null==o?void 0:o.additionalFees)?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:48}),(0,X.jsx)(tR,{})]}):null,l&&l.length?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(eN.L,{size:48}),(0,X.jsx)(tP,{})]}):null,(0,X.jsx)(eN.L,{size:64})]})]})},sB=function(){var e=(0,tw.G)([t_.w.sm],[!0],!1),n=(0,Q.useRef)(null);(0,Q.useEffect)(function(){var t=function(){document.querySelector("div.intercom-launcher")?(document.querySelector("div.intercom-launcher").classList.toggle("intercom-lightweight-app-launcher",e),clearTimeout(n.current)):n.current=setTimeout(t,1e3)};return t(),function(){clearTimeout(n.current)}},[e])},sG=t(47099);function sM(e){var n=e.host,t=(0,nS.$)().t;return(0,X.jsxs)("div",{children:[(0,X.jsxs)(ta.x,{as:"h2",className:"mb-2",_scale:"b-medium",_bold:!0,children:["This home is managed by ",n.firstName]}),(0,X.jsx)(ta.x,{_scale:"b-medium",children:(0,ex.dO)([t("listingpage:allTheDetails.yourHost.managed",{context:(null==n?void 0:n.hostTypeId)===Y.Individual?"owner":"business"}),n.biography])})]})}function sR(){var e=(0,nS.$)().t,n=r3(),t=n.isAuthenticated,i=n.isHighValueBooking,r=n.onClick;return(0,X.jsx)(ih.z,{className:"my-8",_action:"secondary",onClick:r,children:e(i?"host.getInTouch.ctaHighValue":"host.getInTouch.ctaHost",{context:t?"":"loggedOut"})})}function sU(){var e,n,t,i=(0,J.bp)().listing.responseData,r=i.basicInfo,s=i.host,a=(0,nS.$)().t,o=(0,en._)(Q.useContext(el),1)[0],l=(0,ex.Uh)(s,"registrationNumber")&&s.registrationNumber.length>1,c=(0,ex.Uh)(s,"propertyType");return(0,X.jsxs)("section",{className:"mb-16 md:mb-20",children:[(0,X.jsx)(ta.x,{as:"h2",_scale:"h-4",_serif:!0,_bold:!0,children:"Host"}),(0,X.jsx)(sG.i,{className:"mt-4 mb-8"}),(0,X.jsx)("div",{className:"grid md:grid-cols-3 gap-8",children:(0,X.jsxs)("div",{className:"col-span-2 max-w-2xl",children:[(0,X.jsx)(sL,{context:"host"}),(0,X.jsx)(sG.i,{className:"my-8"}),(0,X.jsx)(sM,{host:s}),(0,X.jsx)(sR,{}),(l||c)&&(0,X.jsx)(ta.x,{className:"text-gray-700",_scale:"b-tiny",children:(0,ex.dO)([l&&a("listingpage:allTheDetails.yourHost.propertyLicence",{registrationNumber:s.registrationNumber}),c&&a("listingpage:allTheDetails.yourHost.propertyClassification",{propertyType:a((e=s.propertyType,n=null===(t=o.city)||void 0===t?void 0:t.slug,"common:common.".concat(n,".propertyTypes.").concat((0,ex.zW)(e),".name")))})])}),(0,X.jsx)(ta.x,{_scale:"b-tiny",children:a(r.isNominated?"listingpage:nominatedHomesStamp.title":"listingpage:homeVettingExp.title")})]})})]})}(k=Y||(Y={}))[k.Individual=1]="Individual",k[k.Business=2]="Business";var sH=function(e){var n=e.token,t=(0,J.bp)(),i=(0,es.ts)(),r=t.listing,s=r.isAdmin,a=r.responseData,o=a.basicInfo,l=a.lastSyncDate;return sB(),(0,X.jsxs)("div",{className:"listing-page",children:[(0,X.jsx)(r1,{token:n}),(0,ex.sh)(o.status)?(0,X.jsx)(rp,{}):null,(0,X.jsxs)("main",{children:[(0,X.jsx)("div",{className:"container",children:(0,X.jsx)(r_,{})}),(0,X.jsx)("div",{className:"container container-narrow",children:(0,X.jsx)(sF,{})}),(0,X.jsx)("div",{className:"container container-no-gutter",children:(0,X.jsx)(rZ,{})}),(0,X.jsxs)("div",{className:"container container-narrow",children:[(0,X.jsx)(rl,{}),(0,X.jsx)(sU,{})]}),!(0,ex.sh)(o.status)&&(0,X.jsx)(rg,{})]}),(0,X.jsx)(rY,{}),(0,X.jsxs)("div",{className:"max-sm:mb-14",children:[(0,X.jsx)(eg.Z,{children:(0,X.jsx)(eh.T,{currencyCode:i.user.currencyCode,language:i.user.language})}),(0,X.jsx)(ep.g,{})]}),s&&(0,X.jsx)(rQ,{syncDate:l}),(0,X.jsx)(ri,{})]})},sK=t(53768),sW=t(75465),sZ=t(51954),sV=t(76118),sY=(0,sW.L)({uri:ew.v.GQL_URI,credentials:"include"}),sX=new sZ.f({connectToDevTools:!0,link:sY,cache:new sV.h,name:"listingpage-ssr",version:"0.1"}),sQ=t(30667);t(77090),t(79145);var sJ=!0,sq=function(e){var n=e.initialState,t=e.experiments,i=e.token;return n.listing?(0,X.jsx)(sK.e,{client:sX,children:(0,X.jsx)(J.ZP,{initialState:n,children:(0,X.jsx)(es.ZP,{children:(0,X.jsx)(ec,{children:(0,X.jsx)(er,{children:(0,X.jsx)(eu,{experiments:t,children:(0,X.jsx)(em.ZP,{children:(0,X.jsxs)(tA,{children:[(0,X.jsx)(sQ.Hq,{}),(0,X.jsx)(sH,{token:i})]})})})})})})})}):null}},59335:function(e,n,t){"use strict";t.d(n,{Tj:function(){return s},ZP:function(){return Z},Qo:function(){return W}});var i,r,s,a=t(11010),o=t(72253),l=t(14932),c=t(91309);t(4586);var d=t(97582),u=t(85893),m=t(67294),g=t(34078),h=t.n(g),p=t(11640),x=t(82644),f=t(51085),y=t(43703),b=t(86239),v=t(18791),j=t(562),I=t(7974),C=t(63144),w=t.n(C),_=t(64617),k=t(61279),S=function(e,n){return{status:e,data:n}},P=function(e,n){return{status:e,data:n}},N=(i=(0,a._)(function(e){var n,t,i,r,s,a,o;return(0,d.Jh)(this,function(l){return n=e.listingid,t=e.checkin,i=e.checkout,r=e.guests,s=e.currencyCode,a=e.countryId,o=h()(_.v.API_BASE_URI,"calculatePrice","?".concat((0,k.G7)({listingid:n,checkin:t,checkout:i,guests:r,currencyCode:s,countryId:a}))),[2,w()(o).then(function(e){return 200!==e.status?S("NotFound"):e.json().then(function(e){return S("Found",e)})}).catch(function(e){return console.error("calculatePrice error",e),S("NotFound")})]})}),function(e){return i.apply(this,arguments)});(0,a._)(function(e){var n,t,i,r;return(0,d.Jh)(this,function(s){return n=e.listingid,t=e.from,i=e.to,r=h()(_.v.API_BASE_URI,"blockedDates","?".concat((0,k.G7)({listingid:n,from:t,to:i}))),[2,w()(r).then(function(e){return 200!==e.status?(console.error("getBlockedDates returns",e.status),P("NotFound")):e.json().then(function(e){return P("Found",e)})}).catch(function(e){return console.error("getBlockedDates error",e),P("NotFound")})]})});var D=(r=(0,a._)(function(e,n,t){var i,r,s;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),i=(0,k.G7)({listingId:e,from:n,to:t}),r=h()(_.v.API_BASE_URI,"calendar","?".concat(i)),[4,w()(r)];case 1:if(!(s=a.sent()).ok)return[3,3];return[4,s.json()];case 2:return[2,a.sent().dates.map(function(e){return(0,l._)((0,o._)({},e),{date:new Date(e.date)})})];case 3:return[3,5];case 4:return console.error(a.sent()),[3,5];case 5:return[2,[]]}})}),function(e,n,t){return r.apply(this,arguments)}),$=t(3052),L=t(6384),O=function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(i.days||i.minutes||i.hours)&&(t=new Date,i.days&&t.setTime(t.getTime()+864e5*i.days),i.hours&&t.setTime(t.getTime()+36e5*i.days),i.minutes&&t.setTime(t.getTime()+6e4*i.minutes)),document.cookie="".concat(e,"=").concat(encodeURIComponent(n),"; ").concat(t?"expires=".concat(t):"","; path=").concat(i.path||"/")},T=function(e){return document.cookie.split("; ").reduce(function(n,t){var i=t.split("=");return i[0]===e?decodeURIComponent(i[1]):n},"")},A=function(e,n){var t=(0,c._)((0,m.useState)(T(e)||n),2),i=t[0],r=t[1];return(0,m.useEffect)(function(){r(T(e))},[e]),[i,function(n,t){r(n),O(e,n,t)}]},E=t(20563),z=t(28721),F=t(60167),B=t(24818),G=t(65128),M=t(41305);(0,E.zo)(z.k,{position:"absolute",left:0,top:0,zIndex:"$-1",borderRadius:"$4",backgroundColor:"$brand-midnight-blue-primary",boxShadow:"0 2px 4px 0 ".concat((0,F.m)("brand-midnight-blue-primary",.25)),padding:"$8",paddingLeft:"$16",transform:"translateY(-100%) translateY(-$16)",transition:B.U.smooth({duration:400}),transitionDelay:"50ms",display:"none","@sm":{display:"flex"},variants:{hidden:{true:{transform:"translateY(0)",transitionDelay:"0ms",opacity:0}}}}),(0,E.zo)(G.r,(0,o._)({position:"relative",background:"none",appearance:"none",border:"none",boxShadow:"none",padding:"$0","& span":{color:"$neutrals-0",transition:"150ms color ease-out"},after:{content:"''",position:"absolute",left:0,right:0,bottom:0,height:"1px",backgroundColor:"$neutrals-5",transform:"scaleX(0)",transformOrigin:"0 50%",transition:"150ms transform ease-out"}},(0,M.wO)(["hover","focus"],{"& span":{color:"$neutrals-5"},after:{transform:"scaleX(1)"}})));var R=t(49297),U=t(60385);(s||(s={})).GetAvailability="get-availability";var H=function(e){var n=(0,$.cD)(e);return(0,x.Z)(n)||(0,f.Z)(n)?n:null},K=m.createContext(null);K.displayName="BookingContext";var W=function(){return m.useContext(K)};function Z(e){var n,t,i,r=e.children,g=(0,j.bp)(),x=(0,I.ts)(),f=(0,L.o)(),C=f.toQueryStr,w=f.queryObject,S=(0,c._)(A("vip-tooltip--closed",""),2)[1],P=g.listing.responseData,O=P.availability,T=P.basicInfo,E={from:w.checkin&&H(w.checkin)||void 0,to:w.checkout&&H(w.checkout)||void 0},z={error:null,data:null,isOpen:!1,isLoading:!!(E.from&&E.to),isVIPOpen:!0,hasPressedSubmit:!1,hasSubmittedSpecialDiscountContactForm:!1,form:{date:{from:E.from,to:E.to},detailGuests:{adults:Number(w.adults)||Number(w.guests)||1,children:Number(w.children)||0,infants:Number(w.infants)||0,pets:Number(w.pets)||0},guests:Number(w.adults)+Number(w.children)||Number(w.guests)||1},availability:{currentMonth:new Date,nextMonth:(0,p.Z)(E.to||E.from||(0,y.Z)(new Date),12),disabledDays:(null==O?void 0:null===(t=O.blockedDates)||void 0===t?void 0:t.map(function(e){return new Date(e)}))||[]},calendar:{dates:[]},allowBooking:(0,k.Mr)(T.status)&&("1"==T.id||(null===(i=x.user.email)||void 0===i?void 0:i.includes("@plumguide.com"))||!T.hiddenFromSearch)},F=(0,c._)(m.useState(z),2),B=F[0],G=F[1],M=!!(B.form.date.from&&B.form.date.to),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.form;e.date.from&&e.date.to&&(G(function(e){return Object.assign({},e,{isLoading:!0})}),N({listingid:T.id,checkin:(0,$.p6)(e.date.from,$.E_.ISO),checkout:(0,$.p6)(e.date.to,$.E_.ISO),guests:Number(e.detailGuests.adults+e.detailGuests.children),currencyCode:x.user.currencyCode,countryId:x.user.countryId}).then(function(n){var t,i,r,s,a,o;if(!n.data||!n.data.responseData.isAvailable){G(function(e){return Object.assign({},e,{data:null,error:"unavailable",isLoading:!1})}),n.data.responseData.isAvailable||(0,v.R7)({name:"listing-unavailable-dates",parameters:{listingId:T.id,checkInDate:(0,$.p6)(e.date.from,$.E_.ISO),checkOutDate:(0,$.p6)(e.date.to,$.E_.ISO),guests:Number(e.guests)||1}});return}G(function(e){return Object.assign({},e,{data:n.data.responseData,error:null,isLoading:!1})}),(0,v.R7)({name:"listing-calculated-price",parameters:{totalPriceGbp:n.data.responseData.totalPriceGbp,value:n.data.responseData.totalPrice||0,city:null==T?void 0:null===(t=T.tracking)||void 0===t?void 0:t.city,country:null==T?void 0:null===(i=T.tracking)||void 0===i?void 0:i.country,region:null==T?void 0:null===(r=T.tracking)||void 0===r?void 0:r.region,nights:n.data.responseData.nights,guests:Number(e.guests)||1,checkInDate:(0,$.p6)(e.date.from,$.E_.ISO),checkOutDate:(0,$.p6)(e.date.to,$.E_.ISO),displayPricePerNight:n.data.responseData.displayPricePerNight,listing_id:T.id,content_ids:[T.id],google_business_vertical:"hotel_rental",listingName:T.name,totalPrice:n.data.responseData.totalPrice,currency:n.data.responseData.currencyIsoCode,currencyIsoCode:n.data.responseData.currencyIsoCode}}),(0,v.R7)({name:"listing-calculated-price-intercom",parameters:{totalPriceGbp:n.data.responseData.totalPriceGbp,city:null==T?void 0:null===(s=T.tracking)||void 0===s?void 0:s.city,country:null==T?void 0:null===(a=T.tracking)||void 0===a?void 0:a.country,region:null==T?void 0:null===(o=T.tracking)||void 0===o?void 0:o.region,nights:n.data.responseData.nights,guests:Number(e.guests)||1,checkInDate:(0,$.p6)(e.date.from,$.E_.ISO),checkOutDate:(0,$.p6)(e.date.to,$.E_.ISO),listing_id:T.id}}),n.data.responseData.conciergePopupDealValue>_.v.VIP_PRICE_GBP&&(0,v.R7)({name:b.e7})}).catch(function(e){G(function(e){return Object.assign({},e,{error:"unexpectedError",isLoading:!1})}),console.error("an error has occurred",e)}))},Z=function(){G(function(e){return Object.assign({},e,{data:null,error:null})})},V=function(){var e=window.location.pathname,n=h()(e,C(Object.assign({},w,{checkin:B.form.date.from?(0,$.p6)(B.form.date.from,$.E_.ISO):void 0,checkout:B.form.date.to?(0,$.p6)(B.form.date.to,$.E_.ISO):void 0,adults:B.form.detailGuests.adults>1?B.form.detailGuests.adults:void 0,children:B.form.detailGuests.children||void 0,infants:B.form.detailGuests.infants||void 0,pets:B.form.detailGuests.pets||void 0})));window.history.replaceState(null,document.title,n)},Y=(n=(0,a._)(function(e,n,t){var i;return(0,d.Jh)(this,function(r){switch(r.label){case 0:return[4,D(e,(0,$.p6)(n,$.E_.ISO),(0,$.p6)(t,$.E_.ISO))];case 1:return i=r.sent(),G(function(e){return(0,l._)((0,o._)({},e),{availability:(0,l._)((0,o._)({},e.availability),{nextMonth:t}),calendar:{dates:e.calendar.dates.concat(i)}})}),[2]}})}),function(e,t,i){return n.apply(this,arguments)});return(0,R.i)(s.GetAvailability,function(e){var n=e.start,t=e.end;Y(T.id,n,t)}),m.useEffect(function(){if(!B.calendar.dates.length){var e=new Date;(0,U.W)(s.GetAvailability,{start:e,end:(0,p.Z)(E.to||E.from||(0,y.Z)(e),12)})}},[]),m.useEffect(function(){var e=T.tracking,n=0,t=setInterval(function(){var i;if(null===(i=window)||void 0===i?void 0:i.analytics){clearInterval(t);var r=(0,$.p6)(B.form.date.from,$.E_.ISO),s=(0,$.p6)(B.form.date.to,$.E_.ISO);(0,v.cA)({google_business_vertical:"hotel_rental",items:[{id:T.id,start_date:r,end_date:s,google_business_vertical:"hotel_rental"}],id:T.id,start_date:r,end_date:s,listing_id:parseInt(T.id),listing_name:T.name,content_type:"hotel",checkin_date:r,checkout_date:s,content_ids:[parseInt(T.id)],city:null==e?void 0:e.city,region:null==e?void 0:e.region,country:null==e?void 0:e.country,num_adults:B.form.detailGuests.adults,num_children:B.form.detailGuests.children})}else 10==++n&&(console.log("Failed to load analytics"),clearInterval(t))},1e3)},[]),m.useEffect(function(){V(),G(function(e){return(0,l._)((0,o._)({},e),{form:(0,l._)((0,o._)({},e.form),{guests:B.form.detailGuests.adults+B.form.detailGuests.children})})}),M?x.isFetching||W():Z()},[B.form.date,B.form.guests,B.form.detailGuests,x.user.currencyCode,x.user.countryId,x.isFetching]),m.useEffect(function(){x.isFetching||G(function(e){var n;return(0,l._)((0,o._)({},e),{allowBooking:(0,k.Mr)(T.status)&&("1"==T.id||(null===(n=x.user.email)||void 0===n?void 0:n.includes("@plumguide.com"))||!T.hiddenFromSearch)})})},[x.user.email,x.isFetching]),m.useEffect(function(){B.isVIPOpen||S("true")},[B.isVIPOpen]),m.useEffect(function(){var e=B.form.date.from?(0,$.p6)(B.form.date.from,$.E_.LEGACY):"",n=B.form.date.to?(0,$.p6)(B.form.date.to,$.E_.LEGACY):"",t={"listingpage-price":B.data&&B.data.totalPrice||"","listingpage-checkin":e,"listingpage-checkout":n,"listingpage-guests":B.form.guests||""};window.dataLayer=window.dataLayer||[],window.dataLayer.push(t)},[B.form.date,B.data]),m.useEffect(function(){var e=function(){G(function(e){return(0,l._)((0,o._)({},e),{hasPressedSubmit:!1})})};return window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1),function(){window.removeEventListener("pageshow",e,!1),window.removeEventListener("pagehide",e,!1)}},[]),(0,u.jsx)(K.Provider,{value:[B,G],children:r})}},7974:function(e,n,t){"use strict";t.d(n,{ZP:function(){return v},jL:function(){return y},ts:function(){return f}});var i,r,s,a=t(11010),o=t(72253),l=t(14932),c=t(91309),d=t(97582),u=t(85893),m=t(67294),g=t(64617);(i=s||(s={})).Admin="Admin",i.Host="Host",i.HostManager="HostManager";var h={getUserInfo:(r=(0,a._)(function(){var e,n=arguments;return(0,d.Jh)(this,function(t){return e=n.length>0&&void 0!==n[0]?n[0]:"/",[2,fetch("".concat(e,"api/user/info"),{headers:{"cache-control":"no-cache",pragma:"no-cache"},method:"GET"}).then(function(e){return e.json()})]})}),function(){return r.apply(this,arguments)})},p=(0,m.createContext)(null);p.displayName="UserStateContext";var x=(0,m.createContext)(null);x.displayName="UserActionsContext";var f=function(){return(0,m.useContext)(p)},y=function(){return(0,m.useContext)(x)},b={isFetching:!0,user:{countryId:234,countryCode:"GB",currencyId:1,currencyCode:"GBP",currencyFxRate:1,isAuthenticated:!1,language:"en-GB",name:"",email:"",firstName:"",lastName:"",photoUrl:"",phoneNumber:null,units:"imperial"}};function v(e){var n=e.children,t=(0,c._)((0,m.useState)(b),2),i=t[0],r=t[1],s=(0,m.useMemo)(function(){return{fetchUser:(0,a._)(function(){var e;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,h.getUserInfo(g.v.APP_BASE_URI)];case 1:return r({user:n.sent(),isFetching:!1}),[3,3];case 2:return e=n.sent(),r(function(e){return{user:e.user,isFetching:!1}}),console.info("Failed to fetch /api/user/info"),console.error(e),[3,3];case 3:return[2]}})}),setUser:function(e){r({user:(0,l._)((0,o._)({},e),{units:"GB"===e.countryCode||"US"===e.countryCode?"imperial":"metric"}),isFetching:!1})},clearUser:function(){r((0,l._)((0,o._)({},b),{isFetching:!1}))},saveCurrencyAndLanguage:function(e,n,t){r(function(i){return(0,l._)((0,o._)({},i),{user:(0,l._)((0,o._)({},i.user),{currencyId:e,currencyCode:n,language:t})})})},saveCurrency:function(e){r(function(n){return(0,l._)((0,o._)({},n),{user:(0,l._)((0,o._)({},n.user),{currencyCode:e})})})}}},[]);return(0,m.useEffect)(function(){s.fetchUser()},[s]),(0,u.jsx)(p.Provider,{value:i,children:(0,u.jsx)(x.Provider,{value:s,children:n})})}g.v.APP_BASE_URI,g.v.FACEBOOK_APP_ID,g.v.GOOGLE_APP_ID,g.v.CDN_URL},3052:function(e,n,t){"use strict";t.d(n,{E_:function(){return r},cD:function(){return u},p6:function(){return c}});var i,r,s=t(42298),a=t(48097),o=t(61436),l=t(38431);function c(e,n){return e?(0,s.Z)(e,n):null}function d(e,n){return e?(0,a.Z)(e,n,new Date):null}function u(e){if(!(0,l.Z)(e,r.ISO)&&!(0,l.Z)(e,r.LEGACY))return null;var n=d(e,r.ISO);return(0,o.Z)(n)?n:d(e,r.LEGACY)}(i=r||(r={})).ISO="yyyy-MM-dd",i.LEGACY="dd/MM/yyyy",i.FULL="yyyy-MM-dd HH:mm:ss",i.FULL_WEEKDAY="EEE d MMM, yyyy",i.PRETTY="d MMM, yyyy",i.PRETTY_NO_YEAR="d MMM"}},function(e){e.O(0,[313,774,888,179],function(){return e(e.s=30559)}),_N_E=e.O()}]);